var tP=Object.defineProperty,nP=Object.defineProperties;var rP=Object.getOwnPropertyDescriptors;var ww=Object.getOwnPropertySymbols;var iP=Object.prototype.hasOwnProperty,oP=Object.prototype.propertyIsEnumerable;var Tw=(t,e,n)=>e in t?tP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})iP.call(e,n)&&Tw(t,n,e[n]);if(ww)for(var n of ww(e))oP.call(e,n)&&Tw(t,n,e[n]);return t},Ie=(t,e)=>nP(t,rP(e));var ct=null,Fu=!1,hp=1,sP=null,mt=Symbol("SIGNAL");function J(t){let e=ct;return ct=t,e}function ju(){return ct}var la={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function da(t){if(Fu)throw new Error("");if(ct===null)return;ct.consumerOnSignalRead(t);let e=ct.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=ct.recomputing;if(r&&(n=e!==void 0?e.nextProducer:ct.producers,n!==void 0&&n.producer===t)){ct.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===ct&&(!r||cP(i,ct)))return;let o=Io(ct),s={producer:t,consumer:ct,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};ct.producersTail=s,e!==void 0?e.nextProducer=s:ct.producers=s,o&&Sw(t,s)}function Dw(){hp++}function fp(t){if(!(Io(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===hp)){if(!t.producerMustRecompute(t)&&!Bu(t)){dp(t);return}t.producerRecomputeValue(t),dp(t)}}function pp(t){if(t.consumers===void 0)return;let e=Fu;Fu=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||aP(r)}}finally{Fu=e}}function gp(){return ct?.consumerAllowSignalWrites!==!1}function aP(t){t.dirty=!0,pp(t),t.consumerMarkedDirty?.(t)}function dp(t){t.dirty=!1,t.lastCleanEpoch=hp}function ha(t){return t&&bw(t),J(t)}function bw(t){t.producersTail=void 0,t.recomputing=!0}function Uu(t,e){J(e),t&&Cw(t)}function Cw(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Io(t))do n=mp(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Bu(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(fp(n),r!==n.version))return!0}return!1}function fa(t){if(Io(t)){let e=t.producers;for(;e!==void 0;)e=mp(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Sw(t,e){let n=t.consumersTail,r=Io(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)Sw(i.producer,i)}function mp(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Io(e)){let o=e.producers;for(;o!==void 0;)o=mp(o)}return n}function Io(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function yp(t){sP?.(t)}function cP(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function vp(t,e){return Object.is(t,e)}function $u(t,e){let n=Object.create(uP);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(fp(n),da(n),n.value===Vu)throw n.error;return n.value};return r[mt]=n,yp(n),r}var up=Symbol("UNSET"),lp=Symbol("COMPUTING"),Vu=Symbol("ERRORED"),uP=Ie(V({},la),{value:up,dirty:!0,error:null,equal:vp,kind:"computed",producerMustRecompute(t){return t.value===up||t.value===lp},producerRecomputeValue(t){if(t.value===lp)throw new Error("");let e=t.value;t.value=lp;let n=ha(t),r,i=!1;try{r=t.computation(),J(null),i=e!==up&&e!==Vu&&r!==Vu&&t.equal(e,r)}catch(o){r=Vu,t.error=o}finally{Uu(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function lP(){throw new Error}var Aw=lP;function Rw(t){Aw(t)}function _p(t){Aw=t}var dP=null;function Ep(t,e){let n=Object.create(Hu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>Nw(n);return r[mt]=n,yp(n),[r,s=>pa(n,s),s=>Mw(n,s)]}function Nw(t){return da(t),t.value}function pa(t,e){gp()||Rw(t),t.equal(t.value,e)||(t.value=e,hP(t))}function Mw(t,e){gp()||Rw(t),pa(t,e(t.value))}var Hu=Ie(V({},la),{equal:vp,value:void 0,kind:"signal"});function hP(t){t.version++,Dw(),pp(t),dP?.(t)}function Ip(t){let e=J(null);try{return t()}finally{J(e)}}function Z(t){return typeof t=="function"}function wo(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var zu=wo(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function fi(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ze=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(o){e=o instanceof zu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Pw(o)}catch(s){e=e??[],s instanceof zu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new zu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Pw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&fi(n,e)}remove(e){let{_finalizers:n}=this;n&&fi(n,e),e instanceof t&&e._removeParent(this)}};ze.EMPTY=(()=>{let t=new ze;return t.closed=!0,t})();var wp=ze.EMPTY;function qu(t){return t instanceof ze||t&&"closed"in t&&Z(t.remove)&&Z(t.add)&&Z(t.unsubscribe)}function Pw(t){Z(t)?t():t.unsubscribe()}var Xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var To={setTimeout(t,e,...n){let{delegate:r}=To;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=To;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Gu(t){To.setTimeout(()=>{let{onUnhandledError:e}=Xt;if(e)e(t);else throw t})}function ga(){}var kw=Tp("C",void 0,void 0);function Ow(t){return Tp("E",void 0,t)}function xw(t){return Tp("N",t,void 0)}function Tp(t,e,n){return{kind:t,value:e,error:n}}var pi=null;function Do(t){if(Xt.useDeprecatedSynchronousErrorHandling){let e=!pi;if(e&&(pi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=pi;if(pi=null,n)throw r}}else t()}function Lw(t){Xt.useDeprecatedSynchronousErrorHandling&&pi&&(pi.errorThrown=!0,pi.error=t)}var gi=class extends ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qu(e)&&e.add(this)):this.destination=gP}static create(e,n,r){return new _r(e,n,r)}next(e){this.isStopped?bp(xw(e),this):this._next(e)}error(e){this.isStopped?bp(Ow(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?bp(kw,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},fP=Function.prototype.bind;function Dp(t,e){return fP.call(t,e)}var Cp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Wu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Wu(r)}else Wu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Wu(n)}}},_r=class extends gi{constructor(e,n,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Xt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Dp(e.next,o),error:e.error&&Dp(e.error,o),complete:e.complete&&Dp(e.complete,o)}):i=e}this.destination=new Cp(i)}};function Wu(t){Xt.useDeprecatedSynchronousErrorHandling?Lw(t):Gu(t)}function pP(t){throw t}function bp(t,e){let{onStoppedNotification:n}=Xt;n&&To.setTimeout(()=>n(t,e))}var gP={closed:!0,next:ga,error:pP,complete:ga};var bo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function en(t){return t}function Sp(...t){return Ap(t)}function Ap(t){return t.length===0?en:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=yP(n)?n:new _r(n,r,i);return Do(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Fw(r),new r((i,o)=>{let s=new _r({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[bo](){return this}pipe(...n){return Ap(n)(this)}toPromise(n){return n=Fw(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function Fw(t){var e;return(e=t??Xt.Promise)!==null&&e!==void 0?e:Promise}function mP(t){return t&&Z(t.next)&&Z(t.error)&&Z(t.complete)}function yP(t){return t&&t instanceof gi||mP(t)&&qu(t)}function vP(t){return Z(t?.lift)}function fe(t){return e=>{if(vP(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function pe(t,e,n,r,i){return new Rp(t,e,n,r,i)}var Rp=class extends gi{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Vw=wo(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class t extends te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ku(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Vw}next(n){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Do(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?wp:(this.currentObservers=null,o.push(n),new ze(()=>{this.currentObservers=null,fi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new te;return n.source=this,n}}return t.create=(e,n)=>new Ku(e,n),t})(),Ku=class extends Xe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:wp}};var et=class extends Xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Np={now(){return(Np.delegate||Date).now()},delegate:void 0};var Qu=class extends ze{constructor(e,n){super()}schedule(e,n=0){return this}};var ma={setInterval(t,e,...n){let{delegate:r}=ma;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ma;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Co=class extends Qu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ma.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ma.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,fi(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var So=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};So.now=Np.now;var Ao=class extends So{constructor(e,n=So.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Mp=new Ao(Co);var Yu=class extends Co{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ju=class extends Ao{};var Pp=new Ju(Yu);var Ct=new te(t=>t.complete());function jw(t){return t&&Z(t.schedule)}function Uw(t){return t[t.length-1]}function Zu(t){return Z(Uw(t))?t.pop():void 0}function Er(t){return jw(Uw(t))?t.pop():void 0}function kp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function $w(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function Bw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mi(t){return this instanceof mi?(this.v=t,this):new mi(t)}function Hw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(C){return Promise.resolve(C).then(y,p)}}function a(y,C){r[y]&&(i[y]=function(R){return new Promise(function(S,M){o.push([y,R,S,M])>1||u(y,R)})},C&&(i[y]=C(i[y])))}function u(y,C){try{l(r[y](C))}catch(R){m(o[0][3],R)}}function l(y){y.value instanceof mi?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,C){y(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function zw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Bw=="function"?Bw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Xu=t=>t&&typeof t.length=="number"&&typeof t!="function";function el(t){return Z(t?.then)}function tl(t){return Z(t[bo])}function nl(t){return Symbol.asyncIterator&&Z(t?.[Symbol.asyncIterator])}function rl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function _P(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var il=_P();function ol(t){return Z(t?.[il])}function sl(t){return Hw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield mi(n.read());if(i)return yield mi(void 0);yield yield mi(r)}}finally{n.releaseLock()}})}function al(t){return Z(t?.getReader)}function xe(t){if(t instanceof te)return t;if(t!=null){if(tl(t))return EP(t);if(Xu(t))return IP(t);if(el(t))return wP(t);if(nl(t))return qw(t);if(ol(t))return TP(t);if(al(t))return DP(t)}throw rl(t)}function EP(t){return new te(e=>{let n=t[bo]();if(Z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function IP(t){return new te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function wP(t){return new te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Gu)})}function TP(t){return new te(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function qw(t){return new te(e=>{bP(t,e).catch(n=>e.error(n))})}function DP(t){return qw(sl(t))}function bP(t,e){var n,r,i,o;return $w(this,void 0,void 0,function*(){try{for(n=zw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function St(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Ir(t,e=0){return fe((n,r)=>{n.subscribe(pe(r,i=>St(r,t,()=>r.next(i),e),()=>St(r,t,()=>r.complete(),e),i=>St(r,t,()=>r.error(i),e)))})}function wr(t,e=0){return fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function Gw(t,e){return xe(t).pipe(wr(e),Ir(e))}function Ww(t,e){return xe(t).pipe(wr(e),Ir(e))}function Kw(t,e){return new te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Qw(t,e){return new te(n=>{let r;return St(n,e,()=>{r=t[il](),St(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function cl(t,e){if(!t)throw new Error("Iterable cannot be null");return new te(n=>{St(n,e,()=>{let r=t[Symbol.asyncIterator]();St(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Yw(t,e){return cl(sl(t),e)}function Jw(t,e){if(t!=null){if(tl(t))return Gw(t,e);if(Xu(t))return Kw(t,e);if(el(t))return Ww(t,e);if(nl(t))return cl(t,e);if(ol(t))return Qw(t,e);if(al(t))return Yw(t,e)}throw rl(t)}function qe(t,e){return e?Jw(t,e):xe(t)}function re(...t){let e=Er(t);return qe(t,e)}function Op(t,e){let n=Z(t)?t:()=>t,r=i=>i.error(n());return new te(e?i=>e.schedule(r,0,i):r)}function ul(t){return!!t&&(t instanceof te||Z(t.lift)&&Z(t.subscribe))}var Bn=wo(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function CP(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=new _r({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new Bn)}});t.subscribe(o)})}function ye(t,e){return fe((n,r)=>{let i=0;n.subscribe(pe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:SP}=Array;function AP(t,e){return SP(e)?t(...e):t(e)}function ll(t){return ye(e=>AP(t,e))}var{isArray:RP}=Array,{getPrototypeOf:NP,prototype:MP,keys:PP}=Object;function dl(t){if(t.length===1){let e=t[0];if(RP(e))return{args:e,keys:null};if(kP(e)){let n=PP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function kP(t){return t&&typeof t=="object"&&NP(t)===MP}function hl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function xp(...t){let e=Er(t),n=Zu(t),{args:r,keys:i}=dl(t);if(r.length===0)return qe([],e);let o=new te(OP(r,e,i?s=>hl(i,s):en));return n?o.pipe(ll(n)):o}function OP(t,e,n=en){return r=>{Zw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Zw(e,()=>{let l=qe(t[u],e),h=!1;l.subscribe(pe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Zw(t,e,n){t?St(n,t,e):e()}function Xw(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?C(R):u.push(R),C=R=>{o&&e.next(R),l++;let S=!1;xe(n(R,h++)).subscribe(pe(e,M=>{i?.(M),o?y(M):e.next(M)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;u.length&&l<r;){let M=u.shift();s?St(e,s,()=>C(M)):C(M)}m()}catch(M){e.error(M)}}))};return t.subscribe(pe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function yt(t,e,n=1/0){return Z(e)?yt((r,i)=>ye((o,s)=>e(r,o,i,s))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),fe((r,i)=>Xw(r,i,t,n)))}function eT(t=1/0){return yt(en,t)}function tT(){return eT(1)}function Ro(...t){return tT()(qe(t,Er(t)))}function ya(t){return new te(e=>{xe(t()).subscribe(e)})}function xP(...t){let e=Zu(t),{args:n,keys:r}=dl(t),i=new te(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;xe(n[h]).subscribe(pe(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?hl(r,a):a),o.complete())}))}});return e?i.pipe(ll(e)):i}function $t(t,e){return fe((n,r)=>{let i=0;n.subscribe(pe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function va(t){return fe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(pe(n,void 0,void 0,s=>{o=xe(t(s,va(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function No(t,e){return Z(e)?yt(t,e,1):yt(t,1)}function Lp(t){return fe((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function $n(t){return t<=0?()=>Ct:fe((e,n)=>{let r=0;e.subscribe(pe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function nT(t=LP){return fe((e,n)=>{let r=!1;e.subscribe(pe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function LP(){return new Bn}function _a(t){return fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Hn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?$t((i,o)=>t(i,o,r)):en,$n(1),n?Lp(e):nT(()=>new Bn))}function fl(t){return t<=0?()=>Ct:fe((e,n)=>{let r=[];e.subscribe(pe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Fp(...t){let e=Er(t);return fe((n,r)=>{(e?Ro(t,n,e):Ro(t,n)).subscribe(r)})}function Ht(t,e){return fe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(pe(r,u=>{i?.unsubscribe();let l=0,h=o++;xe(t(u,h)).subscribe(i=pe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Ea(t){return fe((e,n)=>{xe(t).subscribe(pe(n,()=>n.complete(),ga)),!n.closed&&e.subscribe(n)})}function vt(t,e,n){let r=Z(t)||e||n?{next:t,error:e,complete:n}:t;return r?fe((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(pe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):en}var Vp;function pl(){return Vp}function mn(t){let e=Vp;return Vp=t,e}var rT=Symbol("NotFound");function Mo(t){return t===rT||t?.name==="\u0275NotFound"}var ko=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},eg=new ko("21.0.6");var _l="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",x=class extends Error{code;constructor(e,n){super(wi(e,n)),this.code=e}};function jP(t){return`NG0${Math.abs(t)}`}function wi(t,e){return`${jP(t)}${e?": "+e:""}`}var Wn=globalThis;function ge(t){for(let e in t)if(t[e]===ge)return e;throw Error("")}function cT(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function qn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(qn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function tg(t,e){return t?e?`${t} ${e}`:t:e||""}var UP=ge({__forward_ref__:ge});function El(t){return t.__forward_ref__=El,t.toString=function(){return qn(this())},t}function tt(t){return ng(t)?t():t}function ng(t){return typeof t=="function"&&t.hasOwnProperty(UP)&&t.__forward_ref__===El}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function br(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ca(t){return BP(t,Il)}function rg(t){return Ca(t)!==null}function BP(t,e){return t.hasOwnProperty(e)&&t[e]||null}function $P(t){let e=t?.[Il]??null;return e||null}function Up(t){return t&&t.hasOwnProperty(ml)?t[ml]:null}var Il=ge({\u0275prov:ge}),ml=ge({\u0275inj:ge}),j=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ig(t){return t&&!!t.\u0275providers}var og=ge({\u0275cmp:ge}),sg=ge({\u0275dir:ge}),ag=ge({\u0275pipe:ge}),cg=ge({\u0275mod:ge}),wa=ge({\u0275fac:ge}),Ti=ge({__NG_ELEMENT_ID__:ge}),iT=ge({__NG_ENV_ID__:ge});function ug(t){return wl(t,"@NgModule"),t[cg]||null}function Cr(t){return wl(t,"@Component"),t[og]||null}function lg(t){return wl(t,"@Directive"),t[sg]||null}function uT(t){return wl(t,"@Pipe"),t[ag]||null}function wl(t,e){if(t==null)throw new x(-919,!1)}function Sa(t){return typeof t=="string"?t:t==null?"":String(t)}function lT(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Sa(t)}var dT=ge({ngErrorCode:ge}),HP=ge({ngErrorMessage:ge}),zP=ge({ngTokenPath:ge});function dg(t,e){return hT("",-200,e)}function Tl(t,e){throw new x(-201,!1)}function hT(t,e,n){let r=new x(e,t);return r[dT]=e,r[HP]=t,n&&(r[zP]=n),r}function qP(t){return t[dT]}var Bp;function fT(){return Bp}function _t(t){let e=Bp;return Bp=t,e}function hg(t,e,n){let r=Ca(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Tl(t,"")}var GP={},yi=GP,$p="__NG_DI_FLAG__",Hp=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=vi(n)||0;try{return this.injector.get(e,r&8?null:yi,r)}catch(i){if(Mo(i))return i;throw i}}};function WP(t,e=0){let n=pl();if(n===void 0)throw new x(-203,!1);if(n===null)return hg(t,void 0,e);{let r=KP(e),i=n.retrieve(t,r);if(Mo(i)){if(r.optional)return null;throw i}return i}}function q(t,e=0){return(fT()||WP)(tt(t),e)}function k(t,e){return q(t,vi(e))}function vi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function KP(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function zp(t){let e=[];for(let n=0;n<t.length;n++){let r=tt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new x(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=QP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(q(i,o))}else e.push(q(r))}return e}function pT(t,e){return t[$p]=e,t.prototype[$p]=e,t}function QP(t){return t[$p]}function Tr(t,e){let n=t.hasOwnProperty(wa);return n?t[wa]:null}function Dl(t,e){t.forEach(n=>Array.isArray(n)?Dl(n,e):e(n))}function fg(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Aa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function gT(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function mT(t,e,n){let r=Oo(t,e);return r>=0?t[r|1]=n:(r=~r,gT(t,r,e,n)),r}function bl(t,e){let n=Oo(t,e);if(n>=0)return t[n|1]}function Oo(t,e){return YP(t,e,1)}function YP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Sr={},kt=[],Di=new j(""),pg=new j("",-1),gg=new j(""),Ta=class{get(e,n=yi){if(n===yi){let i=hT("",-201);throw i.name="\u0275NotFound",i}return n}};function At(t){return{\u0275providers:t}}function yT(t){return At([{provide:Di,multi:!0,useValue:t}])}function vT(...t){return{\u0275providers:mg(!0,t),\u0275fromNgModule:!0}}function mg(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Dl(e,s=>{let a=s;yl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&_T(i,o),n}function _T(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];yg(i,o=>{e(o,r)})}}function yl(t,e,n,r){if(t=tt(t),!t)return!1;let i=null,o=Up(t),s=!o&&Cr(t);if(!o&&!s){let u=t.ngModule;if(o=Up(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)yl(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Dl(o.imports,h=>{yl(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&_T(l,e)}if(!a){let l=Tr(i)||(()=>new i);e({provide:i,useFactory:l,deps:kt},i),e({provide:gg,useValue:i,multi:!0},i),e({provide:Di,useValue:()=>q(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;yg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function yg(t,e){for(let n of t)ig(n)&&(n=n.\u0275providers),Array.isArray(n)?yg(n,e):e(n)}var JP=ge({provide:String,useValue:ge});function ET(t){return t!==null&&typeof t=="object"&&JP in t}function ZP(t){return!!(t&&t.useExisting)}function XP(t){return!!(t&&t.useFactory)}function _i(t){return typeof t=="function"}function IT(t){return!!t.useClass}var Ra=new j(""),gl={},oT={},jp;function Na(){return jp===void 0&&(jp=new Ta),jp}var Se=class{},Ei=class extends Se{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Gp(e,s=>this.processProvider(s)),this.records.set(pg,Po(void 0,this)),i.has("environment")&&this.records.set(Se,Po(void 0,this));let o=this.records.get(Ra);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gg,kt,{self:!0}))}retrieve(e,n){let r=vi(n)||0;try{return this.get(e,yi,r)}catch(i){if(Mo(i))return i;throw i}}destroy(){Ia(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return Ia(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ia(this);let n=mn(this),r=_t(void 0),i;try{return e()}finally{mn(n),_t(r)}}get(e,n=yi,r){if(Ia(this),e.hasOwnProperty(iT))return e[iT](this);let i=vi(r),o,s=mn(this),a=_t(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=ik(e)&&Ca(e);h&&this.injectableDefInScope(h)?l=Po(qp(e),gl):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Na():this.parent;return n=i&8&&n===yi?null:n,u.get(e,n)}catch(u){let l=qP(u);throw l===-200||l===-201?new x(l,null):u}finally{_t(a),mn(s)}}resolveInjectorInitializers(){let e=J(null),n=mn(this),r=_t(void 0),i;try{let o=this.get(Di,kt,{self:!0});for(let s of o)s()}finally{mn(n),_t(r),J(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(qn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=tt(e);let n=_i(e)?e:tt(e&&e.provide),r=tk(e);if(!_i(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Po(void 0,gl,!0),i.factory=()=>zp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=J(null);try{if(n.value===oT)throw dg(qn(e));return n.value===gl&&(n.value=oT,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&rk(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=tt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function qp(t){let e=Ca(t),n=e!==null?e.factory:Tr(t);if(n!==null)return n;if(t instanceof j)throw new x(204,!1);if(t instanceof Function)return ek(t);throw new x(204,!1)}function ek(t){if(t.length>0)throw new x(204,!1);let n=$P(t);return n!==null?()=>n.factory(t):()=>new t}function tk(t){if(ET(t))return Po(void 0,t.useValue);{let e=vg(t);return Po(e,gl)}}function vg(t,e,n){let r;if(_i(t)){let i=tt(t);return Tr(i)||qp(i)}else if(ET(t))r=()=>tt(t.useValue);else if(XP(t))r=()=>t.useFactory(...zp(t.deps||[]));else if(ZP(t))r=(i,o)=>q(tt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=tt(t&&(t.useClass||t.provide));if(nk(t))r=()=>new i(...zp(t.deps));else return Tr(i)||qp(i)}return r}function Ia(t){if(t.destroyed)throw new x(205,!1)}function Po(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function nk(t){return!!t.deps}function rk(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function ik(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Gp(t,e){for(let n of t)Array.isArray(n)?Gp(n,e):n&&ig(n)?Gp(n.\u0275providers,e):e(n)}function ke(t,e){let n;t instanceof Ei?(Ia(t),n=t):n=new Hp(t);let r,i=mn(n),o=_t(void 0);try{return e()}finally{mn(i),_t(o)}}function wT(){return fT()!==void 0||pl()!=null}var tn=0,K=1,X=2,nt=3,zt=4,qt=5,Ma=6,xo=7,rt=8,Ar=9,yn=10,Re=11,Lo=12,_g=13,bi=14,Gt=15,Ci=16,Si=17,Ai=18,Pa=19,Eg=20,zn=21,Cl=22,ka=23,Ot=24,Sl=25,Oa=26,We=27,TT=1;var Rr=7,xa=8,La=9,It=10;function vn(t){return Array.isArray(t)&&typeof t[TT]=="object"}function nn(t){return Array.isArray(t)&&t[TT]===!0}function Ig(t){return(t.flags&4)!==0}function Nr(t){return t.componentOffset>-1}function Fa(t){return(t.flags&1)===1}function _n(t){return!!t.template}function Fo(t){return(t[X]&512)!==0}function Ri(t){return(t[X]&256)===256}var DT="svg",bT="math";function Wt(t){for(;Array.isArray(t);)t=t[tn];return t}function wg(t,e){return Wt(e[t])}function rn(t,e){return Wt(e[t.index])}function Va(t,e){return t.data[e]}function CT(t,e){return t[e]}function Tg(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Kt(t,e){let n=e[t];return vn(n)?n:n[tn]}function Al(t){return(t[X]&128)===128}function ST(t){return nn(t[nt])}function Mr(t,e){return e==null?null:t[e]}function Dg(t){t[Si]=0}function bg(t){t[X]&1024||(t[X]|=1024,Al(t)&&Ua(t))}function AT(t,e){for(;t>0;)e=e[bi],t--;return e}function ja(t){return!!(t[X]&9216||t[Ot]?.dirty)}function Rl(t){t[yn].changeDetectionScheduler?.notify(8),t[X]&64&&(t[X]|=1024),ja(t)&&Ua(t)}function Ua(t){t[yn].changeDetectionScheduler?.notify(0);let e=Dr(t);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!Al(e)));)e=Dr(e)}function Cg(t,e){if(Ri(t))throw new x(911,!1);t[zn]===null&&(t[zn]=[]),t[zn].push(e)}function RT(t,e){if(t[zn]===null)return;let n=t[zn].indexOf(e);n!==-1&&t[zn].splice(n,1)}function Dr(t){let e=t[nt];return nn(e)?e[nt]:e}function NT(t){return t[xo]??=[]}function MT(t){return t.cleanup??=[]}var ie={lFrame:YT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Wp=!1;function PT(){return ie.lFrame.elementDepthCount}function kT(){ie.lFrame.elementDepthCount++}function OT(){ie.lFrame.elementDepthCount--}function Sg(){return ie.bindingsEnabled}function xT(){return ie.skipHydrationRootTNode!==null}function LT(t){return ie.skipHydrationRootTNode===t}function FT(){ie.skipHydrationRootTNode=null}function le(){return ie.lFrame.lView}function ut(){return ie.lFrame.tView}function VT(t){return ie.lFrame.contextLView=t,t[rt]}function jT(t){return ie.lFrame.contextLView=null,t}function Rt(){let t=Ag();for(;t!==null&&t.type===64;)t=t.parent;return t}function Ag(){return ie.lFrame.currentTNode}function UT(){let t=ie.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Vo(t,e){let n=ie.lFrame;n.currentTNode=t,n.isParent=e}function Rg(){return ie.lFrame.isParent}function BT(){ie.lFrame.isParent=!1}function Ng(){return Wp}function Mg(t){let e=Wp;return Wp=t,e}function $T(){let t=ie.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function HT(t){return ie.lFrame.bindingIndex=t}function jo(){return ie.lFrame.bindingIndex++}function zT(t){let e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function qT(){return ie.lFrame.inI18n}function GT(t,e){let n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,Nl(e)}function WT(){return ie.lFrame.currentDirectiveIndex}function Nl(t){ie.lFrame.currentDirectiveIndex=t}function KT(t){let e=ie.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Pg(t){ie.lFrame.currentQueryIndex=t}function ok(t){let e=t[K];return e.type===2?e.declTNode:e.type===1?t[qt]:null}function kg(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=ok(o),i===null||(o=o[bi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ie.lFrame=QT();return r.currentTNode=e,r.lView=t,!0}function Ml(t){let e=QT(),n=t[K];ie.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function QT(){let t=ie.lFrame,e=t===null?null:t.child;return e===null?YT(t):e}function YT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function JT(){let t=ie.lFrame;return ie.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Og=JT;function Pl(){let t=JT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ZT(t){return(ie.lFrame.contextLView=AT(t,ie.lFrame.contextLView))[rt]}function Ni(){return ie.lFrame.selectedIndex}function Pr(t){ie.lFrame.selectedIndex=t}function kl(){let t=ie.lFrame;return Va(t.tView,t.selectedIndex)}function XT(){return ie.lFrame.currentNamespace}var eD=!0;function Ol(){return eD}function xl(t){eD=t}function Kp(t,e=null,n=null,r){let i=xg(t,e,n,r);return i.resolveInjectorInitializers(),i}function xg(t,e=null,n=null,r,i=new Set){let o=[n||kt,vT(t)];return r=r||(typeof t=="object"?void 0:qn(t)),new Ei(o,e||Na(),r||null,i)}var Ge=class t{static THROW_IF_NOT_FOUND=yi;static NULL=new Ta;static create(e,n){if(Array.isArray(e))return Kp({name:""},n,e,"");{let r=e.name??"";return Kp({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:t,providedIn:"any",factory:()=>q(pg)});static __NG_ELEMENT_ID__=-1},Le=new j(""),Kn=(()=>{class t{static __NG_ELEMENT_ID__=sk;static __NG_ENV_ID__=n=>n}return t})(),Qp=class extends Kn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Ri(this._lView)}onDestroy(e){let n=this._lView;return Cg(n,e),()=>RT(n,e)}};function sk(){return new Qp(le())}var tD=!1,Qn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new et(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new te(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),Yp=class extends Xe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,wT()&&(this.destroyRef=k(Kn,{optional:!0})??void 0,this.pendingTasks=k(Qn,{optional:!0})??void 0)}emit(e){let n=J(null);try{super.next(e)}finally{J(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof ze&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Et=Yp;function vl(...t){}function Lg(t){let e,n;function r(){t=vl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Fg(t){return queueMicrotask(()=>t()),()=>{t=vl}}var Vg="isAngularZone",Da=Vg+"_ID",ak=0,De=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Et(!1);onMicrotaskEmpty=new Et(!1);onStable=new Et(!1);onError=new Et(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=tD}=e;if(typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,lk(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Vg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new x(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ck,vl,vl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},ck={};function jg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function uk(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Lg(()=>{t.callbackScheduled=!1,Jp(t),t.isCheckStableRunning=!0,jg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Jp(t)}function lk(t){let e=()=>{uk(t)},n=ak++;t._inner=t._inner.fork({name:"angular",properties:{[Vg]:!0,[Da]:n,[Da+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(dk(u))return r.invokeTask(o,s,a,u);try{return sT(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),aT(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return sT(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!hk(u)&&e(),aT(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Jp(t),jg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Jp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function sT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function aT(t){t._nesting--,jg(t)}var ba=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Et;onMicrotaskEmpty=new Et;onStable=new Et;onError=new Et;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function dk(t){return nD(t,"__ignore_ng_zone__")}function hk(t){return nD(t,"__scheduler_tick__")}function nD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Gn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},xt=new j("",{factory:()=>{let t=k(De),e=k(Se),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(Gn),n.handleError(r))})}}}),rD={provide:Di,useValue:()=>{let t=k(Gn,{optional:!0})},multi:!0},fk=new j("",{factory:()=>{let t=k(Le).defaultView;if(!t)return;let e=k(xt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),k(Kn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function pk(){return At([yT(()=>void k(fk))])}function kr(t,e){let[n,r,i]=Ep(t,e?.equal),o=n,s=o[mt];return o.set=r,o.update=i,o.asReadonly=iD.bind(o),o}function iD(){let t=this[mt];if(t.readonlyFn===void 0){let e=()=>this();e[mt]=t,t.readonlyFn=e}return t.readonlyFn}var Ii=class{},Ba=new j("",{factory:()=>!0});var Ug=new j(""),Or=(()=>{class t{internalPendingTasks=k(Qn);scheduler=k(Ii);errorHandler=k(xt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),Bg=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>new Zp})}return t})(),Zp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Xp=class{[mt];constructor(e){this[mt]=e}destroy(){this[mt].destroy()}};function Qt(t){return Ip(t)}function Go(t){return{toString:t}.toString()}var Ll="__parameters__";function Tk(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Dk(t,e,n){return Go(()=>{let r=Tk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Ll)?u[Ll]:Object.defineProperty(u,Ll,{value:[]})[Ll];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Lt=pT(Dk("Optional"),8);function bk(t){return typeof t=="function"}function xD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var $l=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Wo=(()=>{let t=()=>LD;return t.ngInherit=!0,t})();function LD(t){return t.type.prototype.ngOnChanges&&(t.setInput=Sk),Ck}function Ck(){let t=VD(this),e=t?.current;if(e){let n=t.previous;if(n===Sr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Sk(t,e,n,r,i){let o=this.declaredInputs[r],s=VD(t)||Ak(t,{previous:Sr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new $l(l&&l.currentValue,n,u===Sr),xD(t,e,i,n)}var FD="__ngSimpleChanges__";function VD(t){return t[FD]||null}function Ak(t,e){return t[FD]=e}var oD=[];var ve=function(t,e=null,n){for(let r=0;r<oD.length;r++){let i=oD[r];i(t,e,n)}},de=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(de||{});function Rk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=LD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function jD(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function jl(t,e,n){UD(t,e,3,n)}function Ul(t,e,n,r){(t[X]&3)===n&&UD(t,e,n,r)}function $g(t,e){let n=t[X];(n&3)===e&&(n&=16383,n+=1,t[X]=n)}function UD(t,e,n,r){let i=r!==void 0?t[Si]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Si]+=65536),(a<o||o==-1)&&(Nk(t,n,e,u),t[Si]=(t[Si]&4294901760)+u+2),u++}function sD(t,e){ve(de.LifecycleHookStart,t,e);let n=J(null);try{e.call(t)}finally{J(n),ve(de.LifecycleHookEnd,t,e)}}function Nk(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[X]>>14<t[Si]>>16&&(t[X]&3)===e&&(t[X]+=16384,sD(a,o)):sD(a,o)}var Bo=-1,Pi=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Mk(t){return(t.flags&8)!==0}function Pk(t){return(t.flags&16)!==0}function kk(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];Ok(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function BD(t){return t===3||t===4||t===6}function Ok(t){return t.charCodeAt(0)===64}function qa(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?aD(t,n,i,null,e[++r]):aD(t,n,i,null,null))}}return t}function aD(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function $D(t){return t!==Bo}function Hl(t){return t&32767}function xk(t){return t>>16}function zl(t,e){let n=xk(t),r=e;for(;n>0;)r=r[bi],n--;return r}var Xg=!0;function ql(t){let e=Xg;return Xg=t,e}var Lk=256,HD=Lk-1,zD=5,Fk=0,En={};function Vk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ti)&&(r=n[Ti]),r==null&&(r=n[Ti]=Fk++);let i=r&HD,o=1<<i;e.data[t+(i>>zD)]|=o}function Gl(t,e){let n=qD(t,e);if(n!==-1)return n;let r=e[K];r.firstCreatePass&&(t.injectorIndex=e.length,Hg(r.data,t),Hg(e,null),Hg(r.blueprint,null));let i=pm(t,e),o=t.injectorIndex;if($D(i)){let s=Hl(i),a=zl(i,e),u=a[K].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Hg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function pm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=YD(i),r===null)return Bo;if(n++,i=i[bi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Bo}function em(t,e,n){Vk(t,e,n)}function jk(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(BD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function GD(t,e,n){if(n&8||t!==void 0)return t;Tl(e,"NodeInjector")}function WD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Ar],o=_t(void 0);try{return i?i.get(e,r,n&8):hg(e,r,n&8)}finally{_t(o)}}return GD(r,e,n)}function KD(t,e,n,r=0,i){if(t!==null){if(e[X]&2048&&!(r&2)){let s=zk(t,e,n,r,En);if(s!==En)return s}let o=QD(t,e,n,r,En);if(o!==En)return o}return WD(e,n,r,i)}function QD(t,e,n,r,i){let o=$k(n);if(typeof o=="function"){if(!kg(e,t,r))return r&1?GD(i,n,r):WD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Tl(n);else return s}finally{Og()}}else if(typeof o=="number"){let s=null,a=qD(t,e),u=Bo,l=r&1?e[Gt][qt]:null;for((a===-1||r&4)&&(u=a===-1?pm(t,e):e[a+8],u===Bo||!uD(r,!1)?a=-1:(s=e[K],a=Hl(u),e=zl(u,e)));a!==-1;){let h=e[K];if(cD(o,a,h.data)){let p=Uk(a,e,n,s,r,l);if(p!==En)return p}u=e[a+8],u!==Bo&&uD(r,e[K].data[a+8]===l)&&cD(o,a,e)?(s=h,a=Hl(u),e=zl(u,e)):a=-1}}return i}function Uk(t,e,n,r,i,o){let s=e[K],a=s.data[t+8],u=r==null?Nr(a)&&Xg:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Bk(a,s,n,u,l);return h!==null?Wl(e,s,h,a,i):En}function Bk(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let C=s[y];if(y<u&&n===C||y>=u&&C.type===n)return y}if(i){let y=s[u];if(y&&_n(y)&&y.type===n)return u}return null}function Wl(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof Pi){let a=o;if(a.resolving){let y=lT(s[n]);throw dg(y)}let u=ql(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?_t(a.injectImpl):null,m=kg(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Rk(n,s[n],e)}finally{p!==null&&_t(p),ql(u),a.resolving=!1,Og()}}return o}function $k(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ti)?t[Ti]:void 0;return typeof e=="number"?e>=0?e&HD:Hk:e}function cD(t,e,n){let r=1<<t;return!!(n[e+(t>>zD)]&r)}function uD(t,e){return!(t&2)&&!(t&1&&e)}var Mi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return KD(this._tNode,this._lView,e,vi(r),n)}};function Hk(){return new Mi(Rt(),le())}function Qa(t){return Go(()=>{let e=t.prototype.constructor,n=e[wa]||tm(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[wa]||tm(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function tm(t){return ng(t)?()=>{let e=tm(tt(t));return e&&e()}:Tr(t)}function zk(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[X]&2048&&!Fo(s);){let a=QD(o,s,n,r|2,En);if(a!==En)return a;let u=o.parent;if(!u){let l=s[Eg];if(l){let h=l.get(n,En,r);if(h!==En)return h}u=YD(s),s=s[bi]}o=u}return i}function YD(t){let e=t[K],n=e.type;return n===2?e.declTNode:n===1?t[qt]:null}function Ya(t){return jk(Rt(),t)}function qk(){return rd(Rt(),le())}function rd(t,e){return new Ja(rn(t,e))}var Ja=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=qk}return t})();function JD(t){return(t.flags&128)===128}var gm=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(gm||{}),ZD=new Map,Gk=0;function Wk(){return Gk++}function Kk(t){ZD.set(t[Pa],t)}function nm(t){ZD.delete(t[Pa])}var lD="__ngContext__";function $o(t,e){vn(e)?(t[lD]=e[Pa],Kk(e)):t[lD]=e}function XD(t){return tb(t[Lo])}function eb(t){return tb(t[zt])}function tb(t){for(;t!==null&&!nn(t);)t=t[zt];return t}var Qk;function mm(t){Qk=t}var id=new j("",{factory:()=>Yk}),Yk="ng";var od=new j(""),Li=new j("",{providedIn:"platform",factory:()=>"unknown"});var sd=new j("",{factory:()=>k(Le).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var nb=!1,rb=new j("",{factory:()=>nb});var Jk=(t,e,n,r)=>{};function Zk(t,e,n,r){Jk(t,e,n,r)}function ym(t){return(t.flags&32)===32}var Xk=()=>null;function ib(t,e,n=!1){return Xk(t,e,n)}function ob(t,e){let n=t.contentQueries;if(n!==null){let r=J(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Pg(o),a.contentQueries(2,e[s],s)}}}finally{J(r)}}}function rm(t,e,n){Pg(0);let r=J(null);try{e(t,n)}finally{J(r)}}function sb(t,e,n){if(Ig(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{J(r)}}}var sn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(sn||{});var Fl;function eO(){if(Fl===void 0&&(Fl=null,Wn.trustedTypes))try{Fl=Wn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Fl}function dD(t){return eO()?.createScriptURL(t)||t}var Kl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${_l})`}};function ad(t){return t instanceof Kl?t.changingThisBreaksApplicationSecurity:t}function vm(t,e){let n=ab(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${_l})`)}return n===e}function ab(t){return t instanceof Kl&&t.getTypeName()||null}var tO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function cb(t){return t=String(t),t.match(tO)?t:"unsafe:"+t}function nO(t,e){return t.createText(e)}function rO(t,e,n){t.setValue(e,n)}function ub(t,e,n){return t.createElement(e,n)}function Ql(t,e,n,r,i){t.insertBefore(e,n,r,i)}function lb(t,e,n){t.appendChild(e,n)}function hD(t,e,n,r,i){r!==null?Ql(t,e,n,r,i):lb(t,e,n)}function iO(t,e,n,r){t.removeChild(null,e,n,r)}function oO(t,e,n){t.setAttribute(e,"style",n)}function sO(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function db(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&kk(t,e,r),i!==null&&sO(t,e,i),o!==null&&oO(t,e,o)}var cd=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(cd||{});function hb(t){let e=pb();return e?e.sanitize(cd.URL,t)||"":vm(t,"URL")?ad(t):cb(Sa(t))}function fb(t){let e=pb();if(e)return dD(e.sanitize(cd.RESOURCE_URL,t)||"");if(vm(t,"ResourceURL"))return dD(ad(t));throw new x(904,!1)}function aO(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?fb:hb}function _m(t,e,n){return aO(e,n)(t)}function pb(){let t=le();return t&&t[yn].sanitizer}function gb(t){return t instanceof Function?t():t}function cO(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var mb="ng-template";function uO(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&cO(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Em(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Em(t){return t.type===4&&t.value!==mb}function lO(t,e,n){let r=t.type===4&&!n?mb:t.value;return e===r}function dO(t,e,n){let r=4,i=t.attrs,o=i!==null?pO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!on(r)&&!on(u))return!1;if(s&&on(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!lO(t,u,n)||u===""&&e.length===1){if(on(r))return!1;s=!0}}else if(r&8){if(i===null||!uO(t,i,u,n)){if(on(r))return!1;s=!0}}else{let l=e[++a],h=hO(u,i,Em(t),n);if(h===-1){if(on(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(on(r))return!1;s=!0}}}}return on(r)||s}function on(t){return(t&1)===0}function hO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return gO(e,t)}function fO(t,e,n=!1){for(let r=0;r<e.length;r++)if(dO(t,e[r],n))return!0;return!1}function pO(t){for(let e=0;e<t.length;e++){let n=t[e];if(BD(n))return e}return t.length}function gO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function fD(t,e){return t?":not("+e.trim()+")":e}function mO(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!on(s)&&(e+=fD(o,i),i=""),r=s,o=o||!on(r);n++}return i!==""&&(e+=fD(o,i)),e}function yO(t){return t.map(mO).join(",")}function vO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!on(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var wn={};function Im(t,e,n,r,i,o,s,a,u,l,h){let p=We+r,m=p+i,y=_O(p,m),C=typeof l=="function"?l():l;return y[K]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:C,incompleteFirstPass:!1,ssrId:h}}function _O(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:wn);return n}function EO(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Im(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function wm(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[tn]=i,p[X]=r|4|128|8|64|1024,(l!==null||t&&t[X]&2048)&&(p[X]|=2048),Dg(p),p[nt]=p[bi]=t,p[rt]=n,p[yn]=s||t&&t[yn],p[Re]=a||t&&t[Re],p[Ar]=u||t&&t[Ar]||null,p[qt]=o,p[Pa]=Wk(),p[Ma]=h,p[Eg]=l,p[Gt]=e.type==2?t[Gt]:p,p}function IO(t,e,n){let r=rn(e,t),i=EO(n),o=t[yn].rendererFactory,s=Tm(t,wm(t,i,null,yb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function yb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function vb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Tm(t,e){return t[Lo]?t[_g][zt]=e:t[Lo]=e,t[_g]=e,e}function wO(t=1){_b(ut(),le(),Ni()+t,!1)}function _b(t,e,n,r){if(!r)if((e[X]&3)===3){let o=t.preOrderCheckHooks;o!==null&&jl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Ul(e,o,0,n)}Pr(n)}var ud=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(ud||{});function im(t,e,n,r){let i=J(null);try{let[o,s,a]=t.inputs[n],u=null;(s&ud.SignalBased)!==0&&(u=e[o][mt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):xD(e,u,o,r)}finally{J(i)}}var In=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(In||{}),TO;function Dm(t,e){return TO(t,e)}var Ho=new Set,bm=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(bm||{}),Fi=new j(""),pD=new Set;function Ko(t){pD.has(t)||(pD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Eb=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})();var DO=new j("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:k(Se)})});function Ib(t,e,n){let r=t.get(DO);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function bO(t,e){for(let[n,r]of e)Ib(t,r.animateFns)}function gD(t,e,n,r){let i=t?.[Oa]?.enter;e!==null&&i&&i.has(n.index)&&bO(r,i)}function Uo(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;nn(i)?u=i:vn(i)&&(l=!0,i=i[tn]);let h=Wt(i);t===0&&r!==null?(gD(a,r,o,n),s==null?lb(e,r,h):Ql(e,r,h,s||null,!0)):t===1&&r!==null?(gD(a,r,o,n),Ql(e,r,h,s||null,!0)):t===2?mD(a,o,n,p=>{iO(e,h,l,p)}):t===3&&mD(a,o,n,()=>{e.destroyNode(h)}),u!=null&&VO(e,t,n,u,o,r,s)}}function CO(t,e){wb(t,e),e[tn]=null,e[qt]=null}function SO(t,e,n,r,i,o){r[tn]=i,r[qt]=e,ld(t,r,n,1,i,o)}function wb(t,e){e[yn].changeDetectionScheduler?.notify(9),ld(t,e,e[Re],2,null,null)}function AO(t){let e=t[Lo];if(!e)return zg(t[K],t);for(;e;){let n=null;if(vn(e))n=e[Lo];else{let r=e[It];r&&(n=r)}if(!n){for(;e&&!e[zt]&&e!==t;)vn(e)&&zg(e[K],e),e=e[nt];e===null&&(e=t),vn(e)&&zg(e[K],e),n=e&&e[zt]}e=n}}function Cm(t,e){let n=t[La],r=n.indexOf(e);n.splice(r,1)}function Sm(t,e){if(Ri(e))return;let n=e[Re];n.destroyNode&&ld(t,e,n,3,null,null),AO(e)}function zg(t,e){if(Ri(e))return;let n=J(null);try{e[X]&=-129,e[X]|=256,e[Ot]&&fa(e[Ot]),MO(t,e),NO(t,e),e[K].type===1&&e[Re].destroy();let r=e[Ci];if(r!==null&&nn(e[nt])){r!==e[nt]&&Cm(r,e);let i=e[Ai];i!==null&&i.detachView(t)}nm(e)}finally{J(n)}}function mD(t,e,n,r){let i=t?.[Oa];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&Ho.add(t),Ib(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),RO(t,r)}else t&&Ho.delete(t),r(!1)},i)}function RO(t,e){let n=t[Oa]?.running;if(n){n.then(()=>{t[Oa].running=void 0,Ho.delete(t),e(!0)});return}e(!1)}function NO(t,e){let n=t.cleanup,r=e[xo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[xo]=null);let i=e[zn];if(i!==null){e[zn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ka];if(o!==null){e[ka]=null;for(let s of o)s.destroy()}}function MO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Pi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];ve(de.LifecycleHookStart,a,u);try{u.call(a)}finally{ve(de.LifecycleHookEnd,a,u)}}else{ve(de.LifecycleHookStart,i,o);try{o.call(i)}finally{ve(de.LifecycleHookEnd,i,o)}}}}}function PO(t,e,n){return kO(t,e.parent,n)}function kO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[tn];if(Nr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===sn.None||i===sn.Emulated)return null}return rn(r,n)}function OO(t,e,n){return LO(t,e,n)}function xO(t,e,n){return t.type&40?rn(t,n):null}var LO=xO,yD;function Am(t,e,n,r){let i=PO(t,r,e),o=e[Re],s=r.parent||e[qt],a=OO(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)hD(o,i,n[u],a,!1);else hD(o,i,n,a,!1);yD!==void 0&&yD(o,r,e,n,i)}function Ha(t,e){if(e!==null){let n=e.type;if(n&3)return rn(e,t);if(n&4)return om(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ha(t,r);{let i=t[e.index];return nn(i)?om(-1,i):Wt(i)}}else{if(n&128)return Ha(t,e.next);if(n&32)return Dm(e,t)()||Wt(t[e.index]);{let r=Tb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Dr(t[Gt]);return Ha(i,r)}else return Ha(t,e.next)}}}return null}function Tb(t,e){if(e!==null){let r=t[Gt][qt],i=e.projection;return r.projection[i]}return null}function om(t,e){let n=It+t+1;if(n<e.length){let r=e[n],i=r[K].firstChild;if(i!==null)return Ha(r,i)}return e[Rr]}function Rm(t,e,n,r,i,o,s){for(;n!=null;){let a=r[Ar];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&$o(Wt(u),r),n.flags|=2),!ym(n))if(l&8)Rm(t,e,n.child,r,i,o,!1),Uo(e,t,a,i,u,n,o,r);else if(l&32){let h=Dm(n,r),p;for(;p=h();)Uo(e,t,a,i,p,n,o,r);Uo(e,t,a,i,u,n,o,r)}else l&16?FO(t,e,r,n,i,o):Uo(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function ld(t,e,n,r,i,o){Rm(n,r,t.firstChild,e,i,o,!1)}function FO(t,e,n,r,i,o){let s=n[Gt],u=s[qt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Uo(e,t,n[Ar],i,h,r,o,n)}else{let l=u,h=s[nt];JD(r)&&(l.flags|=128),Rm(t,e,l,h,i,o,!0)}}function VO(t,e,n,r,i,o,s){let a=r[Rr],u=Wt(r);a!==u&&Uo(e,t,n,o,a,i,s);for(let l=It;l<r.length;l++){let h=r[l];ld(h[K],h,t,e,o,a)}}function jO(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:In.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=In.Important),t.setStyle(n,r,i,o))}}function Db(t,e,n,r,i){let o=Ni(),s=r&2;try{Pr(-1),s&&e.length>We&&_b(t,e,We,!1);let a=s?de.TemplateUpdateStart:de.TemplateCreateStart;ve(a,i,n),n(r,i)}finally{Pr(o);let a=s?de.TemplateUpdateEnd:de.TemplateCreateEnd;ve(a,i,n)}}function Nm(t,e,n){GO(t,e,n),(n.flags&64)===64&&WO(t,e,n)}function Mm(t,e,n=rn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function UO(t,e,n,r){let o=r.get(rb,nb)||n===sn.ShadowDom||n===sn.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return BO(s),s}function BO(t){$O(t)}var $O=()=>null;function HO(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function bb(t,e,n,r,i,o){let s=e[K];if(Pm(t,s,e,n,r)){Nr(t)&&qO(e,t.index);return}t.type&3&&(n=HO(n)),zO(t,e,n,r,i,o)}function zO(t,e,n,r,i,o){if(t.type&3){let s=rn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function qO(t,e){let n=Kt(e,t);n[X]&16||(n[X]|=64)}function GO(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Nr(n)&&IO(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||Gl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Wl(e,t,s,n);if($o(u,e),o!==null&&JO(e,s-r,u,a,n,o),_n(a)){let l=Kt(n.index,e);l[rt]=Wl(e,t,s,n)}}}function WO(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=WT();try{Pr(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Nl(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&KO(u,l)}}finally{Pr(-1),Nl(s)}}function KO(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Cb(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];fO(e,o.selectors,!1)&&(r??=[],_n(o)?r.unshift(o):r.push(o))}return r}function QO(t,e,n,r,i,o){let s=rn(t,e);YO(e[Re],s,o,t.value,n,r,i)}function YO(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Sa(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function JO(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];im(r,n,u,l)}}function ZO(t,e,n,r,i){let o=We+n,s=e[K],a=i(s,e,t,r,n);e[o]=a,Vo(t,!0);let u=t.type===2;return u?(db(e[Re],a,t),(PT()===0||Fa(t))&&$o(a,e),kT()):$o(a,e),Ol()&&(!u||!ym(t))&&Am(s,e,a,t),t}function XO(t){let e=t;return Rg()?BT():(e=e.parent,Vo(e,!1)),e}function ex(t,e){let n=t[Ar];if(!n)return;let r;try{r=n.get(xt,null)}catch{r=null}r?.(e)}function Pm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];im(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];im(h,l,r,i),a=!0}return a}function tx(t,e){let n=Kt(e,t),r=n[K];nx(r,n);let i=n[tn];i!==null&&n[Ma]===null&&(n[Ma]=ib(i,n[Ar])),ve(de.ComponentStart);try{km(r,n,n[rt])}finally{ve(de.ComponentEnd,n[rt])}}function nx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function km(t,e,n){Ml(e);try{let r=t.viewQuery;r!==null&&rm(1,r,n);let i=t.template;i!==null&&Db(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ai]?.finishViewCreation(t),t.staticContentQueries&&ob(t,e),t.staticViewQueries&&rm(2,t.viewQuery,n);let o=t.components;o!==null&&rx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[X]&=-5,Pl()}}function rx(t,e){for(let n=0;n<e.length;n++)tx(t,e[n])}function Sb(t,e,n,r){let i=J(null);try{let o=e.tView,a=t[X]&4096?4096:16,u=wm(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ci]=l;let h=t[Ai];return h!==null&&(u[Ai]=h.createEmbeddedView(o)),km(o,u,n),u}finally{J(i)}}function sm(t,e){return!e||e.firstChild===null||JD(t)}function Ga(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Wt(o)),nn(o)&&Ab(o,r);let s=n.type;if(s&8)Ga(t,e,n.child,r);else if(s&32){let a=Dm(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Tb(e,n);if(Array.isArray(a))r.push(...a);else{let u=Dr(e[Gt]);Ga(u[K],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ab(t,e){for(let n=It;n<t.length;n++){let r=t[n],i=r[K].firstChild;i!==null&&Ga(r[K],r,i,e)}t[Rr]!==t[tn]&&e.push(t[Rr])}function Rb(t){if(t[Sl]!==null){for(let e of t[Sl])e.impl.addSequence(e);t[Sl].length=0}}var Nb=[];function ix(t){return t[Ot]??ox(t)}function ox(t){let e=Nb.pop()??Object.create(ax);return e.lView=t,e}function sx(t){t.lView[Ot]!==t&&(t.lView=null,Nb.push(t))}var ax=Ie(V({},la),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ua(t.lView)},consumerOnSignalRead(){this.lView[Ot]=this}});function cx(t){let e=t[Ot]??Object.create(ux);return e.lView=t,e}var ux=Ie(V({},la),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Dr(t.lView);for(;e&&!Mb(e[K]);)e=Dr(e);e&&bg(e)},consumerOnSignalRead(){this.lView[Ot]=this}});function Mb(t){return t.type!==2}function Pb(t){if(t[ka]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[ka])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[X]&8192)}}var lx=100;function kb(t,e=0){let r=t[yn].rendererFactory,i=!1;i||r.begin?.();try{dx(t,e)}finally{i||r.end?.()}}function dx(t,e){let n=Ng();try{Mg(!0),am(t,e);let r=0;for(;ja(t);){if(r===lx)throw new x(103,!1);r++,am(t,1)}}finally{Mg(n)}}function hx(t,e,n,r){if(Ri(e))return;let i=e[X],o=!1,s=!1;Ml(e);let a=!0,u=null,l=null;o||(Mb(t)?(l=ix(e),u=ha(l)):ju()===null?(a=!1,l=cx(e),u=ha(l)):e[Ot]&&(fa(e[Ot]),e[Ot]=null));try{Dg(e),HT(t.bindingStartIndex),n!==null&&Db(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&jl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&Ul(e,y,0,null),$g(e,0)}if(s||fx(e),Pb(e),Ob(e,0),t.contentQueries!==null&&ob(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&jl(e,y)}else{let y=t.contentHooks;y!==null&&Ul(e,y,1),$g(e,1)}gx(t,e);let p=t.components;p!==null&&Lb(e,p,0);let m=t.viewQuery;if(m!==null&&rm(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&jl(e,y)}else{let y=t.viewHooks;y!==null&&Ul(e,y,2),$g(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Cl]){for(let y of e[Cl])y();e[Cl]=null}o||(Rb(e),e[X]&=-73)}catch(h){throw o||Ua(e),h}finally{l!==null&&(Uu(l,u),a&&sx(l)),Pl()}}function Ob(t,e){for(let n=XD(t);n!==null;n=eb(n))for(let r=It;r<n.length;r++){let i=n[r];xb(i,e)}}function fx(t){for(let e=XD(t);e!==null;e=eb(e)){if(!(e[X]&2))continue;let n=e[La];for(let r=0;r<n.length;r++){let i=n[r];bg(i)}}}function px(t,e,n){ve(de.ComponentStart);let r=Kt(e,t);try{xb(r,n)}finally{ve(de.ComponentEnd,r[rt])}}function xb(t,e){Al(t)&&am(t,e)}function am(t,e){let r=t[K],i=t[X],o=t[Ot],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Bu(o)),s||=!1,o&&(o.dirty=!1),t[X]&=-9217,s)hx(r,t,r.template,t[rt]);else if(i&8192){let a=J(null);try{Pb(t),Ob(t,1);let u=r.components;u!==null&&Lb(t,u,1),Rb(t)}finally{J(a)}}}function Lb(t,e,n){for(let r=0;r<e.length;r++)px(t,e[r],n)}function gx(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Pr(~i);else{let o=i,s=n[++r],a=n[++r];GT(s,o);let u=e[o];ve(de.HostBindingsUpdateStart,u);try{a(2,u)}finally{ve(de.HostBindingsUpdateEnd,u)}}}}finally{Pr(-1)}}function Om(t,e){let n=Ng()?64:1088;for(t[yn].changeDetectionScheduler?.notify(e);t;){t[X]|=n;let r=Dr(t);if(Fo(t)&&!r)return t;t=r}return null}function Fb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function mx(t,e){let n=It+e;if(n<t.length)return t[n]}function Vb(t,e,n,r=!0){let i=e[K];if(vx(i,e,t,n),r){let s=om(n,t),a=e[Re],u=a.parentNode(t[Rr]);u!==null&&SO(i,t[qt],a,e,u,s)}let o=e[Ma];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function yx(t,e){let n=Yl(t,e);return n!==void 0&&Sm(n[K],n),n}function Yl(t,e){if(t.length<=It)return;let n=It+e,r=t[n];if(r){let i=r[Ci];i!==null&&i!==t&&Cm(i,r),e>0&&(t[n-1][zt]=r[zt]);let o=Aa(t,It+e);CO(r[K],r);let s=o[Ai];s!==null&&s.detachView(o[K]),r[nt]=null,r[zt]=null,r[X]&=-129}return r}function vx(t,e,n,r){let i=It+r,o=n.length;r>0&&(n[i-1][zt]=e),r<o-It?(e[zt]=n[i],fg(n,It+r,e)):(n.push(e),e[zt]=null),e[nt]=n;let s=e[Ci];s!==null&&n!==s&&jb(s,e);let a=e[Ai];a!==null&&a.insertView(t),Rl(e),e[X]|=128}function jb(t,e){let n=t[La],r=e[nt];if(vn(r))t[X]|=2;else{let i=r[nt][Gt];e[Gt]!==i&&(t[X]|=2)}n===null?t[La]=[e]:n.push(e)}var xr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[K];return Ga(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[rt]}set context(e){this._lView[rt]=e}get destroyed(){return Ri(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[nt];if(nn(e)){let n=e[xa],r=n?n.indexOf(this):-1;r>-1&&(Yl(e,r),Aa(n,r))}this._attachedToViewContainer=!1}Sm(this._lView[K],this._lView)}onDestroy(e){Cg(this._lView,e)}markForCheck(){Om(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){Rl(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,kb(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Fo(this._lView),n=this._lView[Ci];n!==null&&!e&&Cm(n,this._lView),wb(this._lView[K],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e;let n=Fo(this._lView),r=this._lView[Ci];r!==null&&!n&&jb(r,this._lView),Rl(this._lView)}};var Za=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=_x;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Sb(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new xr(o)}}return t})();function _x(){return Ex(Rt(),le())}function Ex(t,e){return t.type&4?new Za(e,t,rd(t,e)):null}function dd(t,e,n,r,i){let o=t.data[e];if(o===null)o=Ix(t,e,n,r,i),qT()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=UT();o.injectorIndex=s===null?-1:s.injectorIndex}return Vo(o,!0),o}function Ix(t,e,n,r,i){let o=Ag(),s=Rg(),a=s?o:o&&o.parent,u=t.data[e]=Tx(t,a,n,e,r,i);return wx(t,u,o,s),u}function wx(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function Tx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return xT()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Dx=()=>null,bx=()=>null;function vD(t,e){return Dx(t,e)}function Cx(t,e,n){return bx(t,e,n)}var Ub=class{},hd=class{},cm=class{resolveComponentFactory(e){throw new x(917,!1)}},Xa=class{static NULL=new cm},ki=class{},fd=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Sx()}return t})();function Sx(){let t=le(),e=Rt(),n=Kt(e.index,t);return(vn(n)?n:t)[Re]}var Bb=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>null})}return t})();var Bl={},um=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Bl,r);return i!==Bl||n===Bl?i:this.parentInjector.get(e,n,r)}};function _D(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=tg(i,a);else if(o==2){let u=a,l=e[++s];r=tg(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Fe(t,e=0){let n=le();if(n===null)return q(t,e);let r=Rt();return KD(r,n,tt(t),e)}function $b(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}Nx(t,e,n,a,o,u,l)}o!==null&&r!==null&&Ax(n,r,o)}function Ax(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new x(-301,!1);r.push(e[i],o)}}function Rx(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Nx(t,e,n,r,i,o,s){let a=r.length,u=null;for(let m=0;m<a;m++){let y=r[m];u===null&&_n(y)&&(u=y,Rx(t,n,m)),em(Gl(n,e),t,y.type)}Lx(n,t.data.length,a),u?.viewProvidersResolver&&u.viewProvidersResolver(u);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=vb(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=qa(n.mergedAttrs,y.hostAttrs),Px(t,n,e,p,y),xx(p,y,i),s!==null&&s.has(y)){let[R,S]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,S+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let C=y.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(C.ngOnChanges||C.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}Mx(t,n,o)}function Mx(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))ED(0,e,i,r),ED(1,e,i,r),wD(e,r,!1);else{let o=n.get(i);ID(0,e,o,r),ID(1,e,o,r),wD(e,r,!0)}}}function ED(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),Hb(e,o)}}function ID(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Hb(e,s)}}function Hb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function wD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Em(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Px(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Tr(i.type,!0)),s=new Pi(o,_n(i),Fe,null);t.blueprint[r]=s,n[r]=s,kx(t,e,r,vb(t,n,i.hostVars,wn),i)}function kx(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Ox(s)!=a&&s.push(a),s.push(n,r,o)}}function Ox(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function xx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;_n(e)&&(n[""]=t)}}function Lx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function zb(t,e,n,r,i,o,s,a){let u=e[K],l=u.consts,h=Mr(l,s),p=dd(u,t,n,r,h);return o&&$b(u,e,p,Mr(l,a),i),p.mergedAttrs=qa(p.mergedAttrs,p.attrs),p.attrs!==null&&_D(p,p.attrs,!1),p.mergedAttrs!==null&&_D(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function qb(t,e){jD(t,e),Ig(e)&&t.queries.elementEnd(e)}function xm(t){return Wb(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Gb(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Wb(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function Fx(t,e,n){return t[e]=n}function Lr(t,e,n){if(n===wn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Vx(t,e,n,r){let i=Lr(t,e,n);return Lr(t,e+1,r)||i}function qg(t,e,n){return function r(i){let o=Nr(t)?Kt(t.index,e):e;Om(o,5);let s=e[rt],a=TD(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=TD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function TD(t,e,n,r){let i=J(null);try{return ve(de.OutputStart,e,n),n(r)!==!1}catch(o){return ex(t,o),!1}finally{ve(de.OutputEnd,e,n),J(i)}}function jx(t,e,n,r,i,o,s,a){let u=Fa(t),l=!1,h=null;if(!r&&u&&(h=Bx(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=rn(t,n),m=r?r(p):p;Zk(n,m,o,a);let y=i.listen(m,o,a);if(!Ux(o)){let C=r?R=>r(Wt(R[t.index])):t.index;Kb(C,e,n,o,a,y,!1)}}return l}function Ux(t){return t.startsWith("animation")||t.startsWith("transition")}function Bx(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[xo],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function Kb(t,e,n,r,i,o,s){let a=e.firstCreatePass?MT(e):null,u=NT(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function DD(t,e,n,r,i,o){let s=e[n],a=e[K],l=a.data[n].outputs[r],p=s[l].subscribe(o);Kb(t.index,a,e,i,o,p,!0)}var lm=Symbol("BINDING");var Jl=class extends Xa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Cr(e);return new zo(n,this.ngModule)}};function $x(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&ud.SignalBased)!==0};return i&&(o.transform=i),o})}function Hx(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function zx(t,e,n){let r=e instanceof Se?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new um(n,r):n}function qx(t){let e=t.get(ki,null);if(e===null)throw new x(407,!1);let n=t.get(Bb,null),r=t.get(Ii,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Gx(t,e){let n=Qb(t);return ub(e,n,n==="svg"?DT:n==="math"?bT:null)}function Qb(t){return(t.selectors[0][0]||"div").toLowerCase()}var zo=class extends hd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=$x(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Hx(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=yO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ve(de.DynamicComponentStart);let a=J(null);try{let u=this.componentDef,l=Wx(r,u,s,o),h=zx(u,i||this.ngModule,e),p=qx(h),m=p.rendererFactory.createRenderer(null,u),y=r?UO(m,r,u.encapsulation,h):Gx(u,m),C=s?.some(bD)||o?.some(M=>typeof M!="function"&&M.bindings.some(bD)),R=wm(null,l,null,512|yb(u),null,null,p,m,h,null,ib(y,h,!0));R[We]=y,Ml(R);let S=null;try{let M=zb(We,R,2,"#host",()=>l.directiveRegistry,!0,0);db(m,y,M),$o(y,R),Nm(l,R,M),sb(l,M,R),qb(l,M),n!==void 0&&Qx(M,this.ngContentSelectors,n),S=Kt(M.index,R),R[rt]=S[rt],km(l,R,null)}catch(M){throw S!==null&&nm(S),nm(R),M}finally{ve(de.DynamicComponentEnd),Pl()}return new Zl(this.componentType,R,!!C)}finally{J(a)}}};function Wx(t,e,n,r){let i=t?["ng-version","21.0.6"]:vO(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[lm].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[lm].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=lg(p);u.push(m)}return Im(0,null,Kx(o,s),1,a,u,null,null,null,[i],null)}function Kx(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function bD(t){let e=t[lm].kind;return e==="input"||e==="twoWay"}var Zl=class extends Ub{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Va(n[K],We),this.location=rd(this._tNode,n),this.instance=Kt(this._tNode.index,n)[rt],this.hostView=this.changeDetectorRef=new xr(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Pm(r,i[K],i,e,n);this.previousInputValues.set(e,n);let s=Kt(r.index,i);Om(s,1)}get injector(){return new Mi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Qx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Vi=(()=>{class t{static __NG_ELEMENT_ID__=Yx}return t})();function Yx(){let t=Rt();return Zx(t,le())}var Jx=Vi,Yb=class extends Jx{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return rd(this._hostTNode,this._hostLView)}get injector(){return new Mi(this._hostTNode,this._hostLView)}get parentInjector(){let e=pm(this._hostTNode,this._hostLView);if($D(e)){let n=zl(e,this._hostLView),r=Hl(e),i=n[K].data[r+8];return new Mi(i,n)}else return new Mi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=CD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-It}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=vD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,sm(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!bk(e),l;if(u)l=n;else{let S=n||{};l=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef,s=S.directives,a=S.bindings}let h=u?e:new zo(Cr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let M=(u?p:this.parentInjector).get(Se,null);M&&(o=M)}let m=Cr(h.componentType??{}),y=vD(this._lContainer,m?.id??null),C=y?.firstChild??null,R=h.create(p,i,C,o,s,a);return this.insertImpl(R.hostView,l,sm(this._hostTNode,y)),R}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(ST(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[nt],l=new Yb(u,u[qt],u[nt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Vb(s,i,o,r),e.attachToViewContainerRef(),fg(Gg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=CD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Yl(this._lContainer,n);r&&(Aa(Gg(this._lContainer),n),Sm(r[K],r))}detach(e){let n=this._adjustIndex(e,-1),r=Yl(this._lContainer,n);return r&&Aa(Gg(this._lContainer),n)!=null?new xr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function CD(t){return t[xa]}function Gg(t){return t[xa]||(t[xa]=[])}function Zx(t,e){let n,r=e[t.index];return nn(r)?n=r:(n=Fb(r,e,null,t),e[t.index]=n,Tm(e,n)),e1(n,e,t,r),new Yb(n,t,e)}function Xx(t,e){let n=t[Re],r=n.createComment(""),i=rn(e,t),o=n.parentNode(i);return Ql(n,o,r,n.nextSibling(i),!1),r}var e1=r1,t1=()=>!1;function n1(t,e,n){return t1(t,e,n)}function r1(t,e,n,r){if(t[Rr])return;let i;n.type&8?i=Wt(r):i=Xx(e,n),t[Rr]=i}var Oi=class{},pd=class{};var Xl=class extends Oi{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Jl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=ug(e);this._bootstrapComponents=gb(o.bootstrap),this._r3Injector=xg(e,n,[{provide:Oi,useValue:this},{provide:Xa,useValue:this.componentFactoryResolver},...r],qn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ed=class extends pd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Xl(this.moduleType,e,[])}};var Wa=class extends Oi{injector;componentFactoryResolver=new Jl(this);instance=null;constructor(e){super();let n=new Ei([...e.providers,{provide:Oi,useValue:this},{provide:Xa,useValue:this.componentFactoryResolver}],e.parent||Na(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ec(t,e,n=null){return new Wa({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var i1=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=mg(!1,n.type),i=r.length>0?ec([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(q(Se))})}return t})();function Lm(t){return Go(()=>{let e=Jb(t),n=Ie(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===gm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(i1).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||sn.Emulated,styles:t.styles||kt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Ko("NgStandalone"),Zb(n);let r=t.dependencies;return n.directiveDefs=SD(r,o1),n.pipeDefs=SD(r,uT),n.id=c1(n),n})}function o1(t){return Cr(t)||lg(t)}function ji(t){return Go(()=>({type:t.type,bootstrap:t.bootstrap||kt,declarations:t.declarations||kt,imports:t.imports||kt,exports:t.exports||kt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function s1(t,e){if(t==null)return Sr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=ud.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function a1(t){if(t==null)return Sr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Fr(t){return Go(()=>{let e=Jb(t);return Zb(e),e})}function Fm(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Jb(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Sr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||kt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:s1(t.inputs,e),outputs:a1(t.outputs),debugInfo:null}}function Zb(t){t.features?.forEach(e=>e(t))}function SD(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function c1(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function u1(t){return Object.getPrototypeOf(t.prototype).constructor}function Xb(t){let e=u1(t.type),n=!0,r=[t];for(;e;){let i;if(_n(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Wg(t.inputs),s.declaredInputs=Wg(t.declaredInputs),s.outputs=Wg(t.outputs);let a=i.hostBindings;a&&p1(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&h1(t,u),l&&f1(t,l),l1(t,i),cT(t.outputs,i.outputs),_n(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Xb&&(n=!1)}}e=Object.getPrototypeOf(e)}d1(r)}function l1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function d1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=qa(i.hostAttrs,n=qa(n,i.hostAttrs))}}function Wg(t){return t===Sr?{}:t===kt?[]:t}function h1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function f1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function p1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function eC(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=qa(t.mergedAttrs,t.attrs);let h=t.tView=Im(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),Vo(t,!1);let u=m1(n,e,t,r);Ol()&&Am(n,e,u,t),$o(u,e);let l=Fb(u,e,u,t);e[r+We]=l,Tm(e,l),n1(l,t,e)}function g1(t,e,n,r,i,o,s,a,u,l,h){let p=n+We,m;return e.firstCreatePass?(m=dd(e,p,4,s||null,a||null),Sg()&&$b(e,t,m,Mr(e.consts,l),Cb),jD(e,m)):m=e.data[p],eC(m,t,e,n,r,i,o,u),Fa(m)&&Nm(e,t,m),l!=null&&Mm(t,m,h),m}function tC(t,e,n,r,i,o,s,a,u,l,h){let p=n+We,m;if(e.firstCreatePass){if(m=dd(e,p,4,s||null,a||null),l!=null){let y=Mr(e.consts,l);m.localNames=[];for(let C=0;C<y.length;C+=2)m.localNames.push(y[C],-1)}}else m=e.data[p];return eC(m,t,e,n,r,i,o,u),l!=null&&Mm(t,m,h),m}function nC(t,e,n,r,i,o,s,a){let u=le(),l=ut(),h=Mr(l.consts,o);return g1(u,l,t,e,n,r,i,h,void 0,s,a),nC}var m1=y1;function y1(t,e,n,r){return xl(!0),e[Re].createComment("")}var Vm=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function rC(t){return typeof t=="function"&&t[mt]!==void 0}function jm(t){return rC(t)&&typeof t.set=="function"}var Um=new j("");function Qo(t){return!!t&&typeof t.then=="function"}function Bm(t){return!!t&&typeof t.subscribe=="function"}var iC=new j("");var $m=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=k(iC,{optional:!0})??[];injector=k(Ge);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=ke(this.injector,i);if(Qo(o))n.push(o);else if(Bm(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),gd=new j("");function oC(){_p(()=>{let t="";throw new x(600,t)})}function sC(t){return t.isBoundToModule}var v1=10;var Yo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(xt);afterRenderManager=k(Eb);zonelessEnabled=k(Ba);rootEffectScheduler=k(Bg);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Xe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(Qn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ye(n=>!n))}constructor(){k(Fi,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=k(Se);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Ge.NULL){return this._injector.get(De).run(()=>{ve(de.BootstrapComponentStart);let s=n instanceof hd;if(!this._injector.get($m).done){let C="";throw new x(405,C)}let u;s?u=n:u=this._injector.get(Xa).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=sC(u)?void 0:this._injector.get(Oi),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Um,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),za(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),ve(de.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ve(de.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(bm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ve(de.ChangeDetectionEnd),new x(101,!1);let n=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(n),this.afterTick.next(),ve(de.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ki,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<v1;){ve(de.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ve(de.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ja(i))continue;let o=r&&!this.zonelessEnabled?0:1;kb(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ja(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;za(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(gd,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>za(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new x(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function za(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function md(t,e,n,r){let i=le(),o=jo();if(Lr(i,o,e)){let s=ut(),a=kl();QO(a,i,t,e,n,r)}return md}var W9=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function _1(t,e,n,r,i,o,s,a){Ko("NgControlFlow");let u=le(),l=ut(),h=Mr(l.consts,o);return tC(u,l,t,e,n,r,i,h,256,s,a),Hm}function Hm(t,e,n,r,i,o,s,a){Ko("NgControlFlow");let u=le(),l=ut(),h=Mr(l.consts,o);return tC(u,l,t,e,n,r,i,h,512,s,a),Hm}function E1(t,e){Ko("NgControlFlow");let n=le(),r=jo(),i=n[r]!==wn?n[r]:-1,o=i!==-1?AD(n,We+i):void 0,s=0;if(Lr(n,r,t)){let a=J(null);try{if(o!==void 0&&yx(o,s),t!==-1){let u=We+t,l=AD(n,u),h=I1(n[K],u),p=Cx(l,h,n),m=Sb(n,h,e,{dehydratedView:p});Vb(l,m,s,sm(h,p))}}finally{J(a)}}else if(o!==void 0){let a=mx(o,s);a!==void 0&&(a[rt]=e)}}function AD(t,e){return t[e]}function I1(t,e){return Va(t,e)}function aC(t,e,n){let r=le(),i=jo();if(Lr(r,i,e)){let o=ut(),s=kl();bb(s,r,t,e,r[Re],n)}return aC}function RD(t,e,n,r,i){Pm(e,t,n,i?"class":"style",r)}function zm(t,e,n,r){let i=le(),o=i[K],s=t+We,a=o.firstCreatePass?zb(s,i,2,e,Cb,Sg(),n,r):o.data[s];if(ZO(a,i,t,e,w1),Fa(a)){let u=i[K];Nm(u,i,a),sb(u,a,i)}return r!=null&&Mm(i,a),zm}function qm(){let t=ut(),e=Rt(),n=XO(e);return t.firstCreatePass&&qb(t,n),LT(n)&&FT(),OT(),n.classesWithoutHost!=null&&Mk(n)&&RD(t,n,le(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Pk(n)&&RD(t,n,le(),n.stylesWithoutHost,!1),qm}function yd(t,e,n,r){return zm(t,e,n,r),qm(),yd}var w1=(t,e,n,r,i)=>(xl(!0),ub(e[Re],r,XT()));function T1(){return le()}var $a=void 0;function D1(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var b1=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$a,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$a,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",$a,$a,$a],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",D1],Kg={};function Ft(t){let e=C1(t),n=ND(e);if(n)return n;let r=e.split("-")[0];if(n=ND(r),n)return n;if(r==="en")return b1;throw new x(701,!1)}function ND(t){return t in Kg||(Kg[t]=Wn.ng&&Wn.ng.common&&Wn.ng.common.locales&&Wn.ng.common.locales[t]),Kg[t]}var Oe=(function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t})(Oe||{});function C1(t){return t.toLowerCase().replace(/_/g,"-")}var tc="en-US";var S1=tc;function cC(t){typeof t=="string"&&(S1=t.toLowerCase().replace(/_/g,"-"))}function vd(t,e,n){let r=le(),i=ut(),o=Rt();return uC(i,r,r[Re],o,t,e,n),vd}function uC(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=qg(r,e,o),jx(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=qg(r,e,o),DD(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=qg(r,e,o),DD(r,e,p,i,i,u)}}function A1(t=1){return ZT(t)}function Vl(t,e){return t<<17|e<<2}function xi(t){return t>>17&32767}function R1(t){return(t&2)==2}function N1(t,e){return t&131071|e<<17}function dm(t){return t|2}function qo(t){return(t&131068)>>2}function Qg(t,e){return t&-131069|e<<2}function M1(t){return(t&1)===1}function hm(t){return t|1}function P1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=xi(s),u=qo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Oo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=xi(t[a+1]);t[r+1]=Vl(m,a),m!==0&&(t[m+1]=Qg(t[m+1],r)),t[a+1]=N1(t[a+1],r)}else t[r+1]=Vl(a,0),a!==0&&(t[a+1]=Qg(t[a+1],r)),a=r;else t[r+1]=Vl(u,0),a===0?a=r:t[u+1]=Qg(t[u+1],r),u=r;l&&(t[r+1]=dm(t[r+1])),MD(t,h,r,!0),MD(t,h,r,!1),k1(e,h,t,r,o),s=Vl(a,u),o?e.classBindings=s:e.styleBindings=s}function k1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Oo(o,e)>=0&&(n[r+1]=hm(n[r+1]))}function MD(t,e,n,r){let i=t[n+1],o=e===null,s=r?xi(i):qo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];O1(u,e)&&(a=!0,t[s+1]=r?hm(l):dm(l)),s=r?xi(l):qo(l)}a&&(t[n+1]=r?dm(i):hm(i))}function O1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Oo(t,e)>=0:!1}function lC(t,e){return x1(t,e,null,!0),lC}function x1(t,e,n,r){let i=le(),o=ut(),s=zT(2);if(o.firstUpdatePass&&F1(o,t,s,r),e!==wn&&Lr(i,s,e)){let a=o.data[Ni()];$1(o,a,i,i[Re],t,i[s+1]=H1(e,n),r,s)}}function L1(t,e){return e>=t.expandoStartIndex}function F1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ni()],s=L1(t,n);z1(o,r)&&e===null&&!s&&(e=!1),e=V1(i,o,e,r),P1(i,o,e,n,s,r)}}function V1(t,e,n,r){let i=KT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Yg(null,t,e,n,r),n=Ka(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Yg(i,t,e,n,r),o===null){let u=j1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Yg(null,t,e,u[1],r),u=Ka(u,e.attrs,r),U1(t,e,r,u))}else o=B1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function j1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(qo(r)!==0)return t[xi(r)]}function U1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[xi(i)]=r}function B1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ka(r,s,n)}return Ka(r,e.attrs,n)}function Yg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ka(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ka(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),mT(t,s,n?!0:e[++o]))}return t===void 0?null:t}function $1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=M1(l)?PD(u,e,n,i,qo(l),s):void 0;if(!td(h)){td(o)||R1(l)&&(o=PD(u,null,n,i,a,s));let p=wg(Ni(),n);jO(r,s,p,i,o)}}function PD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===wn&&(m=p?kt:void 0);let y=p?bl(m,r):h===r?m:void 0;if(l&&!td(y)&&(y=bl(u,r)),td(y)&&(a=y,s))return a;let C=t[i+1];i=s?xi(C):qo(C)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=bl(u,r))}return a}function td(t){return t!==void 0}function H1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=qn(ad(t)))),t}function z1(t,e){return(t.flags&(e?8:16))!==0}function q1(t,e=""){let n=le(),r=ut(),i=t+We,o=r.firstCreatePass?dd(r,i,1,e,null):r.data[i],s=G1(r,n,o,e,t);n[i]=s,Ol()&&Am(r,n,s,o),Vo(o,!1)}var G1=(t,e,n,r,i)=>(xl(!0),nO(e[Re],r));function W1(t,e,n,r=""){return Lr(t,jo(),n)?e+Sa(n)+r:wn}function dC(t){return Gm("",t),dC}function Gm(t,e,n){let r=le(),i=W1(r,t,e,n);return i!==wn&&K1(r,Ni(),i),Gm}function K1(t,e,n){let r=wg(e,t);rO(t[Re],r,n)}function hC(t,e,n){jm(e)&&(e=e());let r=le(),i=jo();if(Lr(r,i,e)){let o=ut(),s=kl();bb(s,r,t,e,r[Re],n)}return hC}function Q1(t,e){let n=jm(t);return n&&t.set(e),n}function fC(t,e){let n=le(),r=ut(),i=Rt();return uC(r,n,n[Re],i,t,e),fC}function kD(t,e,n){let r=ut();r.firstCreatePass&&pC(e,r.data,r.blueprint,_n(t),n)}function pC(t,e,n,r,i){if(t=tt(t),Array.isArray(t))for(let o=0;o<t.length;o++)pC(t[o],e,n,r,i);else{let o=ut(),s=le(),a=Rt(),u=_i(t)?t:tt(t.provide),l=vg(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(_i(t)||!t.multi){let y=new Pi(l,i,Fe,null),C=Zg(u,e,i?h:h+m,p);C===-1?(em(Gl(a,s),o,u),Jg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[C]=y,s[C]=y)}else{let y=Zg(u,e,h+m,p),C=Zg(u,e,h,h+m),R=y>=0&&n[y],S=C>=0&&n[C];if(i&&!S||!i&&!R){em(Gl(a,s),o,u);let M=Z1(i?J1:Y1,n.length,i,r,l,t);!i&&S&&(n[C].providerFactory=M),Jg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(M),s.push(M)}else{let M=gC(n[i?C:y],l,!i&&r);Jg(o,t,y>-1?y:C,M)}!i&&r&&S&&n[C].componentProviders++}}}function Jg(t,e,n,r){let i=_i(e),o=IT(e);if(i||o){let u=(o?tt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function gC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Zg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Y1(t,e,n,r,i){return fm(this.multi,[])}function J1(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Wl(r,r[K],this.providerFactory.index,i);s=u.slice(0,a),fm(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],fm(o,s);return s}function fm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function Z1(t,e,n,r,i,o){let s=new Pi(t,n,Fe,null);return s.multi=[],s.index=e,s.componentProviders=0,gC(s,i,r&&!n),s}function X1(t,e){return n=>{n.providersResolver=(r,i)=>kD(r,i?i(t):t,!1),e&&(n.viewProvidersResolver=(r,i)=>kD(r,i?i(e):e,!0))}}function eL(t,e){let n=t[e];return n===wn?void 0:n}function tL(t,e,n,r,i,o,s){let a=e+n;return Vx(t,a,i,o)?Fx(t,a+2,s?r.call(s,i,o):r(i,o)):eL(t,a+2)}function nL(t,e){let n=ut(),r,i=t+We;n.firstCreatePass?(r=rL(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Tr(r.type,!0)),s,a=_t(Fe);try{let u=ql(!1),l=o();return ql(u),Tg(n,le(),i,l),l}finally{_t(a)}}function rL(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function iL(t,e,n,r){let i=t+We,o=le(),s=CT(o,i);return oL(o,i)?tL(o,$T(),e,s.transform,n,r,s):s.transform(n,r)}function oL(t,e){return t[K].data[e].pure}var nd=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Wm=(()=>{class t{compileModuleSync(n){return new ed(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=ug(n),o=gb(i.declarations).reduce((s,a)=>{let u=Cr(a);return u&&s.push(new zo(u)),s},[]);return new nd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var mC=(()=>{class t{applicationErrorHandler=k(xt);appRef=k(Yo);taskService=k(Qn);ngZone=k(De);zonelessEnabled=k(Ba);tracing=k(Fi,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Da):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Ug,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Fg:Lg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Da+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Fg(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function yC(){return[{provide:Ii,useExisting:mC},{provide:De,useClass:ba},{provide:Ba,useValue:!0}]}function sL(){return typeof $localize<"u"&&$localize.locale||tc}var nc=new j("",{factory:()=>k(nc,{optional:!0,skipSelf:!0})||sL()});function aL(t,e){return $u(t,e?.equal)}var IC=Symbol("InputSignalNode#UNSET"),bL=Ie(V({},Hu),{transformFn:void 0,applyValueToInputSignal(t,e){pa(t,e)}});function wC(t,e){let n=Object.create(bL);n.value=t,n.transformFn=e?.transform;function r(){if(da(n),n.value===IC){let i=null;throw new x(-950,i)}return n.value}return r[mt]=n,r}var Ed=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ya(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function vC(t,e){return wC(t,e)}function CL(t){return wC(IC,t)}var TC=(vC.required=CL,vC);var Km=new j(""),SL=new j("");function rc(t){return!t.moduleRef}function AL(t){let e=rc(t)?t.r3Injector:t.moduleRef.injector,n=e.get(De);return n.run(()=>{rc(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(xt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),rc(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Km);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Km);s.add(o),t.moduleRef.onDestroy(()=>{za(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return NL(r,n,()=>{let o=e.get(Qn),s=o.add(),a=e.get($m);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(nc,tc);if(cC(u||tc),!e.get(SL,!0))return rc(t)?e.get(Yo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(rc(t)){let h=e.get(Yo);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return RL?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var RL;function NL(t,e,n){try{let r=n();return Qo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var _d=null;function ML(t=[],e){return Ge.create({name:e,providers:[{provide:Ra,useValue:"platform"},{provide:Km,useValue:new Set([()=>_d=null])},...t]})}function PL(t=[]){if(_d)return _d;let e=ML(t);return _d=e,oC(),kL(e),e}function kL(t){let e=t.get(od,null);ke(t,()=>{e?.forEach(n=>n())})}function Xm(){return!1}var wd=(()=>{class t{static __NG_ELEMENT_ID__=OL}return t})();function OL(t){return xL(Rt(),le(),(t&16)===16)}function xL(t,e,n){if(Nr(t)&&!n){let r=Kt(t.index,e);return new xr(r,r)}else if(t.type&175){let r=e[Gt];return new xr(r,e)}return null}var Qm=class{constructor(){}supports(e){return xm(e)}create(e){return new Ym(e)}},LL=(t,e)=>e,Ym=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||LL}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<_C(r,i,o)?n:r,a=_C(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,C=y+m;h<=C&&C<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!xm(e))throw new x(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,Gb(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Jm(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Id),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Id),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Jm=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}},Zm=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Id=class{map=new Map;put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Zm,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function _C(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function EC(){return new ey([new Qm])}var ey=(()=>{class t{factories;static \u0275prov=B({token:t,providedIn:"root",factory:EC});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{let r=k(t,{optional:!0,skipSelf:!0});return t.create(n,r||EC())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new x(901,!1)}}return t})();function DC(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;ve(de.BootstrapApplicationStart);try{let o=i?.injector??PL(r),s=[yC(),rD,...n||[]],a=new Wa({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return AL({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ve(de.BootstrapApplicationEnd)}}function Td(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var bC=null;function Yn(){return bC}function ty(t){bC??=t}var ic=class{},Dd=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(CC),providedIn:"platform"})}return t})();var CC=(()=>{class t extends Dd{_location;_history;_doc=k(Le);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yn().getBaseHref(this._doc)}onPopState(n){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function RC(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function SC(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Vr(t){return t&&t[0]!=="?"?`?${t}`:t}var Jo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(VL),providedIn:"root"})}return t})(),FL=new j(""),VL=(()=>{class t extends Jo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(Le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return RC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Vr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Vr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Vr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(q(Dd),q(FL,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Zo=(()=>{class t{_subject=new Xe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=BL(SC(AC(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Vr(r))}normalize(n){return t.stripTrailingSlash(UL(this._basePath,AC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Vr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Vr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Vr;static joinWithSlash=RC;static stripTrailingSlash=SC;static \u0275fac=function(r){return new(r||t)(q(Jo))};static \u0275prov=B({token:t,factory:()=>jL(),providedIn:"root"})}return t})();function jL(){return new Zo(q(Jo))}function UL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function AC(t){return t.replace(/\/index.html$/,"")}function BL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var lt=(function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t})(lt||{}),_e=(function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t})(_e||{}),Nt=(function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t})(Nt||{}),Zn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function kC(t){return Ft(t)[Oe.LocaleId]}function OC(t,e,n){let r=Ft(t),i=[r[Oe.DayPeriodsFormat],r[Oe.DayPeriodsStandalone]],o=Yt(i,e);return Yt(o,n)}function xC(t,e,n){let r=Ft(t),i=[r[Oe.DaysFormat],r[Oe.DaysStandalone]],o=Yt(i,e);return Yt(o,n)}function LC(t,e,n){let r=Ft(t),i=[r[Oe.MonthsFormat],r[Oe.MonthsStandalone]],o=Yt(i,e);return Yt(o,n)}function FC(t,e){let r=Ft(t)[Oe.Eras];return Yt(r,e)}function oc(t,e){let n=Ft(t);return Yt(n[Oe.DateFormat],e)}function sc(t,e){let n=Ft(t);return Yt(n[Oe.TimeFormat],e)}function ac(t,e){let r=Ft(t)[Oe.DateTimeFormat];return Yt(r,e)}function cc(t,e){let n=Ft(t),r=n[Oe.NumberSymbols][e];if(typeof r>"u"){if(e===Zn.CurrencyDecimal)return n[Oe.NumberSymbols][Zn.Decimal];if(e===Zn.CurrencyGroup)return n[Oe.NumberSymbols][Zn.Group]}return r}function VC(t){if(!t[Oe.ExtraData])throw new x(2303,!1)}function jC(t){let e=Ft(t);return VC(e),(e[Oe.ExtraData][2]||[]).map(r=>typeof r=="string"?ny(r):[ny(r[0]),ny(r[1])])}function UC(t,e,n){let r=Ft(t);VC(r);let i=[r[Oe.ExtraData][0],r[Oe.ExtraData][1]],o=Yt(i,e)||[];return Yt(o,n)||[]}function Yt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new x(2304,!1)}function ny(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var $L=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,bd={},HL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function BC(t,e,n,r){let i=ZL(t);e=Jn(n,e)||e;let s=[],a;for(;e;)if(a=HL.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=HC(r,u),i=JL(i,r));let l="";return s.forEach(h=>{let p=QL(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Nd(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Jn(t,e){let n=kC(t);if(bd[n]??={},bd[n][e])return bd[n][e];let r="";switch(e){case"shortDate":r=oc(t,Nt.Short);break;case"mediumDate":r=oc(t,Nt.Medium);break;case"longDate":r=oc(t,Nt.Long);break;case"fullDate":r=oc(t,Nt.Full);break;case"shortTime":r=sc(t,Nt.Short);break;case"mediumTime":r=sc(t,Nt.Medium);break;case"longTime":r=sc(t,Nt.Long);break;case"fullTime":r=sc(t,Nt.Full);break;case"short":let i=Jn(t,"shortTime"),o=Jn(t,"shortDate");r=Cd(ac(t,Nt.Short),[i,o]);break;case"medium":let s=Jn(t,"mediumTime"),a=Jn(t,"mediumDate");r=Cd(ac(t,Nt.Medium),[s,a]);break;case"long":let u=Jn(t,"longTime"),l=Jn(t,"longDate");r=Cd(ac(t,Nt.Long),[u,l]);break;case"full":let h=Jn(t,"fullTime"),p=Jn(t,"fullDate");r=Cd(ac(t,Nt.Full),[h,p]);break}return r&&(bd[n][e]=r),r}function Cd(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function an(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function zL(t,e){return an(t,3).substring(0,e)}function Ve(t,e,n=0,r=!1,i=!1){return function(o,s){let a=qL(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return zL(a,e);let u=cc(s,Zn.MinusSign);return an(a,e,u,r,i)}}function qL(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new x(2301,!1)}}function we(t,e,n=lt.Format,r=!1){return function(i,o){return GL(i,o,t,e,n,r)}}function GL(t,e,n,r,i,o){switch(n){case 2:return LC(e,i,r)[t.getMonth()];case 1:return xC(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=jC(e),h=UC(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,C]=m,R=s>=y.hours&&a>=y.minutes,S=s<C.hours||s===C.hours&&a<C.minutes;if(y.hours<C.hours){if(R&&S)return!0}else if(R||S)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return OC(e,i,r)[s<12?0:1];case 3:return FC(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new x(2302,!1)}}function Sd(t){return function(e,n,r){let i=-1*r,o=cc(n,Zn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+an(s,2,o)+an(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+an(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+an(s,2,o)+":"+an(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+an(s,2,o)+":"+an(Math.abs(i%60),2,o);default:throw new x(2310,!1)}}}var WL=0,Rd=4;function KL(t){let e=Nd(t,WL,1).getDay();return Nd(t,0,1+(e<=Rd?Rd:Rd+7)-e)}function $C(t){let e=t.getDay(),n=e===0?-3:Rd-e;return Nd(t.getFullYear(),t.getMonth(),t.getDate()+n)}function ry(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=$C(n),s=KL(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return an(i,t,cc(r,Zn.MinusSign))}}function Ad(t,e=!1){return function(n,r){let o=$C(n).getFullYear();return an(o,t,cc(r,Zn.MinusSign),e)}}var iy={};function QL(t){if(iy[t])return iy[t];let e;switch(t){case"G":case"GG":case"GGG":e=we(3,_e.Abbreviated);break;case"GGGG":e=we(3,_e.Wide);break;case"GGGGG":e=we(3,_e.Narrow);break;case"y":e=Ve(0,1,0,!1,!0);break;case"yy":e=Ve(0,2,0,!0,!0);break;case"yyy":e=Ve(0,3,0,!1,!0);break;case"yyyy":e=Ve(0,4,0,!1,!0);break;case"Y":e=Ad(1);break;case"YY":e=Ad(2,!0);break;case"YYY":e=Ad(3);break;case"YYYY":e=Ad(4);break;case"M":case"L":e=Ve(1,1,1);break;case"MM":case"LL":e=Ve(1,2,1);break;case"MMM":e=we(2,_e.Abbreviated);break;case"MMMM":e=we(2,_e.Wide);break;case"MMMMM":e=we(2,_e.Narrow);break;case"LLL":e=we(2,_e.Abbreviated,lt.Standalone);break;case"LLLL":e=we(2,_e.Wide,lt.Standalone);break;case"LLLLL":e=we(2,_e.Narrow,lt.Standalone);break;case"w":e=ry(1);break;case"ww":e=ry(2);break;case"W":e=ry(1,!0);break;case"d":e=Ve(2,1);break;case"dd":e=Ve(2,2);break;case"c":case"cc":e=Ve(7,1);break;case"ccc":e=we(1,_e.Abbreviated,lt.Standalone);break;case"cccc":e=we(1,_e.Wide,lt.Standalone);break;case"ccccc":e=we(1,_e.Narrow,lt.Standalone);break;case"cccccc":e=we(1,_e.Short,lt.Standalone);break;case"E":case"EE":case"EEE":e=we(1,_e.Abbreviated);break;case"EEEE":e=we(1,_e.Wide);break;case"EEEEE":e=we(1,_e.Narrow);break;case"EEEEEE":e=we(1,_e.Short);break;case"a":case"aa":case"aaa":e=we(0,_e.Abbreviated);break;case"aaaa":e=we(0,_e.Wide);break;case"aaaaa":e=we(0,_e.Narrow);break;case"b":case"bb":case"bbb":e=we(0,_e.Abbreviated,lt.Standalone,!0);break;case"bbbb":e=we(0,_e.Wide,lt.Standalone,!0);break;case"bbbbb":e=we(0,_e.Narrow,lt.Standalone,!0);break;case"B":case"BB":case"BBB":e=we(0,_e.Abbreviated,lt.Format,!0);break;case"BBBB":e=we(0,_e.Wide,lt.Format,!0);break;case"BBBBB":e=we(0,_e.Narrow,lt.Format,!0);break;case"h":e=Ve(3,1,-12);break;case"hh":e=Ve(3,2,-12);break;case"H":e=Ve(3,1);break;case"HH":e=Ve(3,2);break;case"m":e=Ve(4,1);break;case"mm":e=Ve(4,2);break;case"s":e=Ve(5,1);break;case"ss":e=Ve(5,2);break;case"S":e=Ve(6,1);break;case"SS":e=Ve(6,2);break;case"SSS":e=Ve(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Sd(0);break;case"ZZZZZ":e=Sd(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Sd(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Sd(2);break;default:return null}return iy[t]=e,e}function HC(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function YL(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function JL(t,e,n){let i=t.getTimezoneOffset(),o=HC(e,i);return YL(t,-1*(o-i))}function ZL(t){if(NC(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Nd(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match($L))return XL(r)}let e=new Date(t);if(!NC(e))throw new x(2311,!1);return e}function XL(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function NC(t){return t instanceof Date&&!isNaN(t.valueOf())}var Md=class{$implicit;ngForOf;index;count;constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},zC=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Md(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),MC(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);MC(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Fe(Vi),Fe(Za),Fe(ey))};static \u0275dir=Fr({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function MC(t,e){t.context.$implicit=e.item}var eF=(()=>{class t{_viewContainer;_context=new Pd;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){PC(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){PC(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Fe(Vi),Fe(Za))};static \u0275dir=Fr({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Pd=class{$implicit=null;ngIf=null};function PC(t,e){if(t&&!t.createEmbeddedView)throw new x(2020,!1)}function tF(t,e){return new x(2100,!1)}var nF="mediumDate",qC=new j(""),GC=new j(""),rF=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??nF,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return BC(n,s,o||this.locale,a)}catch(s){throw tF(t,s.message)}}static \u0275fac=function(r){return new(r||t)(Fe(nc,16),Fe(qC,24),Fe(GC,24))};static \u0275pipe=Fm({name:"date",type:t,pure:!0})}return t})();var WC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=ji({type:t});static \u0275inj=br({})}return t})();function kd(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ui=class{};var KC="browser";var uc=class{_doc;constructor(e){this._doc=e}manager},Od=(()=>{class t extends uc{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(q(Le))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),Fd=new j(""),cy=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Od));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Od);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(q(Fd),q(De))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),oy="ng-app-id";function QC(t){for(let e of t)e.remove()}function YC(t,e){let n=e.createElement("style");return n.textContent=t,n}function oF(t,e,n,r){let i=t.head?.querySelectorAll(`style[${oy}="${e}"],link[${oy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(oy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function ay(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var uy=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,oF(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,YC);r?.forEach(i=>this.addUsage(i,this.external,ay))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(QC(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])QC(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,YC(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,ay(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(q(Le),q(id),q(sd,8),q(Li))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),sy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ly=/%COMP%/g;var ZC="%COMP%",sF=`_nghost-${ZC}`,aF=`_ngcontent-${ZC}`,cF=!0,uF=new j("",{factory:()=>cF});function lF(t){return aF.replace(ly,t)}function dF(t){return sF.replace(ly,t)}function XC(t,e){return e.map(n=>n.replace(ly,t))}var dy=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.defaultRenderer=new lc(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Ld?i.applyToHost(n):i instanceof dc&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case sn.Emulated:o=new Ld(u,l,r,this.appId,h,s,a,p);break;case sn.ShadowDom:return new xd(u,n,r,s,a,this.nonce,p,l);case sn.ExperimentalIsolatedShadowDom:return new xd(u,n,r,s,a,this.nonce,p);default:o=new dc(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(q(cy),q(uy),q(id),q(uF),q(Le),q(De),q(sd),q(Fi,8))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),lc=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(sy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(JC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(JC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new x(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=sy[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=sy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(In.DashCase|In.Important)?e.style.setProperty(n,r,i&In.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&In.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Yn().getGlobalEventTarget(this.doc,e),!e))throw new x(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function JC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var xd=class extends lc{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,u){super(e,i,o,a),this.hostEl=n,this.sharedStylesHost=u,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let l=r.styles;l=XC(r.id,l);for(let p of l){let m=document.createElement("style");s&&m.setAttribute("nonce",s),m.textContent=p,this.shadowRoot.appendChild(m)}let h=r.getExternalStyles?.();if(h)for(let p of h){let m=ay(p,i);s&&m.setAttribute("nonce",s),this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},dc=class extends lc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?XC(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Ho.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Ld=class extends dc{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,n,r,o,s,a,u,l),this.contentAttr=lF(l),this.hostAttr=dF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Vd=class t extends ic{supportsDOMEvents=!0;static makeCurrent(){ty(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=hF();return n==null?null:fF(n)}resetBaseElement(){hc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return kd(document.cookie,e)}},hc=null;function hF(){return hc=hc||document.head.querySelector("base"),hc?hc.getAttribute("href"):null}function fF(t){return new URL(t,document.baseURI).pathname}var pF=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),eS=["alt","control","meta","shift"],gF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},tS=(()=>{class t extends uc{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),eS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=gF[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),eS.forEach(s=>{if(s!==i){let a=mF[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(q(Le))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})();function yF(t,e,n){let r=V({rootComponent:t,platformRef:n?.platformRef},vF(e));return DC(r)}function vF(t){return{appProviders:[...TF,...t?.providers??[]],platformProviders:wF}}function _F(){Vd.makeCurrent()}function EF(){return new Gn}function IF(){return mm(document),document}var wF=[{provide:Li,useValue:KC},{provide:od,useValue:_F,multi:!0},{provide:Le,useFactory:IF}];var TF=[{provide:Ra,useValue:"root"},{provide:Gn,useFactory:EF},{provide:Fd,useClass:Od,multi:!0},{provide:Fd,useClass:tS,multi:!0},dy,uy,cy,{provide:ki,useExisting:dy},{provide:Ui,useClass:pF},[]];var jr=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var fy=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},py=class{encodeKey(e){return nS(e)}encodeValue(e){return nS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function DF(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(a),n.set(s,u)}),n}var bF=/%(\d[a-f0-9])/gi,CF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function nS(t){return encodeURIComponent(t).replace(bF,(e,n)=>CF[n]??e)}function jd(t){return`${t}`}var Xn=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new py,e.fromString){if(e.fromObject)throw new x(2805,!1);this.map=DF(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(jd):[jd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(jd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(jd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function SF(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function rS(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function iS(t){return typeof Blob<"u"&&t instanceof Blob}function oS(t){return typeof FormData<"u"&&t instanceof FormData}function AF(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var sS="Content-Type",aS="Accept",cS="text/plain",uS="application/json",RF=`${uS}, ${cS}, */*`,Xo=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(SF(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new x(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new jr,this.context??=new fy,!this.params)this.params=new Xn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||rS(this.body)||iS(this.body)||oS(this.body)||AF(this.body)?this.body:this.body instanceof Xn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||oS(this.body)?null:iS(this.body)?this.body.type||null:rS(this.body)?null:typeof this.body=="string"?cS:this.body instanceof Xn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?uS:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,u=e.mode||this.mode,l=e.redirect||this.redirect,h=e.credentials||this.credentials,p=e.referrer||this.referrer,m=e.integrity||this.integrity,y=e.referrerPolicy||this.referrerPolicy,C=e.transferCache??this.transferCache,R=e.timeout??this.timeout,S=e.body!==void 0?e.body:this.body,M=e.withCredentials??this.withCredentials,U=e.reportProgress??this.reportProgress,z=e.headers||this.headers,W=e.params||this.params,Pe=e.context??this.context;return e.setHeaders!==void 0&&(z=Object.keys(e.setHeaders).reduce((ae,w)=>ae.set(w,e.setHeaders[w]),z)),e.setParams&&(W=Object.keys(e.setParams).reduce((ae,w)=>ae.set(w,e.setParams[w]),W)),new t(n,r,S,{params:W,headers:z,context:Pe,reportProgress:U,responseType:i,withCredentials:M,transferCache:C,keepalive:o,cache:a,priority:s,timeout:R,mode:u,redirect:l,credentials:h,referrer:p,integrity:m,referrerPolicy:y})}},Bi=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(Bi||{}),fc=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,n=200,r="OK"){this.headers=e.headers||new jr,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},gy=class t extends fc{constructor(e={}){super(e)}type=Bi.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},pc=class t extends fc{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Bi.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},es=class extends fc{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},NF=200,MF=204;var PF=/^\)\]\}',?\n/;var kF=(()=>{class t{xhrFactory;tracingService=k(Fi,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new x(-2800,!1);let r=this.xhrFactory;return re(null).pipe(Ht(()=>new te(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((S,M)=>s.setRequestHeader(S,M.join(","))),n.headers.has(aS)||s.setRequestHeader(aS,RF),!n.headers.has(sS)){let S=n.detectContentTypeHeader();S!==null&&s.setRequestHeader(sS,S)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let S=n.responseType.toLowerCase();s.responseType=S!=="json"?S:"text"}let a=n.serializeBody(),u=null,l=()=>{if(u!==null)return u;let S=s.statusText||"OK",M=new jr(s.getAllResponseHeaders()),U=s.responseURL||n.url;return u=new gy({headers:M,status:s.status,statusText:S,url:U}),u},h=this.maybePropagateTrace(()=>{let{headers:S,status:M,statusText:U,url:z}=l(),W=null;M!==MF&&(W=typeof s.response>"u"?s.responseText:s.response),M===0&&(M=W?NF:0);let Pe=M>=200&&M<300;if(n.responseType==="json"&&typeof W=="string"){let ae=W;W=W.replace(PF,"");try{W=W!==""?JSON.parse(W):null}catch(w){W=ae,Pe&&(Pe=!1,W={error:w,text:W})}}Pe?(o.next(new pc({body:W,headers:S,status:M,statusText:U,url:z||void 0})),o.complete()):o.error(new es({error:W,headers:S,status:M,statusText:U,url:z||void 0}))}),p=this.maybePropagateTrace(S=>{let{url:M}=l(),U=new es({error:S,status:s.status||0,statusText:s.statusText||"Unknown Error",url:M||void 0});o.error(U)}),m=p;n.timeout&&(m=this.maybePropagateTrace(S=>{let{url:M}=l(),U=new es({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:M||void 0});o.error(U)}));let y=!1,C=this.maybePropagateTrace(S=>{y||(o.next(l()),y=!0);let M={type:Bi.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(M.total=S.total),n.responseType==="text"&&s.responseText&&(M.partialText=s.responseText),o.next(M)}),R=this.maybePropagateTrace(S=>{let M={type:Bi.UploadProgress,loaded:S.loaded};S.lengthComputable&&(M.total=S.total),o.next(M)});return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",m),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",C),a!==null&&s.upload&&s.upload.addEventListener("progress",R)),s.send(a),o.next({type:Bi.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",m),n.reportProgress&&(s.removeEventListener("progress",C),a!==null&&s.upload&&s.upload.removeEventListener("progress",R)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(q(Ui))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function OF(t,e){return e(t)}function xF(t,e,n){return(r,i)=>ke(n,()=>e(r,o=>t(o,i)))}var LF=new j("",{factory:()=>[]}),lS=new j(""),FF=new j("",{factory:()=>!0});var VF=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=q(kF),i},providedIn:"root"})}return t})();var jF=(()=>{class t{backend;injector;chain=null;pendingTasks=k(Or);contributeToStability=k(FF);constructor(n,r){this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(LF),...this.injector.get(lS,[])]));this.chain=r.reduceRight((i,o)=>xF(i,o,this.injector),OF)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(_a(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(q(VF),q(Se))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),UF=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=q(jF),i},providedIn:"root"})}return t})();function hy(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer,referrerPolicy:t.referrerPolicy}}var BF=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Xo)o=n;else{let u;i.headers instanceof jr?u=i.headers:u=new jr(i.headers);let l;i.params&&(i.params instanceof Xn?l=i.params:l=new Xn({fromObject:i.params})),o=new Xo(n,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let s=re(o).pipe(No(u=>this.handler.handle(u)));if(n instanceof Xo||i.observe==="events")return s;let a=s.pipe($t(u=>u instanceof pc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ye(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new x(2806,!1);return u.body}));case"blob":return a.pipe(ye(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new x(2807,!1);return u.body}));case"text":return a.pipe(ye(u=>{if(u.body!==null&&typeof u.body!="string")throw new x(2808,!1);return u.body}));case"json":default:return a.pipe(ye(u=>u.body))}case"response":return a;default:throw new x(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Xn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,hy(i,r))}post(n,r,i={}){return this.request("POST",n,hy(i,r))}put(n,r,i={}){return this.request("PUT",n,hy(i,r))}static \u0275fac=function(r){return new(r||t)(q(UF))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var dS=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(q(Le))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Q="primary",Sc=Symbol("RouteTitle"),Ey=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function qi(t){return new Ey(t)}function ES(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function qd(t){return new Promise((e,n)=>{t.pipe(Hn()).subscribe({next:r=>e(r),error:r=>n(r)})})}function HF(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Dn(t[n],e[n]))return!1;return!0}function Dn(t,e){let n=t?Iy(t):void 0,r=e?Iy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!IS(t[i],e[i]))return!1;return!0}function Iy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function IS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function wS(t){return t.length>0?t[t.length-1]:null}function Wi(t){return ul(t)?t:Qo(t)?qe(Promise.resolve(t)):re(t)}function TS(t){return ul(t)?qd(t):Promise.resolve(t)}var zF={exact:bS,subset:CS},DS={exact:qF,subset:GF,ignored:()=>!0};function hS(t,e,n){return zF[n.paths](t.root,e.root,n.matrixParams)&&DS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function qF(t,e){return Dn(t,e)}function bS(t,e,n){if(!Hi(t.segments,e.segments)||!$d(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!bS(t.children[r],e.children[r],n))return!1;return!0}function GF(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>IS(t[n],e[n]))}function CS(t,e,n){return SS(t,e,e.segments,n)}function SS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Hi(i,n)||e.hasChildren()||!$d(i,n,r))}else if(t.segments.length===n.length){if(!Hi(t.segments,n)||!$d(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!CS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Hi(t.segments,i)||!$d(t.segments,i,r)||!t.children[Q]?!1:SS(t.children[Q],e,o,r)}}function $d(t,e,n){return e.every((r,i)=>DS[n](t[i].parameters,r.parameters))}var un=class{root;queryParams;fragment;_queryParamMap;constructor(e=new he([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=qi(this.queryParams),this._queryParamMap}toString(){return QF.serialize(this)}},he=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hd(this)}},Ur=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=qi(this.parameters),this._parameterMap}toString(){return RS(this)}};function WF(t,e){return Hi(t,e)&&t.every((n,r)=>Dn(n.parameters,e[r].parameters))}function Hi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function KF(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Q&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Q&&(n=n.concat(e(i,r)))}),n}var Ac=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new Br,providedIn:"root"})}return t})(),Br=class{parse(e){let n=new Ty(e);return new un(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${gc(e.root,!0)}`,r=ZF(e.queryParams),i=typeof e.fragment=="string"?`#${YF(e.fragment)}`:"";return`${n}${r}${i}`}},QF=new Br;function Hd(t){return t.segments.map(e=>RS(e)).join("/")}function gc(t,e){if(!t.hasChildren())return Hd(t);if(e){let n=t.children[Q]?gc(t.children[Q],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Q&&r.push(`${i}:${gc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=KF(t,(r,i)=>i===Q?[gc(t.children[Q],!1)]:[`${i}:${gc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Q]!=null?`${Hd(t)}/${n[0]}`:`${Hd(t)}/(${n.join("//")})`}}function AS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ud(t){return AS(t).replace(/%3B/gi,";")}function YF(t){return encodeURI(t)}function wy(t){return AS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zd(t){return decodeURIComponent(t)}function fS(t){return zd(t.replace(/\+/g,"%20"))}function RS(t){return`${wy(t.path)}${JF(t.parameters)}`}function JF(t){return Object.entries(t).map(([e,n])=>`;${wy(e)}=${wy(n)}`).join("")}function ZF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ud(n)}=${Ud(i)}`).join("&"):`${Ud(n)}=${Ud(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var XF=/^[^\/()?;#]+/;function my(t){let e=t.match(XF);return e?e[0]:""}var eV=/^[^\/()?;=#]+/;function tV(t){let e=t.match(eV);return e?e[0]:""}var nV=/^[^=?&#]+/;function rV(t){let e=t.match(nV);return e?e[0]:""}var iV=/^[^&#]+/;function oV(t){let e=t.match(iV);return e?e[0]:""}var Ty=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new he([],{}):new he([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Q]=new he(e,n)),r}parseSegment(){let e=my(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new Ur(zd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=tV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=my(this.remaining);i&&(r=i,this.capture(r))}e[zd(n)]=zd(r)}parseQueryParam(e){let n=rV(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=oV(this.remaining);s&&(r=s,this.capture(r))}let i=fS(n),o=fS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=my(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new x(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Q);let s=this.parseChildren();n[o??Q]=Object.keys(s).length===1&&s[Q]?s[Q]:new he([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}};function NS(t){return t.segments.length>0?new he([],{[Q]:t}):t}function MS(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=MS(i);if(r===Q&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new he(t.segments,e);return sV(n)}function sV(t){if(t.numberOfChildren===1&&t.children[Q]){let e=t.children[Q];return new he(t.segments.concat(e.segments),e.children)}return t}function $r(t){return t instanceof un}function PS(t,e,n=null,r=null,i=new Br){let o=kS(t);return OS(o,e,n,r,i)}function kS(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new he(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=NS(r);return e??i}function OS(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return yy(o,o,o,n,r,i);let s=aV(e);if(s.toRoot())return yy(o,o,new he([],{}),n,r,i);let a=cV(s,o,t),u=a.processChildren?yc(a.segmentGroup,a.index,s.commands):LS(a.segmentGroup,a.index,s.commands);return yy(o,a.segmentGroup,u,n,r,i)}function Gd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ec(t){return typeof t=="object"&&t!=null&&t.outlets}function pS(t,e,n){t||="\u0275";let r=new un;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function yy(t,e,n,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>pS(l,p,o)):pS(l,h,o);let a;t===e?a=n:a=xS(t,e,n);let u=NS(MS(a));return new un(u,s,i)}function xS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=xS(o,e,n)}),new he(t.segments,r)}var Wd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Gd(r[0]))throw new x(4003,!1);let i=r.find(Ec);if(i&&i!==wS(r))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function aV(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Wd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Wd(n,e,r)}var ns=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function cV(t,e,n){if(t.isAbsolute)return new ns(e,!0,0);if(!n)return new ns(e,!1,NaN);if(n.parent===null)return new ns(n,!0,0);let r=Gd(t.commands[0])?0:1,i=n.segments.length-1+r;return uV(n,i,t.numberOfDoubleDots)}function uV(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new x(4005,!1);i=r.segments.length}return new ns(r,!1,i-o)}function lV(t){return Ec(t[0])?t[0].outlets:{[Q]:t}}function LS(t,e,n){if(t??=new he([],{}),t.segments.length===0&&t.hasChildren())return yc(t,e,n);let r=dV(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new he(t.segments.slice(0,r.pathIndex),{});return o.children[Q]=new he(t.segments.slice(r.pathIndex),t.children),yc(o,0,i)}else return r.match&&i.length===0?new he(t.segments,{}):r.match&&!t.hasChildren()?Dy(t,e,n):r.match?yc(t,0,i):Dy(t,e,n)}function yc(t,e,n){if(n.length===0)return new he(t.segments,{});{let r=lV(n),i={};if(Object.keys(r).some(o=>o!==Q)&&t.children[Q]&&t.numberOfChildren===1&&t.children[Q].segments.length===0){let o=yc(t.children[Q],e,n);return new he(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=LS(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new he(t.segments,i)}}function dV(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Ec(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!mS(u,l,s))return o;r+=2}else{if(!mS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Dy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Ec(o)){let u=hV(o.outlets);return new he(r,u)}if(i===0&&Gd(n[0])){let u=t.segments[e];r.push(new Ur(u.path,gS(n[0]))),i++;continue}let s=Ec(o)?o.outlets[Q]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Gd(a)?(r.push(new Ur(s,gS(a))),i+=2):(r.push(new Ur(s,{})),i++)}return new he(r,{})}function hV(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Dy(new he([],{}),0,r))}),e}function gS(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function mS(t,e,n){return t==n.path&&Dn(e,n.parameters)}var vc="imperative",Ke=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ke||{}),jt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Gi=class extends jt{type=Ke.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Cn=class extends jt{urlAfterRedirects;type=Ke.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},wt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(wt||{}),Ic=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Ic||{}),bn=class extends jt{reason;code;type=Ke.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},er=class extends jt{reason;code;type=Ke.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},is=class extends jt{error;target;type=Ke.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wc=class extends jt{urlAfterRedirects;state;type=Ke.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kd=class extends jt{urlAfterRedirects;state;type=Ke.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qd=class extends jt{urlAfterRedirects;state;shouldActivate;type=Ke.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Yd=class extends jt{urlAfterRedirects;state;type=Ke.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jd=class extends jt{urlAfterRedirects;state;type=Ke.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zd=class{route;type=Ke.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xd=class{route;type=Ke.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},eh=class{snapshot;type=Ke.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},th=class{snapshot;type=Ke.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nh=class{snapshot;type=Ke.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rh=class{snapshot;type=Ke.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Tc=class{},os=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function fV(t){return!(t instanceof Tc)&&!(t instanceof os)}function pV(t,e){return t.providers&&!t._injector&&(t._injector=ec(t.providers,e,`Route: ${t.path}`)),t._injector??e}function cn(t){return t.outlet||Q}function gV(t,e){let n=t.filter(r=>cn(r)===e);return n.push(...t.filter(r=>cn(r)!==e)),n}function cs(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ih=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return cs(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new us(this.rootInjector)}},us=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new ih(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(q(Se))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),oh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=by(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=by(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Cy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Cy(e,this._root).map(n=>n.value)}};function by(t,e){if(t===e.value)return e;for(let n of e.children){let r=by(t,n);if(r)return r}return null}function Cy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Cy(t,n);if(r.length)return r.unshift(e),r}return[]}var Vt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ts(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Dc=class extends oh{snapshot;constructor(e,n){super(e),this.snapshot=n,Py(this,e)}toString(){return this.snapshot.toString()}};function FS(t){let e=mV(t),n=new et([new Ur("",{})]),r=new et({}),i=new et({}),o=new et({}),s=new et(""),a=new tr(n,r,o,s,i,Q,t,e.root);return a.snapshot=e.root,new Dc(new Vt(a,[]),e)}function mV(t){let e={},n={},r={},o=new zi([],e,r,"",n,Q,t,null,{});return new bc("",new Vt(o,[]))}var tr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ye(l=>l[Sc]))??re(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ye(e=>qi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ye(e=>qi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function sh(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&jS(i)&&(r.resolve[Sc]=i.title),r}var zi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Sc]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},bc=class extends oh{url;constructor(e,n){super(n),this.url=e,Py(this,n)}toString(){return VS(this._root)}};function Py(t,e){e.value._routerState=t,e.children.forEach(n=>Py(t,n))}function VS(t){let e=t.children.length>0?` { ${t.children.map(VS).join(", ")} } `:"";return`${t.value}${e}`}function vy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Dn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Dn(e.params,n.params)||t.paramsSubject.next(n.params),HF(e.url,n.url)||t.urlSubject.next(n.url),Dn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Sy(t,e){let n=Dn(t.params,e.params)&&WF(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Sy(t.parent,e.parent))}function jS(t){return typeof t.title=="string"||t.title===null}var US=new j(""),ky=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Q;activateEvents=new Et;deactivateEvents=new Et;attachEvents=new Et;detachEvents=new Et;routerOutletData=TC();parentContexts=k(us);location=k(Vi);changeDetector=k(wd);inputBinder=k(lh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Ay(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Fr({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wo]})}return t})(),Ay=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===tr?this.route:e===us?this.childContexts:e===US?this.outletData:this.parent.get(e,n)}},lh=new j("");var Oy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Lm({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&yd(0,"router-outlet")},dependencies:[ky],encapsulation:2})}return t})();function xy(t){let e=t.children&&t.children.map(xy),n=e?Ie(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Q&&(n.component=Oy),n}function yV(t,e,n){let r=Cc(t,e._root,n?n._root:void 0);return new Dc(r,e)}function Cc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=vV(t,e,n);return new Vt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Cc(t,a)),s}}let r=_V(e.value),i=e.children.map(o=>Cc(t,o));return new Vt(r,i)}}function vV(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Cc(t,r,i);return Cc(t,r)})}function _V(t){return new tr(new et(t.url),new et(t.params),new et(t.queryParams),new et(t.fragment),new et(t.data),t.outlet,t.component,t)}var ss=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},BS="ngNavigationCancelingError";function ah(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=$r(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$S(!1,wt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $S(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[BS]=!0,n.cancellationCode=e,n}function EV(t){return HS(t)&&$r(t.url)}function HS(t){return!!t&&t[BS]}var IV=(t,e,n,r)=>ye(i=>(new Ry(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ry=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),vy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ts(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ts(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=ts(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ts(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new rh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new th(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(vy(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),vy(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},ch=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},rs=class{component;route;constructor(e,n){this.component=e,this.route=n}};function wV(t,e,n){let r=t._root,i=e?e._root:null;return mc(r,i,n,[r.value])}function TV(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ls(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!rg(t)?t:e.get(t):r}function mc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ts(e);return t.children.forEach(s=>{DV(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>_c(a,n.getContext(s),i)),i}function DV(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=bV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ch(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?mc(t,e,a?a.children:null,r,i):mc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new rs(a.outlet.component,s))}else s&&_c(e,a,i),i.canActivateChecks.push(new ch(r)),o.component?mc(t,null,a?a.children:null,r,i):mc(t,null,n,r,i);return i}function bV(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Hi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Hi(t.url,e.url)||!Dn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sy(t,e)||!Dn(t.queryParams,e.queryParams);case"paramsChange":default:return!Sy(t,e)}}function _c(t,e,n){let r=ts(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?_c(s,e.children.getContext(o),n):_c(s,null,n):_c(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new rs(e.outlet.component,i)):n.canDeactivateChecks.push(new rs(null,i)):n.canDeactivateChecks.push(new rs(null,i))}function Rc(t){return typeof t=="function"}function CV(t){return typeof t=="boolean"}function SV(t){return t&&Rc(t.canLoad)}function AV(t){return t&&Rc(t.canActivate)}function RV(t){return t&&Rc(t.canActivateChild)}function NV(t){return t&&Rc(t.canDeactivate)}function MV(t){return t&&Rc(t.canMatch)}function zS(t){return t instanceof Bn||t?.name==="EmptyError"}var Bd=Symbol("INITIAL_VALUE");function as(){return Ht(t=>xp(t.map(e=>e.pipe($n(1),Fp(Bd)))).pipe(ye(e=>{for(let n of e)if(n!==!0){if(n===Bd)return Bd;if(n===!1||PV(n))return n}return!0}),$t(e=>e!==Bd),$n(1)))}function PV(t){return $r(t)||t instanceof ss}function qS(t){return t.aborted?re(void 0).pipe($n(1)):new te(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function GS(t){return Ea(qS(t))}function kV(t,e){return yt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?re(Ie(V({},n),{guardsResult:!0})):OV(s,r,i,t).pipe(yt(a=>a&&CV(a)?xV(r,o,t,e):re(a)),ye(a=>Ie(V({},n),{guardsResult:a})))})}function OV(t,e,n,r){return qe(t).pipe(yt(i=>UV(i.component,i.route,n,e,r)),Hn(i=>i!==!0,!0))}function xV(t,e,n,r){return qe(e).pipe(No(i=>Ro(FV(i.route.parent,r),LV(i.route,r),jV(t,i.path,n),VV(t,i.route,n))),Hn(i=>i!==!0,!0))}function LV(t,e){return t!==null&&e&&e(new nh(t)),re(!0)}function FV(t,e){return t!==null&&e&&e(new eh(t)),re(!0)}function VV(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(o=>ya(()=>{let s=cs(e)??n,a=ls(o,s),u=AV(a)?a.canActivate(e,t):ke(s,()=>a(e,t));return Wi(u).pipe(Hn())}));return re(i).pipe(as())}function jV(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>TV(s)).filter(s=>s!==null).map(s=>ya(()=>{let a=s.guards.map(u=>{let l=cs(s.node)??n,h=ls(u,l),p=RV(h)?h.canActivateChild(r,t):ke(l,()=>h(r,t));return Wi(p).pipe(Hn())});return re(a).pipe(as())}));return re(o).pipe(as())}function UV(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let u=cs(e)??i,l=ls(a,u),h=NV(l)?l.canDeactivate(t,e,n,r):ke(u,()=>l(t,e,n,r));return Wi(h).pipe(Hn())});return re(s).pipe(as())}function BV(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return re(!0);let s=o.map(a=>{let u=ls(a,t),l=SV(u)?u.canLoad(e,n):ke(t,()=>u(e,n)),h=Wi(l);return i?h.pipe(GS(i)):h});return re(s).pipe(as(),WS(r))}function WS(t){return Sp(vt(e=>{if(typeof e!="boolean")throw ah(t,e)}),ye(e=>e===!0))}function $V(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let u=ls(a,t),l=MV(u)?u.canMatch(e,n):ke(t,()=>u(e,n)),h=Wi(l);return i?h.pipe(GS(i)):h});return re(s).pipe(as(),WS(r))}var $i=class KS extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,KS.prototype)}},Ny=class QS extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,QS.prototype)}};function HV(t){throw new x(4e3,!1)}function zV(t){throw $S(!1,wt.GuardRejected)}var qV=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Q])throw HV(`${e.redirectTo}`);i=i.children[Q]}}async applyRedirectCommands(e,n,r,i,o){let s=await GV(n,i,o);if(s instanceof un)throw new Ny(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Ny(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new un(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new he(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new x(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function GV(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return qd(Wi(ke(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var My={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WV(t,e,n,r,i,o){let s=YS(t,e,n);return s.matched?(r=pV(e,r),$V(r,e,n,i,o).pipe(ye(a=>a===!0?s:V({},My)))):re(s)}function YS(t,e,n){if(e.path==="**")return KV(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},My):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||ES)(n,t,e);if(!i)return V({},My);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function KV(t){return{matched:!0,parameters:t.length>0?wS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function yS(t,e,n,r){return n.length>0&&JV(t,n,r)?{segmentGroup:new he(e,YV(r,new he(n,t.children))),slicedSegments:[]}:n.length===0&&ZV(t,n,r)?{segmentGroup:new he(t.segments,QV(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new he(t.segments,t.children),slicedSegments:n}}function QV(t,e,n,r){let i={};for(let o of n)if(dh(t,e,o)&&!r[cn(o)]){let s=new he([],{});i[cn(o)]=s}return V(V({},r),i)}function YV(t,e){let n={};n[Q]=e;for(let r of t)if(r.path===""&&cn(r)!==Q){let i=new he([],{});n[cn(r)]=i}return n}function JV(t,e,n){return n.some(r=>dh(t,e,r)&&cn(r)!==Q)}function ZV(t,e,n){return n.some(r=>dh(t,e,r))}function dh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function XV(t,e,n){return e.length===0&&!t.children[n]}var ej=class{};async function tj(t,e,n,r,i,o,s="emptyOnly",a){return new rj(t,e,n,r,i,s,o,a).recognize()}var nj=31,rj=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new qV(this.urlSerializer,this.urlTree)}noMatchError(e){return new x(4002,`'${e.segmentGroup}'`)}async recognize(){let e=yS(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new Vt(r,n),o=new bc("",i),s=PS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new zi([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Q,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Q,n),rootSnapshot:n}}catch(r){if(r instanceof Ny)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $i?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof Vt?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=gV(n,u),p=await this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let a=JS(s);return ij(a),a}async processSegment(e,n,r,i,o,s,a){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a)}catch(l){if(l instanceof $i||zS(l))continue;throw l}if(XV(r,i,o))return new ej;throw new $i(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,a,u){if(cn(r)!==s&&(s===Q||!dh(i,o,r)))throw new $i(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new $i(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=YS(n,i,o);if(!u)throw new $i(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>nj&&(this.allowRedirects=!1));let y=new zi(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,vS(i),cn(i),i.component??i._loadedComponent??null,i,_S(i)),C=sh(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let R=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),S=await this.applyRedirects.lineralizeSegments(i,R);return this.processSegment(e,r,n,S.concat(m),s,!1,a)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await qd(WV(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new $i(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=a,y=new zi(p,h,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,vS(r),cn(r),r.component??r._loadedComponent??null,r,_S(r)),C=sh(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data);let{segmentGroup:R,slicedSegments:S}=yS(n,p,m,u);if(S.length===0&&R.hasChildren()){let z=await this.processChildren(l,u,R,y);return new Vt(y,z)}if(u.length===0&&S.length===0)return new Vt(y,[]);let M=cn(r)===o,U=await this.processSegment(l,u,R,S,M?Q:o,!0,y);return new Vt(y,U instanceof Vt?[U]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await qd(BV(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw zV(n)}return{routes:[],injector:e}}};function ij(t){t.sort((e,n)=>e.value.outlet===Q?-1:n.value.outlet===Q?1:e.value.outlet.localeCompare(n.value.outlet))}function oj(t){let e=t.value.routeConfig;return e&&e.path===""}function JS(t){let e=[],n=new Set;for(let r of t){if(!oj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=JS(r.children);e.push(new Vt(r.value,i))}return e.filter(r=>!n.has(r))}function vS(t){return t.data||{}}function _S(t){return t.resolve||{}}var sj=new j("",{factory:()=>tj});function aj(t,e,n,r,i,o,s){let a=t.get(sj);return yt(u=>re(u).pipe(Ht(l=>a(t,e,n,r,l.extractedUrl,i,o,s)),ye(({state:l,tree:h})=>Ie(V({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function cj(t,e){return yt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return re(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of ZS(u))s.add(l);let a=0;return qe(s).pipe(No(u=>o.has(u)?uj(u,r,t,e):(u.data=sh(u,u.parent,t).resolve,re(void 0))),vt(()=>a++),fl(1),yt(u=>a===s.size?re(n):Ct))})}function ZS(t){let e=t.children.map(n=>ZS(n)).flat();return[t,...e]}function uj(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!jS(i)&&(o[Sc]=i.title),ya(()=>(t.data=sh(t,t.parent,n).resolve,lj(o,t,e,r).pipe(ye(s=>(t._resolvedData=s,t.data=V(V({},t.data),s),null)))))}function lj(t,e,n,r){let i=Iy(t);if(i.length===0)return re({});let o={};return qe(i).pipe(yt(s=>dj(t[s],e,n,r).pipe(Hn(),vt(a=>{if(a instanceof ss)throw ah(new Br,a);o[s]=a}))),fl(1),ye(()=>o),va(s=>zS(s)?Ct:Op(s)))}function dj(t,e,n,r){let i=cs(e)??r,o=ls(t,i),s=o.resolve?o.resolve(e,n):ke(i,()=>o(e,n));return Wi(s)}function _y(t){return Ht(e=>{let n=t(e);return n?qe(n).pipe(ye(()=>e)):re(e)})}var Ly=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Q);return r}getResolvedTitleForRoute(n){return n.data[Sc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(XS),providedIn:"root"})}return t})(),XS=(()=>{class t extends Ly{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(q(dS))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ds=new j("",{factory:()=>({})}),Nc=new j(""),eA=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(Wm);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await TS(ke(n,()=>r.loadComponent())),s=await rA(nA(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await tA(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function tA(t,e,n,r){let i=await TS(ke(n,()=>t.loadChildren())),o=await rA(nA(i)),s;o instanceof pd||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(n).injector,u=a.get(Nc,[],{optional:!0,self:!0}).flat()),{routes:u.map(xy),injector:a}}function hj(t){return t&&typeof t=="object"&&"default"in t}function nA(t){return hj(t)?t.default:t}async function rA(t){return t}var hh=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(fj),providedIn:"root"})}return t})(),fj=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iA=new j("");var pj=()=>{},oA=new j(""),sA=(()=>{class t{currentNavigation=kr(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=kr(null);events=new Xe;transitionAbortWithErrorSubject=new Xe;configLoader=k(eA);environmentInjector=k(Se);destroyRef=k(Kn);urlSerializer=k(Ac);rootContexts=k(us);location=k(Zo);inputBindingEnabled=k(lh,{optional:!0})!==null;titleStrategy=k(Ly);options=k(ds,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(hh);createViewTransition=k(iA,{optional:!0});navigationErrorHandler=k(oA,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>re(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Zd(i)),r=i=>this.events.next(new Xd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Qt(()=>{this.transitions?.next(Ie(V({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new et(null),this.transitions.pipe($t(r=>r!==null),Ht(r=>{let i=!1,o=new AbortController;return re(r).pipe(Ht(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",wt.SupersededByNewNavigation),Ct;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?Ie(V({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new er(s.id,this.urlSerializer.serialize(s.rawUrl),"",Ic.IgnoredSameUrlNavigation)),s.resolve(!1),Ct;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return re(s).pipe(Ht(h=>(this.events.next(new Gi(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Ct:Promise.resolve(h))),aj(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),vt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=h.urlAfterRedirects,m));let p=new wc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:y,extras:C}=s,R=new Gi(h,this.urlSerializer.serialize(p),m,y);this.events.next(R);let S=FS(this.rootComponentType).snapshot;return this.currentTransition=r=Ie(V({},s),{targetSnapshot:S,urlAfterRedirects:p,extras:Ie(V({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(M=>(M.finalUrl=p,M)),re(r)}else return this.events.next(new er(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Ic.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Ct}),vt(s=>{let a=new Kd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ye(s=>(this.currentTransition=r=Ie(V({},s),{guards:wV(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),kV(this.environmentInjector,s=>this.events.next(s)),vt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw ah(this.urlSerializer,s.guardsResult);let a=new Qd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),$t(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",wt.GuardRejected),!1)),_y(s=>{if(s.guards.canActivateChecks.length!==0)return re(s).pipe(vt(a=>{let u=new Yd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Ht(a=>{let u=!1;return re(a).pipe(cj(this.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",wt.NoDataFromResolver)}}))}),vt(a=>{let u=new Jd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),_y(s=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=cs(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)h.push(...a(p));return h},u=a(s.targetSnapshot.root);return u.length===0?re(s):qe(Promise.all(u).then(()=>s))}),_y(()=>this.afterPreactivation()),Ht(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?qe(u).pipe(ye(()=>r)):re(r)}),ye(s=>{let a=yV(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Ie(V({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),vt(()=>{this.events.next(new Tc)}),IV(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),$n(1),Ea(qS(o.signal).pipe($t(()=>!i&&!r.targetRouterState),vt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",wt.Aborted)}))),vt({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=pj,a)),this.lastSuccessfulNavigation.set(Qt(this.currentNavigation)),this.events.next(new Cn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Ea(this.transitionAbortWithErrorSubject.pipe(vt(s=>{throw s}))),_a(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",wt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),va(s=>{if(this.destroyed)return r.resolve(!1),Ct;if(i=!0,HS(s))this.events.next(new bn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),EV(s)?this.events.next(new os(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new is(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=ke(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof ss){let{message:l,cancellationCode:h}=ah(this.urlSerializer,u);this.events.next(new bn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new os(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Ct}))}))}cancelNavigationTransition(n,r,i){let o=new bn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Qt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function gj(t){return t!==vc}var aA=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(mj),providedIn:"root"})}return t})(),uh=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},mj=(()=>{class t extends uh{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qa(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Fy=(()=>{class t{urlSerializer=k(Ac);options=k(ds,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(Zo);urlHandlingStrategy=k(hh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new un;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof un?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=FS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>k(cA),providedIn:"root"})}return t})(),cA=(()=>{class t extends Fy{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Gi?this.updateStateMemento():n instanceof er?this.commitTransition(r):n instanceof wc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Tc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof bn&&n.code!==wt.SupersededByNewNavigation&&n.code!==wt.Redirect?this.restoreHistory(r):n instanceof is?this.restoreHistory(r,!0):n instanceof Cn&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Qa(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Vy(t,e){t.events.pipe($t(n=>n instanceof Cn||n instanceof bn||n instanceof is||n instanceof er),ye(n=>n instanceof Cn||n instanceof er?0:(n instanceof bn?n.code===wt.Redirect||n.code===wt.SupersededByNewNavigation:!1)?2:1),$t(n=>n!==2),$n(1)).subscribe(()=>{e()})}var yj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Mc=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(Vm);stateManager=k(Fy);options=k(ds,{optional:!0})||{};pendingTasks=k(Qn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(sA);urlSerializer=k(Ac);location=k(Zo);urlHandlingStrategy=k(hh);injector=k(Se);_events=new Xe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(aA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(Nc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(lh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ze;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Qt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof bn&&r.code!==wt.Redirect&&r.code!==wt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Cn)this.navigated=!0;else if(r instanceof os){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||gj(i.source)},s);this.scheduleNavigation(a,vc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}fV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),vc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(xt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Qt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(xy),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=kS(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return OS(p,n,h,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=$r(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,vc,null,r)}navigate(n,r={skipLocationChange:!1}){return _j(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(wi(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},yj):r===!1?i=V({},vj):i=r,$r(n))return hS(this.currentUrlTree,n,i);let o=this.parseUrl(n);return hS(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Vy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _j(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new x(4008,!1)}var uA=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=kr(null);get href(){return Qt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new Xe;applicationErrorHandler=k(xt);options=k(ds,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new Ed("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Cn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):($r(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:$r(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(Fe(Mc),Fe(tr),Ya("tabindex"),Fe(fd),Fe(Ja),Fe(Jo))};static \u0275dir=Fr({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&vd("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&md("href",i.reactiveHref(),_m)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Td],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Td],replaceUrl:[2,"replaceUrl","replaceUrl",Td],routerLink:"routerLink"},features:[Wo]})}return t})();var Ij=new j("");function wj(t,...e){return At([{provide:Nc,multi:!0,useValue:t},[],{provide:tr,useFactory:Tj},{provide:gd,multi:!0,useFactory:Dj},e.map(n=>n.\u0275providers)])}function Tj(){return k(Mc).routerState.root}function Dj(){let t=k(Ge);return e=>{let n=t.get(Yo);if(e!==n.components[0])return;let r=t.get(Mc),i=t.get(bj);t.get(Cj)===1&&r.initialNavigation(),t.get(Sj,null,{optional:!0})?.setUpPreloading(),t.get(Ij,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var bj=new j("",{factory:()=>new Xe}),Cj=new j("",{factory:()=>1});var Sj=new j("");var lA=()=>{};var fA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Aj=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},fh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Aj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Uy;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let C=l<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Uy=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Rj=function(t){let e=fA(t);return fh.encodeByteArray(e,!0)},kc=function(t){return Rj(t).replace(/\./g,"")},ph=function(t){try{return fh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $y(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Nj=()=>$y().__FIREBASE_DEFAULTS__,Mj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Pj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ph(t[1]);return e&&JSON.parse(e)},gh=()=>{try{return lA()||Nj()||Mj()||Pj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hy=t=>{var e,n;return(n=(e=gh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pA=t=>{let e=Hy(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zy=()=>{var t;return(t=gh())===null||t===void 0?void 0:t.config},qy=t=>{var e;return(e=gh())===null||e===void 0?void 0:e[`_${t}`]};var Ki=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Hr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mh(t){return(await fetch(t,{credentials:"include"})).ok}function gA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[kc(JSON.stringify(n)),kc(JSON.stringify(s)),""].join(".")}var Pc={};function kj(){let t={prod:[],emulator:[]};for(let e of Object.keys(Pc))Pc[e]?t.emulator.push(e):t.prod.push(e);return t}function Oj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var dA=!1;function yh(t,e){if(typeof window>"u"||typeof document>"u"||!Hr(window.location.host)||Pc[t]===e||Pc[t]||dA)return;Pc[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=kj().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{dA=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=Oj(r),y=n("text"),C=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),S=document.getElementById(R)||document.createElement("a"),M=n("preprendIcon"),U=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let z=m.element;a(z),h(S,R);let W=l();u(U,M),z.append(U,C,S,W),document.body.appendChild(z)}o?(C.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function xj(){var t;let e=(t=gh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _A(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EA(){let t=Qe();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IA(){return!xj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oc(){try{return typeof indexedDB=="object"}catch{return!1}}function wA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var Lj="FirebaseError",Ut=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Lj,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ln.prototype.create)}},ln=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Fj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ut(i,a,r)}};function Fj(t,e){return t.replace(Vj,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Vj=/\{\$([^}]+)}/g;function TA(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Sn(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(hA(o)&&hA(s)){if(!Sn(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function hA(t){return t!==null&&typeof t=="object"}function xc(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hs(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function fs(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DA(t,e){let n=new By(t,e);return n.subscribe.bind(n)}var By=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jj(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=jy),i.error===void 0&&(i.error=jy),i.complete===void 0&&(i.complete=jy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jj(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jy(){}var kte=14400*1e3;function dt(t){return t&&t._delegate?t._delegate:t}var Tt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Qi="[DEFAULT]";var Gy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ki;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bj(e))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qi){return this.instances.has(e)}getOptions(e=Qi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qi){return this.component?this.component.multipleInstances?e:Qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Uj(t){return t===Qi?void 0:t}function Bj(t){return t.instantiationMode==="EAGER"}var vh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Gy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var $j=[],oe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(oe||{}),Hj={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},zj=oe.INFO,qj={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},Gj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=qj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},An=class{constructor(e){this.name=e,this._logLevel=zj,this._logHandler=Gj,this._userLogHandler=null,$j.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var Wj=(t,e)=>e.some(n=>t instanceof n),bA,CA;function Kj(){return bA||(bA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qj(){return CA||(CA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var SA=new WeakMap,Ky=new WeakMap,AA=new WeakMap,Wy=new WeakMap,Yy=new WeakMap;function Yj(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Rn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&SA.set(n,t)}).catch(()=>{}),Yy.set(e,t),e}function Jj(t){if(Ky.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Ky.set(t,e)}var Qy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ky.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RA(t){Qy=t(Qy)}function Zj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(_h(this),e,...n);return AA.set(r,e.sort?e.sort():[e]),Rn(r)}:Qj().includes(t)?function(...e){return t.apply(_h(this),e),Rn(SA.get(this))}:function(...e){return Rn(t.apply(_h(this),e))}}function Xj(t){return typeof t=="function"?Zj(t):(t instanceof IDBTransaction&&Jj(t),Wj(t,Kj())?new Proxy(t,Qy):t)}function Rn(t){if(t instanceof IDBRequest)return Yj(t);if(Wy.has(t))return Wy.get(t);let e=Xj(t);return e!==t&&(Wy.set(t,e),Yy.set(e,t)),e}var _h=t=>Yy.get(t);function MA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=Rn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Rn(s.result),u.oldVersion,u.newVersion,Rn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var e2=["get","getKey","getAll","getAllKeys","count"],t2=["put","add","delete","clear"],Jy=new Map;function NA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jy.get(e))return Jy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=t2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||e2.includes(n)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Jy.set(e,o),o}RA(t=>Ie(V({},t),{get:(e,n,r)=>NA(e,n)||t.get(e,n,r),has:(e,n)=>!!NA(e,n)||t.has(e,n)}));var Xy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(n2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function n2(t){let e=t.getComponent();return e?.type==="VERSION"}var ev="@firebase/app",PA="0.13.2";var nr=new An("@firebase/app"),r2="@firebase/app-compat",i2="@firebase/analytics-compat",o2="@firebase/analytics",s2="@firebase/app-check-compat",a2="@firebase/app-check",c2="@firebase/auth",u2="@firebase/auth-compat",l2="@firebase/database",d2="@firebase/data-connect",h2="@firebase/database-compat",f2="@firebase/functions",p2="@firebase/functions-compat",g2="@firebase/installations",m2="@firebase/installations-compat",y2="@firebase/messaging",v2="@firebase/messaging-compat",_2="@firebase/performance",E2="@firebase/performance-compat",I2="@firebase/remote-config",w2="@firebase/remote-config-compat",T2="@firebase/storage",D2="@firebase/storage-compat",b2="@firebase/firestore",C2="@firebase/ai",S2="@firebase/firestore-compat",A2="firebase",R2="11.10.0";var tv="[DEFAULT]",N2={[ev]:"fire-core",[r2]:"fire-core-compat",[o2]:"fire-analytics",[i2]:"fire-analytics-compat",[a2]:"fire-app-check",[s2]:"fire-app-check-compat",[c2]:"fire-auth",[u2]:"fire-auth-compat",[l2]:"fire-rtdb",[d2]:"fire-data-connect",[h2]:"fire-rtdb-compat",[f2]:"fire-fn",[p2]:"fire-fn-compat",[g2]:"fire-iid",[m2]:"fire-iid-compat",[y2]:"fire-fcm",[v2]:"fire-fcm-compat",[_2]:"fire-perf",[E2]:"fire-perf-compat",[I2]:"fire-rc",[w2]:"fire-rc-compat",[T2]:"fire-gcs",[D2]:"fire-gcs-compat",[b2]:"fire-fst",[S2]:"fire-fst-compat",[C2]:"fire-vertex","fire-js":"fire-js",[A2]:"fire-js-all"};var Lc=new Map,M2=new Map,nv=new Map;function kA(t,e){try{t.container.addComponent(e)}catch(n){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dn(t){let e=t.name;if(nv.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;nv.set(e,t);for(let n of Lc.values())kA(n,t);for(let n of M2.values())kA(n,t);return!0}function ps(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mt(t){return t==null?!1:t.settings!==void 0}var P2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new ln("app","Firebase",P2);var rv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}};var qr=R2;function sv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:tv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw zr.create("bad-app-name",{appName:String(i)});if(n||(n=zy()),!n)throw zr.create("no-options");let o=Lc.get(i);if(o){if(Sn(n,o.options)&&Sn(r,o.config))return o;throw zr.create("duplicate-app",{appName:i})}let s=new vh(i);for(let u of nv.values())s.addComponent(u);let a=new rv(n,r,s);return Lc.set(i,a),a}function Yi(t=tv){let e=Lc.get(t);if(!e&&t===tv&&zy())return sv();if(!e)throw zr.create("no-app",{appName:t});return e}function Eh(){return Array.from(Lc.values())}function Ne(t,e,n){var r;let i=(r=N2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(a.join(" "));return}dn(new Tt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var k2="firebase-heartbeat-database",O2=1,Fc="firebase-heartbeat-store",Zy=null;function FA(){return Zy||(Zy=MA(k2,O2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fc)}catch(n){console.warn(n)}}}}).catch(t=>{throw zr.create("idb-open",{originalErrorMessage:t.message})})),Zy}async function x2(t){try{let n=(await FA()).transaction(Fc),r=await n.objectStore(Fc).get(VA(t));return await n.done,r}catch(e){if(e instanceof Ut)nr.warn(e.message);else{let n=zr.create("idb-get",{originalErrorMessage:e?.message});nr.warn(n.message)}}}async function OA(t,e){try{let r=(await FA()).transaction(Fc,"readwrite");await r.objectStore(Fc).put(e,VA(t)),await r.done}catch(n){if(n instanceof Ut)nr.warn(n.message);else{let r=zr.create("idb-set",{originalErrorMessage:n?.message});nr.warn(r.message)}}}function VA(t){return`${t.name}!${t.options.appId}`}var L2=1024,F2=30,iv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ov(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>F2){let s=j2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){nr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=xA(),{heartbeatsToSend:r,unsentEntries:i}=V2(this._heartbeatsCache.heartbeats),o=kc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return nr.warn(n),""}}};function xA(){return new Date().toISOString().substring(0,10)}function V2(t,e=L2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),LA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),LA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ov=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Oc()?wA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await x2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return OA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let i=await this.read();return OA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function LA(t){return kc(JSON.stringify({version:2,heartbeats:t})).length}function j2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function U2(t){dn(new Tt("platform-logger",e=>new Xy(e),"PRIVATE")),dn(new Tt("heartbeat",e=>new iv(e),"PRIVATE")),Ne(ev,PA,t),Ne(ev,PA,"esm2017"),Ne("fire-js","")}U2("");var B2="firebase",$2="11.10.0";Ne(B2,$2,"app");function jA(t){t===void 0&&(t=k(Ge));let e=t.get(Or);return n=>new te(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Gr=new ko("ANGULARFIRE2_VERSION");function Vc(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ms=(t,e)=>{let n=e?[e]:Eh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},gs=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(gs||{}),UA=Xm()&&typeof Zone<"u"?gs.WARN:gs.SILENT;var Ih=class{zone;delegate;constructor(e,n=Pp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Wr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=k(De);this.outsideAngular=n.runOutsideAngular(()=>new Ih(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Ih(typeof Zone>"u"?void 0:Zone.current,Mp))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),BA=!1;function H2(t,e){!BA&&(UA>gs.SILENT||Xm())&&(BA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),UA>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function z2(t){let e=k(De,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Ji(t){let e=k(De,{optional:!0});return e?e.run(()=>t()):t()}var q2=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),ke(n,()=>Ji(()=>t.apply(void 0,r)))),Dt=(t,e,n)=>(n||=e?gs.WARN:gs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=k(Wr),s=k(Or),a=k(Se)}catch{return H2(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Ji(()=>s.add())),i[l]=q2(i[l],r,a));let u=z2(()=>t.apply(this,i));return e?u instanceof te?u.pipe(wr(o.outsideAngular),Ir(o.insideAngular),jA(a)):u instanceof Promise?Ji(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>ke(a,()=>Ji(()=>h(m))),m=>ke(a,()=>Ji(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Ji(()=>u):u instanceof te?u.pipe(wr(o.outsideAngular),Ir(o.insideAngular)):Ji(()=>u)});var rr=class{constructor(e){return e}},Zi=class{constructor(){return Eh()}};function G2(t){return t&&t.length===1?t[0]:new rr(Yi())}var av=new j("angularfire2._apps"),W2={provide:rr,useFactory:G2,deps:[[new Lt,av]]},K2={provide:Zi,deps:[[new Lt,av]]};function Q2(t){return(e,n)=>{let r=n.get(Li);Ne("angularfire",Gr.full,"core"),Ne("angularfire",Gr.full,"app"),Ne("angular",eg.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new rr(i)}}function bne(t,...e){return At([W2,K2,{provide:av,useFactory:Q2(t),multi:!0,deps:[De,Ge,Wr,...e]}])}var Cne=Dt(sv,!0);var Y2=new Map,J2={activated:!1,tokenObservers:[]},Z2={initialized:!1,enabled:!1};function hn(t){return Y2.get(t)||Object.assign({},J2)}function qA(){return Z2}var X2="https://content-firebaseappcheck.googleapis.com/v1";var eU="exchangeDebugToken",$A={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},xne=1440*60*1e3;var lv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Ki,this.pending.promise.catch(n=>{}),await tU(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Ki,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function tU(t){return new Promise(e=>{setTimeout(e,t)})}var nU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Kr=new ln("appCheck","AppCheck",nU);function GA(t){if(!hn(t).activated)throw Kr.create("use-before-activation",{appName:t.name})}async function WA({url:t,body:e},n){let r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(t,o)}catch(p){throw Kr.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw Kr.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw Kr.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function KA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${X2}/projects/${n}/apps/${r}:${eU}?key=${i}`,body:{debug_token:e}}}var rU="firebase-app-check-database",iU=1,dv="firebase-app-check-store";var wh=null;function oU(){return wh||(wh=new Promise((t,e)=>{try{let n=indexedDB.open(rU,iU);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Kr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(dv,{keyPath:"compositeKey"})}}}catch(n){e(Kr.create("storage-open",{originalErrorMessage:n?.message}))}}),wh)}function sU(t,e){return aU(cU(t),e)}async function aU(t,e){let r=(await oU()).transaction(dv,"readwrite"),o=r.objectStore(dv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Kr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function cU(t){return`${t.options.appId}-${t.name}`}var jc=new An("@firebase/app-check");function cv(t,e){return Oc()?sU(t,e).catch(n=>{jc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function QA(){return qA().enabled}async function YA(){let t=qA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var uU={error:"UNKNOWN_ERROR"};function lU(t){return fh.encodeString(JSON.stringify(t),!1)}async function hv(t,e=!1,n=!1){let r=t.app;GA(r);let i=hn(r),o=i.token,s;if(o&&!Uc(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(Uc(l)?o=l:await cv(r,void 0))}if(!e&&o&&Uc(o))return{token:o.token};let a=!1;if(QA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=WA(KA(r,await YA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await cv(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?jc.warn(l.message):n&&jc.error(l),uv(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await hn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?jc.warn(l.message):n&&jc.error(l),s=l}let u;return o?s?Uc(o)?u={token:o.token,internalError:s}:u=uv(s):(u={token:o.token},i.token=o,await cv(r,o)):u=uv(s),a&&pU(r,u),u}async function dU(t){let e=t.app;GA(e);let{provider:n}=hn(e);if(QA()){let r=await YA(),{token:i}=await WA(KA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await n.getToken();return{token:r}}}function hU(t,e,n,r){let{app:i}=t,o=hn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Uc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),HA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>HA(t))}function JA(t,e){let n=hn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function HA(t){let{app:e}=t,n=hn(e),r=n.tokenRefresher;r||(r=fU(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function fU(t){let{app:e}=t;return new lv(async()=>{let n=hn(e),r;if(n.token?r=await hv(t,!0):r=await hv(t),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let n=hn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},$A.RETRIAL_MIN_WAIT,$A.RETRIAL_MAX_WAIT)}function pU(t,e){let n=hn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Uc(t){return t.expireTimeMillis-Date.now()>0}function uv(t){return{token:lU(uU),error:t}}var fv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=hn(this.app);for(let n of e)JA(this.app,n.next);return Promise.resolve()}};function gU(t,e){return new fv(t,e)}function mU(t){return{getToken:e=>hv(t,e),getLimitedUseToken:()=>dU(t),addTokenListener:e=>hU(t,"INTERNAL",e),removeTokenListener:e=>JA(t.app,e)}}var yU="@firebase/app-check",vU="0.10.1";var _U="app-check",zA="app-check-internal";function EU(){dn(new Tt(_U,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return gU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(zA).initialize()})),dn(new Tt(zA,t=>{let e=t.getProvider("app-check").getImmediate();return mU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ne(yU,vU)}EU();var IU="app-check";var ys=class{constructor(){return ms(IU)}};var wU=["localhost","0.0.0.0","127.0.0.1"],Wne=typeof window<"u"&&wU.includes(window.location.hostname);function f0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var p0=f0,g0=new ln("auth","Firebase",f0());var Ah=new An("@firebase/auth");function TU(t,...e){Ah.logLevel<=oe.WARN&&Ah.warn(`Auth (${qr}): ${t}`,...e)}function Dh(t,...e){Ah.logLevel<=oe.ERROR&&Ah.error(`Auth (${qr}): ${t}`,...e)}function Mn(t,...e){throw Vv(t,...e)}function Xi(t,...e){return Vv(t,...e)}function m0(t,e,n){let r=Object.assign(Object.assign({},p0()),{[e]:n});return new ln("auth","Firebase",r).create(e,{appName:t.name})}function sr(t){return m0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return g0.create(t,...e)}function G(t,e,...n){if(!t)throw Vv(e,...n)}function ir(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Dh(e),new Error(e)}function Jr(t,e){t||ir(e)}function yv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function DU(){return ZA()==="http:"||ZA()==="https:"}function ZA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function bU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DU()||vA()||"connection"in navigator)?navigator.onLine:!0}function CU(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var eo=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jr(n>e,"Short delay should be less than long delay!"),this.isMobile=mA()||_A()}get(){return bU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jv(t,e){Jr(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Rh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var SU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var AU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RU=new eo(3e4,6e4);function Zr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xr(t,e,n,r,i={}){return y0(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=xc(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);let l=Object.assign({method:e,headers:u},o);return yA()||(l.referrerPolicy="no-referrer"),t.emulatorConfig&&Hr(t.emulatorConfig.host)&&(l.credentials="include"),Rh.fetch()(await v0(t,t.config.apiHost,n,a),l)})}async function y0(t,e,n){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},SU),e);try{let i=new vv(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Th(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Th(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Th(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Th(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw m0(t,h,l);Mn(t,h)}}catch(i){if(i instanceof Ut)throw i;Mn(t,"network-request-failed",{message:String(i)})}}async function Qc(t,e,n,r,i={}){let o=await Xr(t,e,n,r,i);return"mfaPendingCredential"in o&&Mn(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function v0(t,e,n,r){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?jv(t.config,i):`${t.config.apiScheme}://${i}`;return AU.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function NU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var vv=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xi(this.auth,"network-request-failed")),RU.get())})}};function Th(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Xi(t,e,r);return i.customData._tokenResponse=n,i}function XA(t){return t!==void 0&&t.enterprise!==void 0}var _v=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return NU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function MU(t,e){return Xr(t,"GET","/v2/recaptchaConfig",Zr(t,e))}async function PU(t,e){return Xr(t,"POST","/v1/accounts:delete",e)}async function Nh(t,e){return Xr(t,"POST","/v1/accounts:lookup",e)}function $c(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Uv(t,e=!1){let n=dt(t),r=await n.getIdToken(e),i=Bv(r);G(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:$c(pv(i.auth_time)),issuedAtTime:$c(pv(i.iat)),expirationTime:$c(pv(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function pv(t){return Number(t)*1e3}function Bv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dh("JWT malformed, contained fewer than 3 sections"),null;try{let i=ph(n);return i?JSON.parse(i):(Dh("Failed to decode base64 JWT payload"),null)}catch(i){return Dh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function e0(t){let e=Bv(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function zc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ut&&kU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function kU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Ev=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var qc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$c(this.lastLoginAt),this.creationTime=$c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Mh(t){var e;let n=t.auth,r=await t.getIdToken(),i=await zc(t,Nh(n,{idToken:r}));G(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?_0(o.providerUserInfo):[],a=OU(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new qc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function $v(t){let e=dt(t);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _0(t){return t.map(e=>{var{providerId:n}=e,r=kp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function xU(t,e){let n=await y0(t,{},async()=>{let r=xc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await v0(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Hr(t.emulatorConfig.host)&&(u.credentials="include"),Rh.fetch()(s,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LU(t,e){return Xr(t,"POST","/v2/accounts:revokeToken",Zr(t,e))}var Hc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");let n=e0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:r,refreshToken:i,expiresIn:o}=await xU(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(G(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(G(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(G(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ir("not implemented")}};function Qr(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Yr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ev(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qc(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await zc(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Uv(this,e)}reload(){return $v(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mt(this.auth.app))return Promise.reject(sr(this.auth));let e=await this.getIdToken();return await zc(this,PU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(s=n.photoURL)!==null&&s!==void 0?s:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,M=(l=n.createdAt)!==null&&l!==void 0?l:void 0,U=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:z,emailVerified:W,isAnonymous:Pe,providerData:ae,stsTokenManager:w}=n;G(z&&w,e,"internal-error");let v=Hc.fromJSON(this.name,w);G(typeof z=="string",e,"internal-error"),Qr(p,e.name),Qr(m,e.name),G(typeof W=="boolean",e,"internal-error"),G(typeof Pe=="boolean",e,"internal-error"),Qr(y,e.name),Qr(C,e.name),Qr(R,e.name),Qr(S,e.name),Qr(M,e.name),Qr(U,e.name);let E=new t({uid:z,auth:e,email:m,emailVerified:W,displayName:p,isAnonymous:Pe,photoURL:C,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:M,lastLoginAt:U});return ae&&Array.isArray(ae)&&(E.providerData=ae.map(I=>Object.assign({},I))),S&&(E._redirectEventId=S),E}static async _fromIdTokenResponse(e,n,r=!1){let i=new Hc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mh(o),o}static async _fromGetAccountInfoResponse(e,n,r){let i=n.users[0];G(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?_0(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Hc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new qc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var t0=new Map;function or(t){Jr(t instanceof Function,"Expected a class definition");let e=t0.get(t);return e?(Jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,t0.set(t,e),e)}var FU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,r){this.storage[n]=r}async _get(n){let r=this.storage[n];return r===void 0?null:r}async _remove(n){delete this.storage[n]}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Iv=FU;function bh(t,e,n){return`firebase:${t}:${e}:${n}`}var Ph=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=bh(this.userKey,i.apiKey,o),this.fullPersistenceKey=bh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await Nh(this.auth,{idToken:e}).catch(()=>{});return n?Yr._fromGetAccountInfoResponse(this.auth,n,e):null}return Yr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new t(or(Iv),e,r);let i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||or(Iv),s=bh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let m=await Nh(e,{idToken:h}).catch(()=>{});if(!m)break;p=await Yr._fromGetAccountInfoResponse(e,m,h)}else p=Yr._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new t(o,e,r))}};function n0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(T0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(b0(e))return"Blackberry";if(C0(e))return"Webos";if(I0(e))return"Safari";if((e.includes("chrome/")||w0(e))&&!e.includes("edge/"))return"Chrome";if(D0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function E0(t=Qe()){return/firefox\//i.test(t)}function I0(t=Qe()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function w0(t=Qe()){return/crios\//i.test(t)}function T0(t=Qe()){return/iemobile/i.test(t)}function D0(t=Qe()){return/android/i.test(t)}function b0(t=Qe()){return/blackberry/i.test(t)}function C0(t=Qe()){return/webos/i.test(t)}function Hv(t=Qe()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VU(t=Qe()){var e;return Hv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jU(){return EA()&&document.documentMode===10}function S0(t=Qe()){return Hv(t)||D0(t)||C0(t)||b0(t)||/windows phone/i.test(t)||T0(t)}function A0(t,e=[]){let n;switch(t){case"Browser":n=n0(Qe());break;case"Worker":n=`${n0(Qe())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qr}/${r}`}var wv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function UU(t,e={}){return Xr(t,"GET","/v2/passwordPolicy",Zr(t,e))}var BU=6,Tv=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:BU,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Dv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kh(this),this.idTokenSubscription=new kh(this),this.beforeStateQueue=new wv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=or(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Ph.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await Nh(this,{idToken:e}),r=await Yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Mt(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mt(this.app))return Promise.reject(sr(this));let n=e?dt(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mt(this.app)?Promise.reject(sr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mt(this.app)?Promise.reject(sr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await UU(this),n=new Tv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ln("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await LU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&or(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await Ph.create(this,[or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=A0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&TU(`Error while retrieving App Check token: ${n.error}`),n?.token}};function no(t){return dt(t)}var kh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=DA(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Uh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $U(t){Uh=t}function R0(t){return Uh.loadJS(t)}function HU(){return Uh.recaptchaEnterpriseScript}function zU(){return Uh.gapiScript}function N0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var bv=class{constructor(){this.enterprise=new Cv}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}},Cv=class{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}};var qU="recaptcha-enterprise",M0="NO_RECAPTCHA",Sv=class{constructor(e){this.type=qU,this.auth=no(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{MU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new _v(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){let u=window.grecaptcha;XA(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(M0)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new bv().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&XA(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=HU();u.length!==0&&(u+=a),R0(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}};async function Bc(t,e,n,r=!1,i=!1){let o=new Sv(t),s;if(i)s=M0;else try{s=await o.verify(n)}catch{s=await o.verify(n,!0)}let a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Av(t,e,n,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await Bc(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=await Bc(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=await Bc(t,e,n);return r(t,a).catch(async u=>{var l;if(((l=t._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);let h=await Bc(t,e,n,!1,!0);return r(t,h)}return Promise.reject(u)})}else{let a=await Bc(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}function zv(t,e){let n=ps(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(Sn(o,e??{}))return i;Mn(i,"already-initialized")}return n.initialize({options:e})}function GU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(or);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function qv(t,e,n){let r=no(t);G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=P0(e),{host:s,port:a}=WU(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){G(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),G(Sn(l,r.config.emulator)&&Sn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Hr(s)?(mh(`${o}//${s}${u}`),yh("Auth",!0)):i||KU()}function P0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WU(t){let e=P0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:r0(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:r0(s)}}}function r0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function KU(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Gc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ir("not implemented")}_getIdTokenResponse(e){return ir("not implemented")}_linkToIdToken(e,n){return ir("not implemented")}_getReauthenticationResolver(e){return ir("not implemented")}};async function QU(t,e){return Xr(t,"POST","/v1/accounts:signUp",e)}async function YU(t,e){return Qc(t,"POST","/v1/accounts:signInWithPassword",Zr(t,e))}async function JU(t,e){return Qc(t,"POST","/v1/accounts:signInWithEmailLink",Zr(t,e))}async function ZU(t,e){return Qc(t,"POST","/v1/accounts:signInWithEmailLink",Zr(t,e))}var Wc=class t extends Gc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Av(e,n,"signInWithPassword",YU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return JU(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Av(e,r,"signUpPassword",QU,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return ZU(e,{idToken:n,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function gv(t,e){return Qc(t,"POST","/v1/accounts:signInWithIdp",Zr(t,e))}function XU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eB(t){let e=hs(fs(t)).link,n=e?hs(fs(e)).deep_link_id:null,r=hs(fs(t)).deep_link_id;return(r?hs(fs(r)).link:null)||r||n||e||t}var Oh=class t{constructor(e){var n,r,i,o,s,a;let u=hs(fs(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=XU((i=u.mode)!==null&&i!==void 0?i:null);G(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=eB(e);try{return new t(n)}catch{return null}}};var k0=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return Wc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Oh.parseLink(r);return G(i,"argument-error"),Wc._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),xh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Rv=class extends xh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function tB(t,e){return Qc(t,"POST","/v1/accounts:signUp",Zr(t,e))}var vs=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){let o=await Yr._fromIdTokenResponse(e,r,i),s=i0(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);let i=i0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})}};function i0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Nv=class t extends Ut{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function O0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nv._fromErrorAndOperation(t,o,e,r):o})}async function nB(t,e,n=!1){let r=await zc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vs._forOperation(t,"link",r)}async function rB(t,e,n=!1){let{auth:r}=t;if(Mt(r.app))return Promise.reject(sr(r));let i="reauthenticate";try{let o=await zc(t,O0(r,i,e,t),n);G(o.idToken,r,"internal-error");let s=Bv(o.idToken);G(s,r,"internal-error");let{sub:a}=s;return G(t.uid===a,r,"user-mismatch"),vs._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Mn(r,"user-mismatch"),o}}async function x0(t,e,n=!1){if(Mt(t.app))return Promise.reject(sr(t));let r="signIn",i=await O0(t,r,e),o=await vs._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function Gv(t,e){return x0(no(t),e)}async function L0(t){let e=no(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wv(t,e,n){if(Mt(t.app))return Promise.reject(sr(t));let r=no(t),s=await Av(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tB,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&L0(t),u}),a=await vs._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function Kv(t,e,n){return Mt(t.app)?Promise.reject(sr(t)):Gv(dt(t),k0.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&L0(t),r})}function Qv(t,e,n,r){return dt(t).onIdTokenChanged(e,n,r)}function Yv(t,e,n){return dt(t).beforeAuthStateChanged(e,n)}var Lh="__sak";var Fh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lh,"1"),this.storage.removeItem(Lh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var iB=1e3,oB=10,sB=(()=>{class t extends Fh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=S0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);jU()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,oB):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},iB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,r){await super._set(n,r),this.localCache[n]=JSON.stringify(r)}async _get(n){let r=await super._get(n);return this.localCache[n]=JSON.stringify(r),r}async _remove(n){await super._remove(n),delete this.localCache[n]}}return t.type="LOCAL",t})(),F0=sB;var aB=(()=>{class t extends Fh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Jv=aB;function cB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var uB=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await cB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function V0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Mv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=V0("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function Nn(){return window}function lB(t){Nn().location.href=t}function j0(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function dB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function hB(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function fB(){return j0()?self:null}var U0="firebaseLocalStorageDb",pB=1,Vh="firebaseLocalStorage",B0="fbase_key",to=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Bh(t,e){return t.transaction([Vh],e?"readwrite":"readonly").objectStore(Vh)}function gB(){let t=indexedDB.deleteDatabase(U0);return new to(t).toPromise()}function Pv(){let t=indexedDB.open(U0,pB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Vh,{keyPath:B0})}catch(i){n(i)}}),t.addEventListener("success",async()=>{let r=t.result;r.objectStoreNames.contains(Vh)?e(r):(r.close(),await gB(),e(await Pv()))})})}async function o0(t,e,n){let r=Bh(t,!0).put({[B0]:e,value:n});return new to(r).toPromise()}async function mB(t,e){let n=Bh(t,!1).get(e),r=await new to(n).toPromise();return r===void 0?null:r.value}function s0(t,e){let n=Bh(t,!0).delete(e);return new to(n).toPromise()}var yB=800,vB=3,_B=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pv(),this.db)}async _withRetries(n){let r=0;for(;;)try{let i=await this._openDb();return await n(i)}catch(i){if(r++>vB)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return j0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=uB._getInstance(fB()),this.receiver._subscribe("keyChanged",async(n,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(n,r)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await dB(),!this.activeServiceWorker)return;this.sender=new Mv(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||hB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await Pv();return await o0(n,Lh,"1"),await s0(n,Lh),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>o0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)))}async _get(n){let r=await this._withRetries(i=>mB(i,n));return this.localCache[n]=r,r}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(r=>s0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(o=>{let s=Bh(o,!1).getAll();return new to(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),$0=_B;var tre=N0("rcb"),nre=new eo(3e4,6e4);function EB(t,e){return e?or(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Kc=class extends Gc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function IB(t){return x0(t.auth,new Kc(t),t.bypassAuthState)}function wB(t){let{auth:e,user:n}=t;return G(n,e,"internal-error"),rB(n,new Kc(t),t.bypassAuthState)}async function TB(t){let{auth:e,user:n}=t;return G(n,e,"internal-error"),nB(n,new Kc(t),t.bypassAuthState)}var kv=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IB;case"linkViaPopup":case"linkViaRedirect":return TB;case"reauthViaPopup":case"reauthViaRedirect":return wB;default:Mn(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var rre=new eo(2e3,1e4);var DB="pendingRedirect",Ch=new Map,Ov=class extends kv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ch.get(this.auth._key());if(!e){try{let r=await bB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ch.set(this.auth._key(),e)}return this.bypassAuthState||Ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function bB(t,e){let n=AB(e),r=SB(t);if(!await r._isAvailable())return!1;let i=await r._get(n)==="true";return await r._remove(n),i}function CB(t,e){Ch.set(t._key(),e)}function SB(t){return or(t._redirectPersistence)}function AB(t){return bh(DB,t.config.apiKey,t.name)}async function RB(t,e,n=!1){if(Mt(t.app))return Promise.reject(sr(t));let r=no(t),i=EB(r,e),s=await new Ov(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var NB=600*1e3,xv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!MB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!H0(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NB&&this.cachedEventUids.clear(),this.cachedEventUids.has(a0(e))}saveEventToCache(e){this.cachedEventUids.add(a0(e)),this.lastProcessedEventTime=Date.now()}};function a0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function H0({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function MB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H0(t);default:return!1}}async function PB(t,e={}){return Xr(t,"GET","/v1/projects",e)}var kB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OB=/^https?/;async function xB(t){if(t.config.emulator)return;let{authorizedDomains:e}=await PB(t);for(let n of e)try{if(LB(n))return}catch{}Mn(t,"unauthorized-domain")}function LB(t){let e=yv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!OB.test(n))return!1;if(kB.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var FB=new eo(3e4,6e4);function c0(){let t=Nn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VB(t){return new Promise((e,n)=>{var r,i,o;function s(){c0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c0(),n(Xi(t,"network-request-failed"))},timeout:FB.get()})}if(!((i=(r=Nn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Nn().gapi)===null||o===void 0)&&o.load)s();else{let a=N0("iframefcb");return Nn()[a]=()=>{gapi.load?s():n(Xi(t,"network-request-failed"))},R0(`${zU()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Sh=null,e})}var Sh=null;function jB(t){return Sh=Sh||VB(t),Sh}var UB=new eo(5e3,15e3),BB="__/auth/iframe",$B="emulator/auth/iframe",HB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qB(t){let e=t.config;G(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?jv(e,$B):`https://${t.config.authDomain}/${BB}`,r={apiKey:e.apiKey,appName:t.name,v:qr},i=zB.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${xc(r).slice(1)}`}async function GB(t){let e=await jB(t),n=Nn().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:qB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HB,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Xi(t,"network-request-failed"),a=Nn().setTimeout(()=>{o(s)},UB.get());function u(){Nn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var WB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KB=500,QB=600,YB="_blank",JB="http://localhost",jh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ZB(t,e,n,r=KB,i=QB){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},WB),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Qe().toLowerCase();n&&(a=w0(l)?YB:n),E0(l)&&(e=e||JB,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,C])=>`${m}${y}=${C},`,"");if(VU(l)&&a!=="_self")return XB(e||"",a),new jh(null);let p=window.open(e||"",a,h);G(p,t,"popup-blocked");try{p.focus()}catch{}return new jh(p)}function XB(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var e$="__/auth/handler",t$="emulator/auth/handler",n$=encodeURIComponent("fac");async function u0(t,e,n,r,i,o){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qr,eventId:i};if(e instanceof xh){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",TA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Rv){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await t._getAppCheckToken(),l=u?`#${n$}=${encodeURIComponent(u)}`:"";return`${r$(t)}?${xc(a).slice(1)}${l}`}function r$({config:t}){return t.emulator?jv(t,t$):`https://${t.authDomain}/${e$}`}var mv="webStorageSupport",Lv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jv,this._completeRedirectFn=RB,this._overrideRedirectResult=CB}async _openPopup(e,n,r,i){var o;Jr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await u0(e,n,r,yv(),i);return ZB(e,s,V0())}async _openRedirect(e,n,r,i){await this._originValidation(e);let o=await u0(e,n,r,yv(),i);return lB(o),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Jr(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){let n=await GB(e),r=new xv(e);return n.register("authEvent",i=>(G(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(mv,{type:mv},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[mv];s!==void 0&&n(!!s),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return S0()||I0()||Hv()}},z0=Lv;var l0="@firebase/auth",d0="1.10.8";var Fv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function i$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o$(t){dn(new Tt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;G(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:A0(t)},l=new Dv(r,i,o,u);return GU(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),dn(new Tt("auth-internal",e=>{let n=no(e.getProvider("auth").getImmediate());return(r=>new Fv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ne(l0,d0,i$(t)),Ne(l0,d0,"esm2017")}var s$=300,a$=qy("authIdTokenMaxAge")||s$,h0=null,c$=t=>async e=>{let n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>a$)return;let i=n?.token;h0!==i&&(h0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Zv(t=Yi()){let e=ps(t,"auth");if(e.isInitialized())return e.getImmediate();let n=zv(t,{popupRedirectResolver:z0,persistence:[$0,F0,Jv]}),r=qy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=c$(o.toString());Yv(n,s,()=>s(n.currentUser)),Qv(n,a=>s(a))}}let i=Hy("auth");return i&&qv(n,`http://${i}`),n}function u$(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$U({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Xi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",u$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o$("Browser");var q0="auth",Yc=class{constructor(e){return e}},Jc=class{constructor(){return ms(q0)}};var Xv=new j("angularfire2.auth-instances");function X$(t,e){let n=Vc(q0,t,e);return n&&new Yc(n)}function eH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Yc(r)}}var tH={provide:Jc,deps:[[new Lt,Xv]]},nH={provide:Yc,useFactory:X$,deps:[[new Lt,Xv],rr]};function $re(t,...e){return Ne("angularfire",Gr.full,"auth"),At([nH,tH,{provide:Xv,useFactory:eH(t),multi:!0,deps:[De,Ge,Wr,Zi,[new Lt,ys],...e]}])}var Hre=Dt(Wv,!0,2);var zre=Dt(Zv,!0);var qre=Dt(Kv,!0,2);var G0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},W0={};var ar,e_;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.D=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,T,b){for(var _=Array(arguments.length-2),Vn=2;Vn<arguments.length;Vn++)_[Vn-2]=arguments[Vn];return v.prototype[T].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)I[T]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(T=0;16>T;++T)I[T]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],T=w.g[2];var b=w.g[3],_=v+(b^E&(T^b))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+I[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+I[2]+606105819&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+I[3]+3250441966&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(b^E&(T^b))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+I[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+I[6]+2821735955&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+I[7]+4249261313&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(b^E&(T^b))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+I[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+I[10]+4294925233&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+I[11]+2304563134&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(b^E&(T^b))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(T^v&(E^T))+I[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=T+(E^b&(v^E))+I[14]+2792965006&4294967295,T=b+(_<<17&4294967295|_>>>15),_=E+(v^T&(b^v))+I[15]+1236535329&4294967295,E=T+(_<<22&4294967295|_>>>10),_=v+(T^b&(E^T))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+I[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+I[11]+643717713&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+I[0]+3921069994&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(E^T))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+I[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+I[15]+3634488961&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+I[4]+3889429448&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(E^T))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+I[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+I[3]+4107603335&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+I[8]+1163531501&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(T^b&(E^T))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^T&(v^E))+I[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=T+(v^E&(b^v))+I[7]+1735328473&4294967295,T=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(T^b))+I[12]+2368359562&4294967295,E=T+(_<<20&4294967295|_>>>12),_=v+(E^T^b)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+I[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+I[11]+1839030562&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+I[14]+4259657740&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^b)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+I[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+I[7]+4139469664&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+I[10]+3200236656&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^b)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+I[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+I[3]+3572445317&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+I[6]+76029189&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(E^T^b)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^T)+I[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=T+(b^v^E)+I[15]+530742520&4294967295,T=b+(_<<16&4294967295|_>>>16),_=E+(T^b^v)+I[2]+3299628645&4294967295,E=T+(_<<23&4294967295|_>>>9),_=v+(T^(E|~b))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+I[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+I[14]+2878612391&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+I[5]+4237533241&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~b))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+I[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+I[10]+4293915773&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+I[1]+2240044497&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~b))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+I[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+I[6]+2734768916&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+I[13]+1309151649&4294967295,E=T+(_<<21&4294967295|_>>>11),_=v+(T^(E|~b))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~T))+I[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=T+(v^(b|~E))+I[2]+718787259&4294967295,T=b+(_<<15&4294967295|_>>>17),_=E+(b^(T|~v))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var E=v-this.blockSize,I=this.B,T=this.h,b=0;b<v;){if(T==0)for(;b<=E;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<v;)if(I[T++]=w.charCodeAt(b++),T==this.blockSize){i(this,I),T=0;break}}else for(;b<v;)if(I[T++]=w[b++],T==this.blockSize){i(this,I),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var E=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=E&255,E/=256;for(this.u(w),w=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)w[E++]=this.g[v]>>>I&255;return w};function o(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;for(var E=[],I=!0,T=w.length-1;0<=T;T--){var b=w[T]|0;I&&b==v||(E[T]=b,I=!1)}this.g=E}var a={};function u(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return S(l(-w));for(var v=[],E=1,I=0;w>=E;I++)v[I]=w/E|0,E*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return S(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,T=0;T<w.length;T+=8){var b=Math.min(8,w.length-T),_=parseInt(w.substring(T,T+b),v);8>b?(b=l(Math.pow(v,b)),I=I.j(b).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-S(this).m();for(var w=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C(this))return"0";if(R(this))return"-"+S(this).toString(w);for(var v=l(Math.pow(w,6)),E=this,I="";;){var T=W(E,v).g;E=M(E,T.j(v));var b=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=T,C(E))return b+I;for(;6>b.length;)b="0"+b;I=b+I}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function C(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function R(w){return w.h==-1}t.l=function(w){return w=M(this,w),R(w)?-1:C(w)?0:1};function S(w){for(var v=w.g.length,E=[],I=0;I<v;I++)E[I]=~w.g[I];return new s(E,~w.h).add(m)}t.abs=function(){return R(this)?S(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0,T=0;T<=v;T++){var b=I+(this.i(T)&65535)+(w.i(T)&65535),_=(b>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);I=_>>>16,b&=65535,_&=65535,E[T]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function M(w,v){return w.add(S(v))}t.j=function(w){if(C(this)||C(w))return p;if(R(this))return R(w)?S(this).j(S(w)):S(S(this).j(w));if(R(w))return S(this.j(S(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<w.g.length;T++){var b=this.i(I)>>>16,_=this.i(I)&65535,Vn=w.i(T)>>>16,qs=w.i(T)&65535;E[2*I+2*T]+=_*qs,U(E,2*I+2*T),E[2*I+2*T+1]+=b*qs,U(E,2*I+2*T+1),E[2*I+2*T+1]+=_*Vn,U(E,2*I+2*T+1),E[2*I+2*T+2]+=b*Vn,U(E,2*I+2*T+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new s(E,0)};function U(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function z(w,v){this.g=w,this.h=v}function W(w,v){if(C(v))throw Error("division by zero");if(C(w))return new z(p,p);if(R(w))return v=W(S(w),v),new z(S(v.g),S(v.h));if(R(v))return v=W(w,S(v)),new z(S(v.g),v.h);if(30<w.g.length){if(R(w)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,I=v;0>=I.l(w);)E=Pe(E),I=Pe(I);var T=ae(E,1),b=ae(I,1);for(I=ae(I,2),E=ae(E,2);!C(I);){var _=b.add(I);0>=_.l(w)&&(T=T.add(E),b=_),I=ae(I,1),E=ae(E,1)}return v=M(w,T.j(v)),new z(T,v)}for(T=p;0<=w.l(v);){for(E=Math.max(1,Math.floor(w.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),b=l(E),_=b.j(v);R(_)||0<_.l(w);)E-=I,b=l(E),_=b.j(v);C(b)&&(b=m),T=T.add(b),w=M(w,_)}return new z(T,w)}t.A=function(w){return W(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&w.i(I);return new s(E,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|w.i(I);return new s(E,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^w.i(I);return new s(E,this.h^w.h)};function Pe(w){for(var v=w.g.length+1,E=[],I=0;I<v;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new s(E,w.h)}function ae(w,v){var E=v>>5;v%=32;for(var I=w.g.length-E,T=[],b=0;b<I;b++)T[b]=0<v?w.i(b+E)>>>v|w.i(b+E+1)<<32-v:w.i(b+E);return new s(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,e_=W0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,ar=W0.Integer=s}).apply(typeof G0<"u"?G0:typeof self<"u"?self:typeof window<"u"?window:{});var $h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cr={};var t_,rH,_s,n_,Zc,Hh,r_,i_,o_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof $h=="object"&&$h];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function C(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,A){for(var O=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)O[Ee-2]=arguments[Ee];return d.prototype[D].apply(g,O)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function S(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,A=g.length||0;c.length=D+A;for(let O=0;O<A;O++)c[D+O]=g[O]}else c.push(g)}}class M{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function U(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function W(c){return W[" "](c),c}W[" "]=function(){};var Pe=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ae(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function w(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let A=0;A<E.length;A++)f=E[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function b(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Vf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Vn{constructor(){this.h=this.g=null}add(d,f){let g=qs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var qs=new M(()=>new IM,c=>c.reset());class IM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Gs,Ws=!1,Vf=new Vn,II=()=>{let c=a.Promise.resolve(void 0);Gs=()=>{c.then(wM)}};var wM=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){b(f)}var d=qs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ws=!1};function gr(){this.s=this.s,this.C=this.C}gr.prototype.s=!1,gr.prototype.ma=function(){this.s||(this.s=!0,this.N())},gr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var TM=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Ks(c,d){if(it.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Pe){e:{try{W(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:DM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ks.aa.h.call(this)}}C(Ks,it);var DM={2:"touch",3:"pen",4:"mouse"};Ks.prototype.h=function(){Ks.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Qs="closure_listenable_"+(1e6*Math.random()|0),bM=0;function CM(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++bM,this.da=this.fa=!1}function Eu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Iu(c){this.src=c,this.g={},this.h=0}Iu.prototype.add=function(c,d,f,g,D){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=Uf(c,d,g,D);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new CM(d,this.src,A,!!g,D),d.fa=f,c.push(d)),d};function jf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=D)&&Array.prototype.splice.call(g,D,1),A&&(Eu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Uf(c,d,f,g){for(var D=0;D<c.length;++D){var A=c[D];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return D}return-1}var Bf="closure_lm_"+(1e6*Math.random()|0),$f={};function wI(c,d,f,g,D){if(g&&g.once)return DI(c,d,f,g,D);if(Array.isArray(d)){for(var A=0;A<d.length;A++)wI(c,d[A],f,g,D);return null}return f=Gf(f),c&&c[Qs]?c.K(d,f,l(g)?!!g.capture:!!g,D):TI(c,d,f,!1,g,D)}function TI(c,d,f,g,D,A){if(!d)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,Ee=zf(c);if(Ee||(c[Bf]=Ee=new Iu(c)),f=Ee.add(d,f,g,O,A),f.proxy)return f;if(g=SM(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)TM||(D=O),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(CI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function SM(){function c(f){return d.call(c.src,c.listener,f)}let d=AM;return c}function DI(c,d,f,g,D){if(Array.isArray(d)){for(var A=0;A<d.length;A++)DI(c,d[A],f,g,D);return null}return f=Gf(f),c&&c[Qs]?c.L(d,f,l(g)?!!g.capture:!!g,D):TI(c,d,f,!0,g,D)}function bI(c,d,f,g,D){if(Array.isArray(d))for(var A=0;A<d.length;A++)bI(c,d[A],f,g,D);else g=l(g)?!!g.capture:!!g,f=Gf(f),c&&c[Qs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Uf(A,f,g,D),-1<f&&(Eu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=zf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Uf(d,f,g,D)),(f=-1<c?d[c]:null)&&Hf(f))}function Hf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Qs])jf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(CI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=zf(d))?(jf(f,c),f.h==0&&(f.src=null,d[Bf]=null)):Eu(c)}}}function CI(c){return c in $f?$f[c]:$f[c]="on"+c}function AM(c,d){if(c.da)c=!0;else{d=new Ks(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Hf(c),c=f.call(g,d)}return c}function zf(c){return c=c[Bf],c instanceof Iu?c:null}var qf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gf(c){return typeof c=="function"?c:(c[qf]||(c[qf]=function(d){return c.handleEvent(d)}),c[qf])}function ot(){gr.call(this),this.i=new Iu(this),this.M=this,this.F=null}C(ot,gr),ot.prototype[Qs]=!0,ot.prototype.removeEventListener=function(c,d,f,g){bI(this,c,d,f,g)};function pt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new it(d,c);else if(d instanceof it)d.target=d.target||c;else{var D=d;d=new it(g,c),I(d,D)}if(D=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];D=wu(O,g,!0,d)&&D}if(O=d.g=c,D=wu(O,g,!0,d)&&D,D=wu(O,g,!1,d)&&D,f)for(A=0;A<f.length;A++)O=d.g=f[A],D=wu(O,g,!1,d)&&D}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Eu(f[g]);delete c.g[d],c.h--}}this.F=null},ot.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ot.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function wu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var Ee=O.listener,Ze=O.ha||O.src;O.fa&&jf(c.i,O),D=Ee.call(Ze,g)!==!1&&D}}return D&&!g.defaultPrevented}function SI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function AI(c){c.g=SI(()=>{c.g=null,c.i&&(c.i=!1,AI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class RM extends gr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:AI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ys(c){gr.call(this),this.h=c,this.g={}}C(Ys,gr);var RI=[];function NI(c){ae(c.g,function(d,f){this.g.hasOwnProperty(f)&&Hf(d)},c),c.g={}}Ys.prototype.N=function(){Ys.aa.N.call(this),NI(this)},Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wf=a.JSON.stringify,NM=a.JSON.parse,MM=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Kf(){}Kf.prototype.h=null;function MI(c){return c.h||(c.h=c.i())}function PI(){}var Js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qf(){it.call(this,"d")}C(Qf,it);function Yf(){it.call(this,"c")}C(Yf,it);var ui={},kI=null;function Tu(){return kI=kI||new ot}ui.La="serverreachability";function OI(c){it.call(this,ui.La,c)}C(OI,it);function Zs(c){let d=Tu();pt(d,new OI(d))}ui.STAT_EVENT="statevent";function xI(c,d){it.call(this,ui.STAT_EVENT,c),this.stat=d}C(xI,it);function gt(c){let d=Tu();pt(d,new xI(d,c))}ui.Ma="timingevent";function LI(c,d){it.call(this,ui.Ma,c),this.size=d}C(LI,it);function Xs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ea(){this.g=!0}ea.prototype.xa=function(){this.g=!1};function PM(c,d,f,g,D,A){c.info(function(){if(c.g)if(A)for(var O="",Ee=A.split("&"),Ze=0;Ze<Ee.length;Ze++){var ue=Ee[Ze].split("=");if(1<ue.length){var st=ue[0];ue=ue[1];var at=st.split("_");O=2<=at.length&&at[1]=="type"?O+(st+"="+ue+"&"):O+(st+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+O})}function kM(c,d,f,g,D,A,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+A+" "+O})}function yo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+xM(c,f)+(g?" "+g:"")})}function OM(c,d){c.info(function(){return"TIMEOUT: "+d})}ea.prototype.info=function(){};function xM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return Wf(f)}catch{return d}}var Du={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},FI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jf;function bu(){}C(bu,Kf),bu.prototype.g=function(){return new XMLHttpRequest},bu.prototype.i=function(){return{}},Jf=new bu;function mr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ys(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new VI}function VI(){this.i=null,this.g="",this.h=!1}var jI={},Zf={};function Xf(c,d,f){c.L=1,c.v=Ru(jn(d)),c.m=f,c.P=!0,UI(c,null)}function UI(c,d){c.F=Date.now(),Cu(c),c.A=jn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),ew(f.i,"t",g),c.C=0,f=c.j.J,c.h=new VI,c.g=vw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new RM(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(RI[0]=D.toString()),D=RI);for(var A=0;A<D.length;A++){var O=wI(f,D[A],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Zs(),PM(c.i,c.u,c.A,c.l,c.R,c.m)}mr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Un(c)==3?d.j():this.Y(c)},mr.prototype.Y=function(c){try{if(c==this.g)e:{let at=Un(this.g);var d=this.g.Ba();let Eo=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||aw(this.g)))){this.J||at!=4||d==7||(d==8||0>=Eo?Zs(3):Zs(2)),ep(this);var f=this.g.Z();this.X=f;t:if(BI(this)){var g=aw(this.g);c="";var D=g.length,A=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){li(this),ta(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,kM(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Ze=this.g;if((Ee=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Ee)){var ue=Ee;break t}}ue=null}if(f=ue)yo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tp(this,f);else{this.o=!1,this.s=3,gt(12),li(this),ta(this);break e}}if(this.P){f=!0;let Zt;for(;!this.J&&this.C<O.length;)if(Zt=LM(this,O),Zt==Zf){at==4&&(this.s=4,gt(14),f=!1),yo(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==jI){this.s=4,gt(15),yo(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else yo(this.i,this.l,Zt,null),tp(this,Zt);if(BI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||O.length!=0||this.h.h||(this.s=1,gt(16),f=!1),this.o=this.o&&f,!f)yo(this.i,this.l,O,"[Invalid Chunked Response]"),li(this),ta(this);else if(0<O.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),ap(st),st.M=!0,gt(11))}}else yo(this.i,this.l,O,null),tp(this,O);at==4&&li(this),this.o&&!this.J&&(at==4?pw(this.j,this):(this.o=!1,Cu(this)))}else XM(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),li(this),ta(this)}}}catch{}finally{}};function BI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function LM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Zf:(f=Number(d.substring(f,g)),isNaN(f)?jI:(g+=1,g+f>d.length?Zf:(d=d.slice(g,g+f),c.C=g+f,d)))}mr.prototype.cancel=function(){this.J=!0,li(this)};function Cu(c){c.S=Date.now()+c.I,$I(c,c.I)}function $I(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Xs(m(c.ba,c),d)}function ep(c){c.B&&(a.clearTimeout(c.B),c.B=null)}mr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(OM(this.i,this.A),this.L!=2&&(Zs(),gt(17)),li(this),this.s=2,ta(this)):$I(this,this.S-c)};function ta(c){c.j.G==0||c.J||pw(c.j,c)}function li(c){ep(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,NI(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function tp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||np(f.h,c))){if(!c.K&&np(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Ou(f),Pu(f);else break e;sp(f),gt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Xs(m(f.Za,f),6e3));if(1>=qI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else hi(f,11)}else if((c.K||f.g==c)&&Ou(f),!U(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let ue=D[d];if(f.T=ue[0],ue=ue[1],f.G==2)if(ue[0]=="c"){f.K=ue[1],f.ia=ue[2];let st=ue[3];st!=null&&(f.la=st,f.j.info("VER="+f.la));let at=ue[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));let Eo=ue[5];Eo!=null&&typeof Eo=="number"&&0<Eo&&(g=1.5*Eo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Zt=c.g;if(Zt){let Lu=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lu){var A=g.h;A.g||Lu.indexOf("spdy")==-1&&Lu.indexOf("quic")==-1&&Lu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(rp(A,A.h),A.h=null))}if(g.D){let cp=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;cp&&(g.ya=cp,Te(g.I,g.D,cp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=yw(g,g.J?g.ia:null,g.W),O.K){GI(g.h,O);var Ee=O,Ze=g.L;Ze&&(Ee.I=Ze),Ee.B&&(ep(Ee),Cu(Ee)),g.g=O}else hw(g);0<f.i.length&&ku(f)}else ue[0]!="stop"&&ue[0]!="close"||hi(f,7);else f.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?hi(f,7):op(f):ue[0]!="noop"&&f.l&&f.l.ta(ue),f.v=0)}}Zs(4)}catch{}}var FM=class{constructor(c,d){this.g=c,this.map=d}};function HI(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zI(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function qI(c){return c.h?1:c.g?c.g.size:0}function np(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function rp(c,d){c.g?c.g.add(d):c.h=d}function GI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}HI.prototype.cancel=function(){if(this.i=WI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function WI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function VM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function jM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function KI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=jM(c),g=VM(c),D=g.length,A=0;A<D;A++)d.call(void 0,g[A],f&&f[A],c)}var QI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function UM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var A=c[f].substring(0,g);D=c[f].substring(g+1)}else A=c[f];d(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function di(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof di){this.h=c.h,Su(this,c.j),this.o=c.o,this.g=c.g,Au(this,c.s),this.l=c.l;var d=c.i,f=new ia;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),YI(this,f),this.m=c.m}else c&&(d=String(c).match(QI))?(this.h=!1,Su(this,d[1]||"",!0),this.o=na(d[2]||""),this.g=na(d[3]||"",!0),Au(this,d[4]),this.l=na(d[5]||"",!0),YI(this,d[6]||"",!0),this.m=na(d[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}di.prototype.toString=function(){var c=[],d=this.j;d&&c.push(ra(d,JI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(ra(d,JI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(ra(f,f.charAt(0)=="/"?HM:$M,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",ra(f,qM)),c.join("")};function jn(c){return new di(c)}function Su(c,d,f){c.j=f?na(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Au(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function YI(c,d,f){d instanceof ia?(c.i=d,GM(c.i,c.h)):(f||(d=ra(d,zM)),c.i=new ia(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function Ru(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function na(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ra(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,BM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function BM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var JI=/[#\/\?@]/g,$M=/[#\?:]/g,HM=/[#\?]/g,zM=/[#\?@]/g,qM=/#/g;function ia(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function yr(c){c.g||(c.g=new Map,c.h=0,c.i&&UM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ia.prototype,t.add=function(c,d){yr(this),this.i=null,c=vo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function ZI(c,d){yr(c),d=vo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function XI(c,d){return yr(c),d=vo(c,d),c.g.has(d)}t.forEach=function(c,d){yr(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},t.na=function(){yr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let A=0;A<D.length;A++)f.push(d[g])}return f},t.V=function(c){yr(this);let d=[];if(typeof c=="string")XI(this,c)&&(d=d.concat(this.g.get(vo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return yr(this),this.i=null,c=vo(this,c),XI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function ew(c,d,f){ZI(c,d),0<f.length&&(c.i=null,c.g.set(vo(c,d),R(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var D=A;O[g]!==""&&(D+="="+encodeURIComponent(String(O[g]))),c.push(D)}}return this.i=c.join("&")};function vo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function GM(c,d){d&&!c.j&&(yr(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(ZI(this,g),ew(this,D,f))},c)),c.j=d}function WM(c,d){let f=new ea;if(a.Image){let g=new Image;g.onload=y(vr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(vr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(vr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(vr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function KM(c,d){let f=new ea,g=new AbortController,D=setTimeout(()=>{g.abort(),vr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(D),A.ok?vr(f,"TestPingServer: ok",!0,d):vr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),vr(f,"TestPingServer: error",!1,d)})}function vr(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function QM(){this.g=new MM}function YM(c,d,f){let g=f||"";try{KI(c,function(D,A){let O=D;l(D)&&(O=Wf(D)),d.push(g+A+"="+encodeURIComponent(O))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function oa(c){this.l=c.Ub||null,this.j=c.eb||!1}C(oa,Kf),oa.prototype.g=function(){return new Nu(this.l,this.j)},oa.prototype.i=(function(c){return function(){return c}})({});function Nu(c,d){ot.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Nu,ot),t=Nu.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,aa(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sa(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,aa(this)),this.g&&(this.readyState=3,aa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function tw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?sa(this):aa(this),this.readyState==3&&tw(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,sa(this))},t.Qa=function(c){this.g&&(this.response=c,sa(this))},t.ga=function(){this.g&&sa(this)};function sa(c){c.readyState=4,c.l=null,c.j=null,c.v=null,aa(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function aa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Nu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function nw(c){let d="";return ae(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ip(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=nw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Ae(c){ot.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ae,ot);var JM=/^https?$/i,ZM=["POST","PUT"];t=Ae.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jf.g(),this.v=this.o?MI(this.o):MI(Jf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){rw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ZM,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){rw(this,A)}};function rw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,iw(c),Mu(c)}function iw(c){c.A||(c.A=!0,pt(c,"complete"),pt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,pt(this,"complete"),pt(this,"abort"),Mu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mu(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ow(this):this.bb())},t.bb=function(){ow(this)};function ow(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Un(c)!=4||c.Z()!=2)){if(c.u&&Un(c)==4)SI(c.Ea,0,c);else if(pt(c,"readystatechange"),Un(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var D=String(c.D).match(QI)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!JM.test(D?D.toLowerCase():"")}f=g}if(f)pt(c,"complete"),pt(c,"success");else{c.m=6;try{var A=2<Un(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",iw(c)}}finally{Mu(c)}}}}function Mu(c,d){if(c.g){sw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||pt(c,"ready");try{f.onreadystatechange=g}catch{}}}function sw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Un(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),NM(d)}};function aw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function XM(c){let d={};c=(c.g&&2<=Un(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(U(c[g]))continue;var f=T(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[D]||[];d[D]=A,A.push(f)}w(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ca(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function cw(c){this.Aa=0,this.i=[],this.j=new ea,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ca("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ca("baseRetryDelayMs",5e3,c),this.cb=ca("retryDelaySeedMs",1e4,c),this.Wa=ca("forwardChannelMaxRetries",2,c),this.wa=ca("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new HI(c&&c.concurrentRequestLimit),this.Da=new QM,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cw.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){gt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=yw(this,null,this.W),ku(this)};function op(c){if(uw(c),c.G==3){var d=c.U++,f=jn(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),ua(c,f),d=new mr(c,c.j,d),d.L=2,d.v=Ru(jn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=vw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Cu(d)}mw(c)}function Pu(c){c.g&&(ap(c),c.g.cancel(),c.g=null)}function uw(c){Pu(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ou(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ku(c){if(!zI(c.h)&&!c.s){c.s=!0;var d=c.Ga;Gs||II(),Ws||(Gs(),Ws=!0),Vf.add(d,c),c.B=0}}function eP(c,d){return qI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Xs(m(c.Ga,c,d),gw(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new mr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),I(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=dw(this,D,d),f=jn(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),ua(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(nw(A)))+"&"+d:this.m&&ip(f,this.m,A)),rp(this.h,D),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),D.T=!0,Xf(D,f,null)):Xf(D,f,d),this.G=2}}else this.G==3&&(c?lw(this,c):this.i.length==0||zI(this.h)||lw(this))};function lw(c,d){var f;d?f=d.l:f=c.U++;let g=jn(c.I);Te(g,"SID",c.K),Te(g,"RID",f),Te(g,"AID",c.T),ua(c,g),c.m&&c.o&&ip(g,c.m,c.o),f=new mr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=dw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),rp(c.h,f),Xf(f,g,d)}function ua(c,d){c.H&&ae(c.H,function(f,g){Te(d,g,f)}),c.l&&KI({},function(f,g){Te(d,g,f)})}function dw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=D[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let Ee=!0;for(let Ze=0;Ze<f;Ze++){let ue=D[Ze].g,st=D[Ze].map;if(ue-=A,0>ue)A=Math.max(0,D[Ze].g-100),Ee=!1;else try{YM(st,O,"req"+ue+"_")}catch{g&&g(st)}}if(Ee){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function hw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Gs||II(),Ws||(Gs(),Ws=!0),Vf.add(d,c),c.v=0}}function sp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Xs(m(c.Fa,c),gw(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,fw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Xs(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Pu(this),fw(this))};function ap(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function fw(c){c.g=new mr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=jn(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),ua(c,d),c.m&&c.o&&ip(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Ru(jn(d)),f.m=null,f.P=!0,UI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,Pu(this),sp(this),gt(19))};function Ou(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function pw(c,d){var f=null;if(c.g==d){Ou(c),ap(c),c.g=null;var g=2}else if(np(c.h,d))f=d.D,GI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=Tu(),pt(g,new LI(g,f)),ku(c)}else hw(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&eP(c,d)||g==2&&sp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:hi(c,5);break;case 4:hi(c,10);break;case 3:hi(c,6);break;default:hi(c,2)}}}function gw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function hi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let D=!g;g=new di(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Su(g,"https"),Ru(g),D?WM(g.toString(),f):KM(g.toString(),f)}else gt(2);c.G=0,c.l&&c.l.sa(d),mw(c),uw(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function mw(c){if(c.G=0,c.ka=[],c.l){let d=WI(c.h);(d.length!=0||c.i.length!=0)&&(S(c.ka,d),S(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function yw(c,d,f){var g=f instanceof di?jn(f):new di(f);if(g.g!="")d&&(g.g=d+"."+g.g),Au(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var A=new di(null);g&&Su(A,g),d&&(A.g=d),D&&Au(A,D),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Te(g,f,d),Te(g,"VER",c.la),ua(c,g),g}function vw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ae(new oa({eb:f})):new Ae(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _w(){}t=_w.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function xu(){}xu.prototype.g=function(c,d){return new Pt(c,d)};function Pt(c,d){ot.call(this),this.g=new cw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!U(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!U(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new _o(this)}C(Pt,ot),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){op(this.g)},Pt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Wf(c),c=f);d.i.push(new FM(d.Ya++,c)),d.G==3&&ku(d)},Pt.prototype.N=function(){this.g.l=null,delete this.j,op(this.g),delete this.g,Pt.aa.N.call(this)};function Ew(c){Qf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}C(Ew,Qf);function Iw(){Yf.call(this),this.status=1}C(Iw,Yf);function _o(c){this.g=c}C(_o,_w),_o.prototype.ua=function(){pt(this.g,"a")},_o.prototype.ta=function(c){pt(this.g,new Ew(c))},_o.prototype.sa=function(c){pt(this.g,new Iw)},_o.prototype.ra=function(){pt(this.g,"b")},xu.prototype.createWebChannel=xu.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,o_=cr.createWebChannelTransport=function(){return new xu},i_=cr.getStatEventTarget=function(){return Tu()},r_=cr.Event=ui,Hh=cr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Du.NO_ERROR=0,Du.TIMEOUT=8,Du.HTTP_ERROR=6,Zc=cr.ErrorCode=Du,FI.COMPLETE="complete",n_=cr.EventType=FI,PI.EventType=Js,Js.OPEN="a",Js.CLOSE="b",Js.ERROR="c",Js.MESSAGE="d",ot.prototype.listen=ot.prototype.K,_s=cr.WebChannel=PI,rH=cr.FetchXmlHttpFactory=oa,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,t_=cr.XhrIo=Ae}).apply(typeof $h<"u"?$h:typeof self<"u"?self:typeof window<"u"?window:{});var K0="@firebase/firestore",Q0="4.8.0";var Ye=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");var Bs="11.10.0";var so=new An("@firebase/firestore");function Es(){return so.logLevel}function F(t,...e){if(so.logLevel<=oe.DEBUG){let n=e.map(YE);so.debug(`Firestore (${Bs}): ${t}`,...n)}}function ur(t,...e){if(so.logLevel<=oe.ERROR){let n=e.map(YE);so.error(`Firestore (${Bs}): ${t}`,...n)}}function ii(t,...e){if(so.logLevel<=oe.WARN){let n=e.map(YE);so.warn(`Firestore (${Bs}): ${t}`,...n)}}function YE(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function H(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,UR(t,r,n)}function UR(t,e,n){let r=`FIRESTORE (${Bs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ur(r),new Error(r)}function me(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||UR(e,i,r)}function Y(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Ut{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var kn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Yh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},l_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}},d_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},h_=class{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new kn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new kn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string",31837,{l:r}),new Yh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string",2055,{h:e}),new Ye(e)}},f_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},p_=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new f_(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Jh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},g_=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){me(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Jh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function iH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function BR(){return new TextEncoder}var iu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=iH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ne(t,e){return t<e?-1:t>e?1:0}function m_(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ne(r,i);{let o=BR(),s=oH(o.encode(Y0(t,n)),o.encode(Y0(e,n)));return s!==0?s:ne(r,i)}}n+=r>65535?2:1}return ne(t.length,e.length)}function Y0(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function oH(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ne(t[n],e[n]);return ne(t.length,e.length)}function Ns(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var J0="__name__",Zh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&H(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ne(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):m_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ar.fromString(e.substring(4,e.length-2))}},Ce=class t extends Zh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},sH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bt=class t extends Zh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return sH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===J0}static keyField(){return new t([J0])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var $=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ce.fromString(e))}static fromName(e){return new t(Ce.fromString(e).popFirst(5))}static empty(){return new t(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ce(e.slice()))}};function $R(t,e,n){if(!n)throw new L(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function aH(t,e,n,r){if(e===!0&&r===!0)throw new L(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Z0(t){if(!$.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function X0(t){if($.isDocumentKey(t))throw new L(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function HR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Nf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H(12329,{type:typeof t})}function Xh(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Nf(t);throw new L(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $e(t,e){let n={typeString:t};return e&&(n.value=e),n}function mu(t,e){if(!HR(t))throw new L(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(N.INVALID_ARGUMENT,n);return!0}var eR=-62135596800,tR=1e6,He=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tR);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<eR)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tR}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-eR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:$e("string",He._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};var ee=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new He(0,0))}static max(){return new t(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ou=-1,y_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};y_.UNKNOWN_ID=-1;function cH(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new ao(i,$.empty(),e)}function uH(t){return new ao(t.readTime,t.key,ou)}var ao=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ee.min(),$.empty(),ou)}static max(){return new t(ee.max(),$.empty(),ou)}};function lH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=$.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}var dH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",v_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function $s(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==dH)throw t;F("LocalStore","Unexpectedly lost primary lease")}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function hH(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hs(t){return t.name==="IndexedDbTransactionError"}var JE=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),ZE=-1;function Mf(t){return t==null}function su(t){return t===0&&1/t==-1/0}function fH(t){return typeof t=="number"&&Number.isInteger(t)&&!su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var zR="";function pH(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nR(e)),e=gH(t.get(n),e);return nR(e)}function gH(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case zR:n+="";break;default:n+=o}}return n}function nR(t){return t+zR+""}var mH="remoteDocuments",qR="owner";var GR="mutationQueues";var WR="mutations";var KR="documentMutations",yH="remoteDocumentsV14";var QR="remoteDocumentGlobal";var YR="targets";var JR="targetDocuments";var ZR="targetGlobal",XR="collectionParents";var eN="clientMetadata";var tN="bundles";var nN="namedQueries";var vH="indexConfiguration";var _H="indexState";var EH="indexEntries";var rN="documentOverlays";var IH="globals";var wH=[GR,WR,KR,mH,YR,qR,ZR,JR,eN,QR,XR,tN,nN],sie=[...wH,rN],TH=[GR,WR,KR,yH,YR,qR,ZR,JR,eN,QR,XR,tN,nN,rN],DH=TH,bH=[...DH,vH,_H,EH];var aie=[...bH,IH];function rR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Me=class t{constructor(e,n){this.comparator=e,this.root=n||On.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ds(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ds(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ds(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ds(this.root,e,this.comparator,!0)}},Ds=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},On=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw H(43730,{key:this.key,value:this.value});if(this.right.isRed())throw H(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw H(27949);return e+(this.isRed()?0:1)}};On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw H(57766)}get value(){throw H(16141)}get color(){throw H(16727)}get left(){throw H(29726)}get right(){throw H(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new On(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Je=class t{constructor(e){this.comparator=e,this.data=new Me(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ef(this.data.getIterator())}getIteratorFrom(e){return new ef(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ef=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pn=class t{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Je(Bt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ns(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var tf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ft=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new tf("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ft.EMPTY_BYTE_STRING=new ft("");var CH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lr(t){if(me(!!t,39018),typeof t=="string"){let e=0,n=CH.exec(t);if(me(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dr(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}var oN="server_timestamp",sN="__type__",aN="__previous_value__",cN="__local_write_time__";function XE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[sN])===null||n===void 0?void 0:n.stringValue)===oN}function Pf(t){let e=t.mapValue.fields[aN];return XE(e)?Pf(e):e}function au(t){let e=lr(t.mapValue.fields[cN].timestampValue);return new He(e.seconds,e.nanos)}var __=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},nf="(default)",rf=class t{constructor(e,n){this.projectId=e,this.database=n||nf}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===nf}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var eI="__type__",uN="__max__",zh={mapValue:{fields:{__type__:{stringValue:uN}}}},tI="__vector__",Ms="value";function oi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?XE(t)?4:dN(t)?9007199254740991:lN(t)?10:11:H(28295,{value:t})}function Fn(t,e){if(t===e)return!0;let n=oi(t);if(n!==oi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return au(t).isEqual(au(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=lr(i.timestampValue),a=lr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return dr(i.bytesValue).isEqual(dr(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return be(i.geoPointValue.latitude)===be(o.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return be(i.integerValue)===be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=be(i.doubleValue),a=be(o.doubleValue);return s===a?su(s)===su(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Ns(t.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(rR(s)!==rR(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Fn(s[u],a[u])))return!1;return!0})(t,e);default:return H(52216,{left:t})}}function cu(t,e){return(t.values||[]).find(n=>Fn(n,e))!==void 0}function Ps(t,e){if(t===e)return 0;let n=oi(t),r=oi(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=be(o.integerValue||o.doubleValue),u=be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return iR(t.timestampValue,e.timestampValue);case 4:return iR(au(t),au(e));case 5:return m_(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=dr(o),u=dr(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ne(a[l],u[l]);if(h!==0)return h}return ne(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ne(be(o.latitude),be(s.latitude));return a!==0?a:ne(be(o.longitude),be(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return oR(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[Ms])===null||a===void 0?void 0:a.arrayValue,C=(u=m[Ms])===null||u===void 0?void 0:u.arrayValue,R=ne(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:oR(y,C)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===zh.mapValue&&s===zh.mapValue)return 0;if(o===zh.mapValue)return 1;if(s===zh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=m_(u[p],h[p]);if(m!==0)return m;let y=Ps(a[u[p]],l[h[p]]);if(y!==0)return y}return ne(u.length,h.length)})(t.mapValue,e.mapValue);default:throw H(23264,{le:n})}}function iR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);let n=lr(t),r=lr(e),i=ne(n.seconds,r.seconds);return i!==0?i:ne(n.nanos,r.nanos)}function oR(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=Ps(n[i],r[i]);if(o)return o}return ne(n.length,r.length)}function ks(t){return E_(t)}function E_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=lr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return dr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return $.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=E_(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${E_(n.fields[s])}`;return i+"}"})(t.mapValue):H(61005,{value:t})}function Wh(t){switch(oi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Pf(t);return e?16+Wh(e):16;case 5:return 2*t.stringValue.length;case 6:return dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Wh(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return go(r.fields,(o,s)=>{i+=o.length+Wh(s)}),i})(t.mapValue);default:throw H(13486,{value:t})}}function sR(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function I_(t){return!!t&&"integerValue"in t}function nI(t){return!!t&&"arrayValue"in t}function aR(t){return!!t&&"nullValue"in t}function cR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Kh(t){return!!t&&"mapValue"in t}function lN(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[eI])===null||n===void 0?void 0:n.stringValue)===tI}function eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=eu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uN}var uie={mapValue:{fields:{[eI]:{stringValue:tI},[Ms]:{arrayValue:{}}}}};var fn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Kh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)}setAll(e){let n=Bt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=eu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Kh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Kh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){go(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(eu(this.value))}};function hN(t){let e=[];return go(t.fields,(n,r)=>{let i=new Bt([n]);if(Kh(r)){let o=hN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Pn(e)}var pn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ee.min(),ee.min(),ee.min(),fn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ee.min(),ee.min(),fn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ee.min(),ee.min(),fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Os=class{constructor(e,n){this.position=e,this.inclusive=n}};function uR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),n.key):r=Ps(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function lR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fn(t.position[n],e.position[n]))return!1;return!0}var co=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function SH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var of=class{},Be=class t extends of{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new T_(e,n,r):n==="array-contains"?new C_(e,r):n==="in"?new S_(e,r):n==="not-in"?new A_(e,r):n==="array-contains-any"?new R_(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new D_(e,r):new b_(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ps(n,this.value)):n!==null&&oi(this.value)===oi(n)&&this.matchesComparison(Ps(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gn=class t extends of{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return fN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function fN(t){return t.op==="and"}function pN(t){return AH(t)&&fN(t)}function AH(t){for(let e of t.filters)if(e instanceof gn)return!1;return!0}function w_(t){if(t instanceof Be)return t.field.canonicalString()+t.op.toString()+ks(t.value);if(pN(t))return t.filters.map(e=>w_(e)).join(",");{let e=t.filters.map(n=>w_(n)).join(",");return`${t.op}(${e})`}}function gN(t,e){return t instanceof Be?(function(r,i){return i instanceof Be&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)})(t,e):t instanceof gn?(function(r,i){return i instanceof gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&gN(s,i.filters[a]),!0):!1})(t,e):void H(19439)}function mN(t){return t instanceof Be?(function(n){return`${n.field.canonicalString()} ${n.op} ${ks(n.value)}`})(t):t instanceof gn?(function(n){return n.op.toString()+" {"+n.getFilters().map(mN).join(" ,")+"}"})(t):"Filter"}var T_=class extends Be{constructor(e,n,r){super(e,n,r),this.key=$.fromName(r.referenceValue)}matches(e){let n=$.comparator(e.key,this.key);return this.matchesComparison(n)}},D_=class extends Be{constructor(e,n){super(e,"in",n),this.keys=yN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},b_=class extends Be{constructor(e,n){super(e,"not-in",n),this.keys=yN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function yN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>$.fromName(r.referenceValue))}var C_=class extends Be{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return nI(n)&&cu(n.arrayValue,this.value)}},S_=class extends Be{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&cu(this.value.arrayValue,n)}},A_=class extends Be{constructor(e,n){super(e,"not-in",n)}matches(e){if(cu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!cu(this.value.arrayValue,n)}},R_=class extends Be{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!nI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cu(this.value.arrayValue,r))}};var N_=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function dR(t,e=null,n=[],r=[],i=null,o=null,s=null){return new N_(t,e,n,r,i,o,s)}function rI(t){let e=Y(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>w_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Mf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ks(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ks(r)).join(",")),e.Pe=n}return e.Pe}function iI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!lR(t.startAt,e.startAt)&&lR(t.endAt,e.endAt)}function M_(t){return $.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var si=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function RH(t,e,n,r,i,o,s,a){return new si(t,e,n,r,i,o,s,a)}function vN(t){return new si(t)}function hR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _N(t){return t.collectionGroup!==null}function tu(t){let e=Y(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Je(Bt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new co(o,r))}),n.has(Bt.keyField().canonicalString())||e.Te.push(new co(Bt.keyField(),r))}return e.Te}function xn(t){let e=Y(t);return e.Ie||(e.Ie=NH(e,tu(t))),e.Ie}function NH(t,e){if(t.limitType==="F")return dR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new co(i.field,o)});let n=t.endAt?new Os(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Os(t.startAt.position,t.startAt.inclusive):null;return dR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function P_(t,e){let n=t.filters.concat([e]);return new si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function k_(t,e,n){return new si(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kf(t,e){return iI(xn(t),xn(e))&&t.limitType===e.limitType}function EN(t){return`${rI(xn(t))}|lt:${t.limitType}`}function Is(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>mN(i)).join(", ")}]`),Mf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ks(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ks(i)).join(",")),`Target(${r})`})(xn(t))}; limitType=${t.limitType})`}function Of(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of tu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=uR(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,tu(r),i)||r.endAt&&!(function(s,a,u){let l=uR(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,tu(r),i))})(t,e)}function MH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IN(t){return(e,n)=>{let r=!1;for(let i of tu(t)){let o=PH(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function PH(t,e,n){let r=t.field.isKeyField()?$.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ps(u,l):H(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H(19790,{direction:t.dir})}}var hr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return iN(this.inner)}size(){return this.innerSize}};var kH=new Me($.comparator);function fr(){return kH}var wN=new Me($.comparator);function Xc(...t){let e=wN;for(let n of t)e=e.insert(n.key,n);return e}function TN(t){let e=wN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ro(){return nu()}function DN(){return nu()}function nu(){return new hr(t=>t.toString(),(t,e)=>t.isEqual(e))}var OH=new Me($.comparator),xH=new Je($.comparator);function se(...t){let e=xH;for(let n of t)e=e.add(n);return e}var LH=new Je(ne);function FH(){return LH}function oI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function bN(t){return{integerValue:""+t}}function VH(t,e){return fH(e)?bN(e):oI(t,e)}var xs=class{constructor(){this._=void 0}};function jH(t,e,n){return t instanceof Ls?(function(i,o){let s={fields:{[sN]:{stringValue:oN},[cN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&XE(o)&&(o=Pf(o)),o&&(s.fields[aN]=o),{mapValue:s}})(n,e):t instanceof uo?SN(t,e):t instanceof lo?AN(t,e):(function(i,o){let s=CN(i,o),a=fR(s)+fR(i.Ee);return I_(s)&&I_(i.Ee)?bN(a):oI(i.serializer,a)})(t,e)}function UH(t,e,n){return t instanceof uo?SN(t,e):t instanceof lo?AN(t,e):n}function CN(t,e){return t instanceof Fs?(function(r){return I_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ls=class extends xs{},uo=class extends xs{constructor(e){super(),this.elements=e}};function SN(t,e){let n=RN(e);for(let r of t.elements)n.some(i=>Fn(i,r))||n.push(r);return{arrayValue:{values:n}}}var lo=class extends xs{constructor(e){super(),this.elements=e}};function AN(t,e){let n=RN(e);for(let r of t.elements)n=n.filter(i=>!Fn(i,r));return{arrayValue:{values:n}}}var Fs=class extends xs{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function fR(t){return be(t.integerValue||t.doubleValue)}function RN(t){return nI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BH(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof uo&&i instanceof uo||r instanceof lo&&i instanceof lo?Ns(r.elements,i.elements,Fn):r instanceof Fs&&i instanceof Fs?Fn(r.Ee,i.Ee):r instanceof Ls&&i instanceof Ls})(t.transform,e.transform)}var O_=class{constructor(e,n){this.version=e,this.transformResults=n}},oo=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Qh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Vs=class{};function NN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sf(t.key,oo.none()):new ho(t.key,t.data,oo.none());{let n=t.data,r=fn.empty(),i=new Je(Bt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new pr(t.key,r,new Pn(i.toArray()),oo.none())}}function $H(t,e,n){t instanceof ho?(function(i,o,s){let a=i.value.clone(),u=gR(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof pr?(function(i,o,s){if(!Qh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=gR(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(MN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function ru(t,e,n,r){return t instanceof ho?(function(o,s,a,u){if(!Qh(o.precondition,s))return a;let l=o.value.clone(),h=mR(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof pr?(function(o,s,a,u){if(!Qh(o.precondition,s))return a;let l=mR(o.fieldTransforms,u,s),h=s.data;return h.setAll(MN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Qh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function HH(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=CN(r.transform,i||null);o!=null&&(n===null&&(n=fn.empty()),n.set(r.field,o))}return n||null}function pR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ns(r,i,(o,s)=>BH(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ho=class extends Vs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},pr=class extends Vs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function MN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function gR(t,e,n){let r=new Map;me(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,UH(s,a,n[i]))}return r}function mR(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,jH(o,s,e))}return r}var sf=class extends Vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},x_=class extends Vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var L_=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&$H(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=ru(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=ru(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=DN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=NN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Ns(this.mutations,e.mutations,(n,r)=>pR(n,r))&&Ns(this.baseMutations,e.baseMutations,(n,r)=>pR(n,r))}},F_=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return OH})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var V_=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var j_=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var je,ce;function zH(t){switch(t){case N.OK:return H(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return H(15467,{code:t})}}function PN(t){if(t===void 0)return ur("GRPC error has no .code"),N.UNKNOWN;switch(t){case je.OK:return N.OK;case je.CANCELLED:return N.CANCELLED;case je.UNKNOWN:return N.UNKNOWN;case je.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case je.INTERNAL:return N.INTERNAL;case je.UNAVAILABLE:return N.UNAVAILABLE;case je.UNAUTHENTICATED:return N.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case je.NOT_FOUND:return N.NOT_FOUND;case je.ALREADY_EXISTS:return N.ALREADY_EXISTS;case je.PERMISSION_DENIED:return N.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case je.ABORTED:return N.ABORTED;case je.OUT_OF_RANGE:return N.OUT_OF_RANGE;case je.UNIMPLEMENTED:return N.UNIMPLEMENTED;case je.DATA_LOSS:return N.DATA_LOSS;default:return H(39323,{code:t})}}(ce=je||(je={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";var yR=null;var qH=new ar([4294967295,4294967295],0);function vR(t){let e=BR().encode(t),n=new e_;return n.update(e),new Uint8Array(n.digest())}function _R(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ar([n,r],0),new ar([i,o],0)]}var U_=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new io(`Invalid padding: ${n}`);if(r<0)throw new io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new io(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=ar.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(ar.fromNumber(r)));return i.compare(qH)===1&&(i=new ar([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=vR(e),[r,i]=_R(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=vR(e),[r,i]=_R(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},io=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var af=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ee.min(),i,new Me(ne),fr(),se())}},uu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,se(),se(),se())}};var Cs=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},cf=class{constructor(e,n){this.targetId=e,this.De=n}},uf=class{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},lf=class{constructor(){this.ve=0,this.Ce=ER(),this.Fe=ft.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=se(),n=se(),r=se();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H(38017,{changeType:o})}}),new uu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=ER()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,me(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},B_=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=fr(),this.je=qh(),this.Je=qh(),this.He=new Me(ne)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:H(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(M_(o))if(r===0){let s=new $(o.path);this.Xe(n,s,pn.newNoDocument(s,ee.min()))}else me(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}yR?.ct((function(h,p,m,y,C){var R,S,M,U,z,W;let Pe={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ae=p.unchangedNames;return ae&&(Pe.bloomFilter={applied:C===0,hashCount:(R=ae?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(U=(M=(S=ae?.bits)===null||S===void 0?void 0:S.bitmap)===null||M===void 0?void 0:M.length)!==null&&U!==void 0?U:0,padding:(W=(z=ae?.bits)===null||z===void 0?void 0:z.padding)!==null&&W!==void 0?W:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),Pe})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=dr(r).toUint8Array()}catch(u){if(u instanceof tf)return ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new U_(s,i,o)}catch(u){return ii(u instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&M_(a.target)){let u=new $(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,pn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=se();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new af(e,n,this.He,this.ze,r);return this.ze=fr(),this.je=qh(),this.Je=qh(),this.He=new Me(ne),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new lf,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Je(ne),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Je(ne),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new lf),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function qh(){return new Me($.comparator)}function ER(){return new Me($.comparator)}var GH={asc:"ASCENDING",desc:"DESCENDING"},WH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KH={and:"AND",or:"OR"},$_=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function H_(t,e){return t.useProto3Json||Mf(e)?e:{value:e}}function df(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QH(t,e){return df(t,e.toTimestamp())}function Ln(t){return me(!!t,49232),ee.fromTimestamp((function(n){let r=lr(n);return new He(r.seconds,r.nanos)})(t))}function sI(t,e){return z_(t,e).canonicalString()}function z_(t,e){let n=(function(i){return new Ce(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function ON(t){let e=Ce.fromString(t);return me(jN(e),10190,{key:e.toString()}),e}function q_(t,e){return sI(t.databaseId,e.path)}function s_(t,e){let n=ON(e);if(n.get(1)!==t.databaseId.projectId)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new $(LN(n))}function xN(t,e){return sI(t.databaseId,e)}function YH(t){let e=ON(t);return e.length===4?Ce.emptyPath():LN(e)}function G_(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function LN(t){return me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function IR(t,e,n){return{name:q_(t,e),fields:n.value.mapValue.fields}}function JH(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:H(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(me(h===void 0||typeof h=="string",58123),ft.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ft.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?N.UNKNOWN:PN(l.code);return new L(h,l.message||"")})(s);n=new uf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=s_(t,r.document.name),o=Ln(r.document.updateTime),s=r.document.createTime?Ln(r.document.createTime):ee.min(),a=new fn({mapValue:{fields:r.document.fields}}),u=pn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Cs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=s_(t,r.document),o=r.readTime?Ln(r.readTime):ee.min(),s=pn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Cs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=s_(t,r.document),o=r.removedTargetIds||[];n=new Cs([],o,i,null)}else{if(!("filter"in e))return H(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new j_(i,o),a=r.targetId;n=new cf(a,s)}}return n}function ZH(t,e){let n;if(e instanceof ho)n={update:IR(t,e.key,e.value)};else if(e instanceof sf)n={delete:q_(t,e.key)};else if(e instanceof pr)n={update:IR(t,e.key,e.data),updateMask:a4(e.fieldMask)};else{if(!(e instanceof x_))return H(16599,{Rt:e.type});n={verify:q_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Ls)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fs)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw H(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:QH(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:H(27497)})(t,e.precondition)),n}function XH(t,e){return t&&t.length>0?(me(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Ln(i.updateTime):Ln(o);return s.isEqual(ee.min())&&(s=Ln(o)),new O_(s,i.transformResults||[])})(n,e))):[]}function e4(t,e){return{documents:[xN(t,e.path)]}}function t4(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=xN(t,i);let o=(function(l){if(l.length!==0)return VN(gn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:ws(m.field),direction:i4(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=H_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function n4(t){let e=YH(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){me(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let m=FN(p);return m instanceof gn&&pN(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(C){return new co(Ts(C.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(m))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,Mf(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Os(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Os(y,m)})(n.endAt)),RH(e,i,s,o,a,"F",u,l)}function r4(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Ts(n.unaryFilter.field);return Be.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ts(n.unaryFilter.field);return Be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Ts(n.unaryFilter.field);return Be.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Ts(n.unaryFilter.field);return Be.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return H(61313);default:return H(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Be.create(Ts(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return H(58110);default:return H(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return gn.create(n.compositeFilter.filters.map(r=>FN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H(1026)}})(n.compositeFilter.op))})(t):H(30097,{filter:t})}function i4(t){return GH[t]}function o4(t){return WH[t]}function s4(t){return KH[t]}function ws(t){return{fieldPath:t.canonicalString()}}function Ts(t){return Bt.fromServerFormat(t.fieldPath)}function VN(t){return t instanceof Be?(function(n){if(n.op==="=="){if(cR(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NAN"}};if(aR(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(cR(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NAN"}};if(aR(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ws(n.field),op:o4(n.op),value:n.value}}})(t):t instanceof gn?(function(n){let r=n.getFilters().map(i=>VN(i));return r.length===1?r[0]:{compositeFilter:{op:s4(n.op),filters:r}}})(t):H(54877,{filter:t})}function a4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var lu=class t{constructor(e,n,r,i,o=ee.min(),s=ee.min(),a=ft.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var W_=class{constructor(e){this.gt=e}};function c4(t){let e=n4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?k_(e,e.limit,"L"):e}var hf=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),su(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=lr(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(dr(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?dN(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):lN(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):H(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=Ms,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(be(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),$.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};hf.Ut=new hf;var K_=class{constructor(){this.Dn=new Q_}addToCollectionParentIndex(e,n){return this.Dn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(ao.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},Q_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Je(Ce.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Je(Ce.comparator)).toArray()}};var lie=new Uint8Array(0);var wR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},UN=41943040,Jt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(UN,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);var du=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var TR="LruGarbageCollector",u4=1048576;function DR([t,e],[n,r]){let i=ne(t,n);return i===0?ne(e,r):i}var Y_=class{constructor(e){this.Tr=e,this.buffer=new Je(DR),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();DR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},J_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){F(TR,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hs(n)?F(TR,"Ignoring IndexedDB error during garbage collection: ",n):await $s(n)}await this.Rr(3e5)})}},Z_=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(JE.ue);let r=new Y_(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(wR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wR):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Es()<=oe.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function l4(t,e){return new Z_(t,e)}var X_=class{constructor(){this.changes=new hr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var eE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var tE=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ru(r.mutation,i,Pn.empty(),He.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){let i=ro();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Xc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ro();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=fr(),s=nu(),a=(function(){return nu()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof pr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),ru(h.mutation,l,h.mutation.getFieldMask(),He.now())):s.set(l.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new eE(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=nu(),i=new Me((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Pn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=DN();h.forEach(m=>{if(!o.has(m)){let y=NN(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_N(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(ro()),a=ou,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(h=>({batchId:a,changes:TN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $(n)).next(r=>{let i=Xc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Xc();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=(function(p,m){return new si(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,pn.newInvalidDocument(h)))});let a=Xc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&ru(h.mutation,l,Pn.empty(),He.now()),Of(n,l)&&(a=a.insert(u,l))}),a})}};var nE=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return P.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Ln(i.createTime)}})(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:c4(i.bundledQuery),readTime:Ln(i.readTime)}})(n)),P.resolve()}};var rE=class{constructor(){this.overlays=new Me($.comparator),this.kr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ro();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=ro(),o=n.length+1,s=new $(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Me((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=ro(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=ro(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new V_(n,r));let o=this.kr.get(n);o===void 0&&(o=se(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var iE=class{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var hu=class{constructor(){this.qr=new Je(Ue.Qr),this.$r=new Je(Ue.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Ue(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ue(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new $(new Ce([])),r=new Ue(n,e),i=new Ue(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new $(new Ce([])),r=new Ue(n,e),i=new Ue(n,e+1),o=se();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Ue(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ue=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return $.comparator(e.key,n.key)||ne(e.Hr,n.Hr)}static Ur(e,n){return ne(e.Hr,n.Hr)||$.comparator(e.key,n.key)}};var oE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Je(Ue.Qr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new L_(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Ue(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?ZE:this.er-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ue(n,0),i=new Ue(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Je(ne);return n.forEach(i=>{let o=new Ue(i,0),s=new Ue(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),P.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Ue(new $(o),0),a=new Je(ne);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),P.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return P.forEach(n.mutations,i=>{let o=new Ue(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Ue(n,0),i=this.Yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var sE=class{constructor(e){this.ni=e,this.docs=(function(){return new Me($.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let r=fr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=fr(),s=n.path,a=new $(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||lH(uH(h),r)<=0||(i.has(h.key)||Of(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){H(9500)}ri(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aE(this)}getSize(e){return P.resolve(this.size)}},aE=class extends X_{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var cE=class{constructor(e){this.persistence=e,this.ii=new hr(n=>rI(n),iI),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.si=0,this.oi=new hu,this.targetCount=0,this._i=du.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),P.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new du(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.hr(n),P.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.oi.containsKey(n))}};var ff=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new JE(0),this.ci=!1,this.ci=!0,this.li=new iE,this.referenceDelegate=e(this),this.hi=new cE(this),this.indexManager=new K_,this.remoteDocumentCache=(function(i){return new sE(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new W_(n),this.Ti=new nE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new oE(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new uE(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return P.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},uE=class extends v_{constructor(e){super(),this.currentSequenceNumber=e}},lE=class t{constructor(e){this.persistence=e,this.Ai=new hu,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw H(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.mi,r=>{let i=$.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,ee.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return P.or([()=>P.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},pf=class t{constructor(e,n){this.persistence=e,this.gi=new hr(r=>pH(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=l4(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return P.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ee.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),P.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Wh(e.data.value)),n}Sr(e,n,r){return P.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var dE=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=se(),i=se();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var hE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fE=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return IA()?8:hH(Qe())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new hE;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Es()<=oe.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",Is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),P.resolve()):(Es()<=oe.DEBUG&&F("QueryEngine","Query:",Is(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Es()<=oe.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",Is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(n))):P.resolve())}ps(e,n){if(hR(n))return P.resolve(null);let r=xn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=k_(n,null,"F"),r=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,k_(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return hR(n)||i.isEqual(ee.min())?P.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?P.resolve(null):(Es()<=oe.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Is(n)),this.vs(e,s,n,cH(i,ou)).next(a=>a))})}bs(e,n){let r=new Je(IN(e));return n.forEach((i,o)=>{Of(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Es()<=oe.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",Is(n)),this.gs.getDocumentsMatchingQuery(e,n,ao.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var aI="LocalStore",d4=3e8,pE=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Me(ne),this.Ms=new hr(o=>rI(o),iI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tE(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function h4(t,e,n,r){return new pE(t,e,n,r)}async function BN(t,e){let n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=se();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function f4(t,e){let n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(C=>{y=y.next(()=>h.getEntry(u,C)).next(R=>{let S=l.docVersions.get(C);me(S!==null,48541),R.version.compareTo(S)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function $N(t){let e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function p4(t,e){let n=Y(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ft.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(R,S,M){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=d4?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(m,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=fr(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(g4(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ee.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function g4(t,e,n){let r=se(),i=se();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=fr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(aI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function m4(t,e){let n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ZE),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function y4(t,e){let n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new lu(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function gE(t,e,n){let r=Y(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Hs(s))throw s;F(aI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function bR(t,e,n){let r=Y(t),i=ee.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=Y(u),m=p.Ms.get(h);return m!==void 0?P.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,xn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:ee.min(),n?o:se())).next(a=>(v4(r,MH(e),a),{documents:a,qs:o})))}function v4(t,e,n){let r=t.xs.get(e)||ee.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var gf=class{constructor(){this.activeTargetIds=FH()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var mE=class{constructor(){this.Fo=new gf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new gf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var yE=class{xo(e){}shutdown(){}};var CR="ConnectivityMonitor",mf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){F(CR,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){F(CR,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Gh=null;function vE(){return Gh===null?Gh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gh++,"0x"+Gh.toString(16)}var a_="RestConnection",_4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},_E=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===nf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=vE(),a=this.Go(e,n.toUriEncodedString());F(a_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=Hr(l);return this.jo(e,a,u,r,h).then(p=>(F(a_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ii(a_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Bs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=_4[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var EE=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var ht="WebChannelConnection",IE=class extends _E{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=vE();return new Promise((a,u)=>{let l=new t_;l.setWithCredentials(!0),l.listenOnce(n_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zc.NO_ERROR:let p=l.getResponseJson();F(ht,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Zc.TIMEOUT:F(ht,`RPC '${e}' ${s} timed out`),u(new L(N.DEADLINE_EXCEEDED,"Request time out"));break;case Zc.HTTP_ERROR:let m=l.getStatus();if(F(ht,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let C=y?.error;if(C&&C.status&&C.message){let R=(function(M){let U=M.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(U)>=0?U:N.UNKNOWN})(C.status);u(new L(R,C.message))}else u(new L(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(N.UNAVAILABLE,"Connection failed."));break;default:H(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{F(ht,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);F(ht,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=vE(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=o_(),a=i_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");F(ht,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,C=new EE({Ho:S=>{y?F(ht,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(F(ht,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(ht,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Yo:()=>p.close()}),R=(S,M,U)=>{S.listen(M,z=>{try{U(z)}catch(W){setTimeout(()=>{throw W},0)}})};return R(p,_s.EventType.OPEN,()=>{y||(F(ht,`RPC '${e}' stream ${i} transport opened.`),C.s_())}),R(p,_s.EventType.CLOSE,()=>{y||(y=!0,F(ht,`RPC '${e}' stream ${i} transport closed`),C.__(),this.I_(p))}),R(p,_s.EventType.ERROR,S=>{y||(y=!0,ii(ht,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),C.__(new L(N.UNAVAILABLE,"The operation could not be completed")))}),R(p,_s.EventType.MESSAGE,S=>{var M;if(!y){let U=S.data[0];me(!!U,16349);let z=U,W=z?.error||((M=z[0])===null||M===void 0?void 0:M.error);if(W){F(ht,`RPC '${e}' stream ${i} received error:`,W);let Pe=W.status,ae=(function(E){let I=je[E];if(I!==void 0)return PN(I)})(Pe),w=W.message;ae===void 0&&(ae=N.INTERNAL,w="Unknown error status: "+Pe+" with message "+W.message),y=!0,C.__(new L(ae,w)),p.close()}else F(ht,`RPC '${e}' stream ${i} received:`,U),C.a_(U)}}),R(a,r_.STAT_EVENT,S=>{S.stat===Hh.PROXY?F(ht,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Hh.NOPROXY&&F(ht,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function c_(){return typeof document<"u"?document:null}function xf(t){return new $_(t,!0)}var yf=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var SR="PersistentStream",vf=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new yf(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return F(SR,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(F(SR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},wE=class extends vf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=JH(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Ln(s.readTime):ee.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=G_(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=M_(u)?{documents:e4(o,u)}:{query:t4(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=kN(o,s.resumeToken);let l=H_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=df(o,s.snapshotVersion.toTimestamp());let l=H_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=r4(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=G_(this.serializer),n.removeTarget=e,this.k_(n)}},TE=class extends vf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=XH(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=G_(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>ZH(this.serializer,r))};this.k_(n)}};var DE=class{},bE=class extends DE{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,z_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(N.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,z_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(N.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},CE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ur(n),this._a=!1):F("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var fo="RemoteStore",SE=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{mo(this)&&(F(fo,"Restarting streams for network reachability change."),await(async function(u){let l=Y(u);l.Ia.add(4),await yu(l),l.Aa.set("Unknown"),l.Ia.delete(4),await Lf(l)})(this))})}),this.Aa=new CE(r,i)}};async function Lf(t){if(mo(t))for(let e of t.da)await e(!0)}async function yu(t){for(let e of t.da)await e(!1)}function HN(t,e){let n=Y(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),dI(n)?lI(n):zs(n).x_()&&uI(n,e))}function cI(t,e){let n=Y(t),r=zs(n);n.Ta.delete(e),r.x_()&&zN(n,e),n.Ta.size===0&&(r.x_()?r.B_():mo(n)&&n.Aa.set("Unknown"))}function uI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zs(t).H_(e)}function zN(t,e){t.Ra.$e(e),zs(t).Y_(e)}function lI(t){t.Ra=new B_({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),zs(t).start(),t.Aa.aa()}function dI(t){return mo(t)&&!zs(t).M_()&&t.Ta.size>0}function mo(t){return Y(t).Ia.size===0}function qN(t){t.Ra=void 0}async function E4(t){t.Aa.set("Online")}async function I4(t){t.Ta.forEach((e,n)=>{uI(t,e)})}async function w4(t,e){qN(t),dI(t)?(t.Aa.la(e),lI(t)):t.Aa.set("Unknown")}async function T4(t,e,n){if(t.Aa.set("Online"),e instanceof uf&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(t,e)}catch(r){F(fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _f(t,r)}else if(e instanceof Cs?t.Ra.Ye(e):e instanceof cf?t.Ra.it(e):t.Ra.et(e),!n.isEqual(ee.min()))try{let r=await $N(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),zN(o,u);let p=new lu(h.target,u,l,h.sequenceNumber);uI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){F(fo,"Failed to raise snapshot:",r),await _f(t,r)}}async function _f(t,e,n){if(!Hs(e))throw e;t.Ia.add(1),await yu(t),t.Aa.set("Offline"),n||(n=()=>$N(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{F(fo,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Lf(t)})}function GN(t,e){return e().catch(n=>_f(t,n,e))}async function Ff(t){let e=Y(t),n=ai(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ZE;for(;D4(e);)try{let i=await m4(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,b4(e,i)}catch(i){await _f(e,i)}WN(e)&&KN(e)}function D4(t){return mo(t)&&t.Pa.length<10}function b4(t,e){t.Pa.push(e);let n=ai(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function WN(t){return mo(t)&&!ai(t).M_()&&t.Pa.length>0}function KN(t){ai(t).start()}async function C4(t){ai(t).na()}async function S4(t){let e=ai(t);for(let n of t.Pa)e.X_(n.mutations)}async function A4(t,e,n){let r=t.Pa.shift(),i=F_.from(r,e,n);await GN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ff(t)}async function R4(t,e){e&&ai(t).Z_&&await(async function(r,i){if((function(s){return zH(s)&&s!==N.ABORTED})(i.code)){let o=r.Pa.shift();ai(r).N_(),await GN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Ff(r)}})(t,e),WN(t)&&KN(t)}async function AR(t,e){let n=Y(t);n.asyncQueue.verifyOperationInProgress(),F(fo,"RemoteStore received new credentials");let r=mo(n);n.Ia.add(3),await yu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Lf(n)}async function N4(t,e){let n=Y(t);e?(n.Ia.delete(2),await Lf(n)):e||(n.Ia.add(2),await yu(n),n.Aa.set("Unknown"))}function zs(t){return t.Va||(t.Va=(function(n,r,i){let o=Y(n);return o.ia(),new wE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:E4.bind(null,t),e_:I4.bind(null,t),n_:w4.bind(null,t),J_:T4.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),dI(t)?lI(t):t.Aa.set("Unknown")):(await t.Va.stop(),qN(t))})),t.Va}function ai(t){return t.ma||(t.ma=(function(n,r,i){let o=Y(n);return o.ia(),new TE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:C4.bind(null,t),n_:R4.bind(null,t),ea:S4.bind(null,t),ta:A4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Ff(t)):(await t.ma.stop(),t.Pa.length>0&&(F(fo,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}var AE=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function hI(t,e){if(ur("AsyncQueue",`${e}: ${t}`),Hs(t))return new L(N.UNAVAILABLE,`${e}: ${t}`);throw t}var Ef=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||$.comparator(n.key,r.key):(n,r)=>$.comparator(n.key,r.key),this.keyedMap=Xc(),this.sortedSet=new Me(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var If=class{constructor(){this.fa=new Me($.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):H(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},js=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Ef.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var RE=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},NE=class{constructor(){this.queries=RR(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=Y(n),o=i.queries;i.queries=RR(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(N.ABORTED,"Firestore shutting down"))}};function RR(){return new hr(t=>EN(t),kf)}async function M4(t,e){let n=Y(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new RE,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=hI(s,`Initialization of query '${Is(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&fI(n)}async function P4(t,e){let n=Y(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k4(t,e){let n=Y(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&fI(n)}function O4(t,e,n){let r=Y(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function fI(t){t.Da.forEach(e=>{e.next()})}var ME,NR;(NR=ME||(ME={})).Fa="default",NR.Cache="cache";var PE=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new js(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==ME.Cache}};var wf=class{constructor(e){this.key=e}},Tf=class{constructor(e){this.key=e}},kE=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=se(),this.mutatedKeys=se(),this.Xa=IN(e),this.eu=new Ef(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new If,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Of(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),S=!1;m&&y?m.data.isEqual(y.data)?C!==R&&(r.track({type:3,doc:y}),S=!0):this.iu(m,y)||(r.track({type:2,doc:y}),S=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),S=!0):m&&!y&&(r.track({type:1,doc:m}),S=!0,(u||l)&&(a=!0)),S&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,C){let R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H(20277,{At:S})}};return R(y)-R(C)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new js(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new If,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=se(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Tf(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new wf(r))}),n}uu(e){this.Ha=e.qs,this.Za=se();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return js.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},pI="SyncEngine",OE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},xE=class{constructor(e){this.key=e,this.lu=!1}},LE=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new hr(a=>EN(a),kf),this.Tu=new Map,this.Iu=new Set,this.du=new Me($.comparator),this.Eu=new Map,this.Au=new hu,this.Ru={},this.Vu=new Map,this.mu=du.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function x4(t,e,n=!0){let r=eM(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await QN(r,e,n,!0),i}async function L4(t,e){let n=eM(t);await QN(n,e,!0,!1)}async function QN(t,e,n,r){let i=await y4(t.localStore,xn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await F4(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&HN(t.remoteStore,i),a}async function F4(t,e,n,r,i){t.gu=(p,m,y)=>(async function(R,S,M,U){let z=S.view.nu(M);z.Ds&&(z=await bR(R.localStore,S.query,!1).then(({documents:w})=>S.view.nu(w,z)));let W=U&&U.targetChanges.get(S.targetId),Pe=U&&U.targetMismatches.get(S.targetId)!=null,ae=S.view.applyChanges(z,R.isPrimaryClient,W,Pe);return PR(R,S.targetId,ae._u),ae.snapshot})(t,p,m,y);let o=await bR(t.localStore,e,!0),s=new kE(e,o.qs),a=s.nu(o.documents),u=uu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);PR(t,n,l._u);let h=new OE(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot}async function V4(t,e,n){let r=Y(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!kf(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&cI(r.remoteStore,i.targetId),FE(r,i.targetId)}).catch($s)):(FE(r,i.targetId),await gE(r.localStore,i.targetId,!0))}async function j4(t,e){let n=Y(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),cI(n.remoteStore,r.targetId))}async function U4(t,e,n){let r=W4(t);try{let i=await(function(s,a){let u=Y(s),l=He.now(),h=a.reduce((y,C)=>y.add(C.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=fr(),R=se();return u.Os.getEntries(y,h).next(S=>{C=S,C.forEach((M,U)=>{U.isValidDocument()||(R=R.add(M))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,C)).next(S=>{p=S;let M=[];for(let U of a){let z=HH(U,p.get(U.key).overlayedDocument);z!=null&&M.push(new pr(U.key,z,hN(z.value.mapValue),oo.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,M,a)}).next(S=>{m=S;let M=S.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,S.batchId,M)})}).then(()=>({batchId:m.batchId,changes:TN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Me(ne)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),await vu(r,i.changes),await Ff(r.remoteStore)}catch(i){let o=hI(i,"Failed to persist write");n.reject(o)}}async function YN(t,e){let n=Y(t);try{let r=await p4(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?me(s.lu,14607):i.removedDocuments.size>0&&(me(s.lu,42227),s.lu=!1))}),await vu(n,r,e)}catch(r){await $s(r)}}function MR(t,e,n){let r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=Y(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&fI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function B4(t,e,n){let r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Me($.comparator);s=s.insert(o,pn.newNoDocument(o,ee.min()));let a=se().add(o),u=new af(ee.min(),new Map,new Me(ne),s,a);await YN(r,u),r.du=r.du.remove(o),r.Eu.delete(e),gI(r)}else await gE(r.localStore,e,!1).then(()=>FE(r,e,n)).catch($s)}async function $4(t,e){let n=Y(t),r=e.batch.batchId;try{let i=await f4(n.localStore,e);ZN(n,r,null),JN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vu(n,i)}catch(i){await $s(i)}}async function H4(t,e,n){let r=Y(t);try{let i=await(function(s,a){let u=Y(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(me(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);ZN(r,e,n),JN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vu(r,i)}catch(i){await $s(i)}}function JN(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function ZN(t,e,n){let r=Y(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function FE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||XN(t,r)})}function XN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(cI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),gI(t))}function PR(t,e,n){for(let r of n)r instanceof wf?(t.Au.addReference(r.key,e),z4(t,r)):r instanceof Tf?(F(pI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||XN(t,r.key)):H(19791,{yu:r})}function z4(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(F(pI,"New document in limbo: "+n),t.Iu.add(r),gI(t))}function gI(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new $(Ce.fromString(e)),r=t.mu.next();t.Eu.set(r,new xE(n)),t.du=t.du.insert(n,r),HN(t.remoteStore,new lu(xn(vN(n.path)),r,"TargetPurposeLimboResolution",JE.ue))}}async function vu(t,e,n){let r=Y(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=dE.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(u,l){let h=Y(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Hs(p))throw p;F(aI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),C=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(m,R)}}})(r.localStore,o))}async function q4(t,e){let n=Y(t);if(!n.currentUser.isEqual(e)){F(pI,"User change. New user:",e.toKey());let r=await BN(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(N.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vu(n,r.Bs)}}function G4(t,e){let n=Y(t),r=n.Eu.get(e);if(r&&r.lu)return se().add(r.key);{let i=se(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function eM(t){let e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=YN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=G4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=B4.bind(null,e),e.hu.J_=k4.bind(null,e.eventManager),e.hu.pu=O4.bind(null,e.eventManager),e}function W4(t){let e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H4.bind(null,e),e}var tM=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=xf(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)}Cu(n,r){return null}Fu(n,r){return null}vu(n){return h4(this.persistence,new fE,n.initialUser,this.serializer)}Du(n){return new ff(lE.Vi,this.serializer)}bu(n){return new mE}async terminate(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),VE=class extends tM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){me(this.persistence.referenceDelegate instanceof pf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new J_(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new ff(r=>pf.Vi(r,n),this.serializer)}};var K4=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>MR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=q4.bind(null,this.syncEngine),await N4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new NE})()}createDatastore(n){let r=xf(n.databaseInfo.databaseId),i=(function(s){return new IE(s)})(n.databaseInfo);return(function(s,a,u,l){return new bE(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new SE(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>MR(this.syncEngine,r,0),(function(){return mf.C()?new mf:new yE})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let m=new LE(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){var n,r;await(async function(o){let s=Y(o);F(fo,"RemoteStore shutting down."),s.Ia.add(5),await yu(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return t.provider={build:()=>new t},t})();var jE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var ci="FirestoreClient",UE=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=iu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{F(ci,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F(ci,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=hI(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function u_(t,e){t.asyncQueue.verifyOperationInProgress(),F(ci,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await BN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ii("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{F("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ii("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function kR(t,e){t.asyncQueue.verifyOperationInProgress();let n=await Q4(t);F(ci,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>AR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>AR(e.remoteStore,i)),t._onlineComponents=e}async function Q4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(ci,"Using user provided OfflineComponentProvider");try{await u_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await u_(t,new tM)}}else F(ci,"Using default OfflineComponentProvider"),await u_(t,new VE(void 0));return t._offlineComponents}async function nM(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(ci,"Using user provided OnlineComponentProvider"),await kR(t,t._uninitializedComponentsProvider._online)):(F(ci,"Using default OnlineComponentProvider"),await kR(t,new K4))),t._onlineComponents}function Y4(t){return nM(t).then(e=>e.syncEngine)}async function J4(t){let e=await nM(t),n=e.eventManager;return n.onListen=x4.bind(null,e.syncEngine),n.onUnlisten=V4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=L4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=j4.bind(null,e.syncEngine),n}function Z4(t,e,n={}){let r=new kn;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new jE({next:m=>{h.Ou(),s.enqueueAndForget(()=>P4(o,p)),m.fromCache&&u.source==="server"?l.reject(new L(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new PE(a,h,{includeMetadataChanges:!0,ka:!0});return M4(o,p)})(await J4(t),t.asyncQueue,e,n,r)),r.promise}function rM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var OR=new Map;var iM="firestore.googleapis.com",xR=!0,Df=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iM,this.ssl=xR}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:xR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=UN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<u4)throw new L(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Us=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Df({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Df(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new l_;switch(r.type){case"firstParty":return new p_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=OR.get(n);r&&(F("ComponentProvider","Removing Datastore"),OR.delete(n),r.terminate())})(this),Promise.resolve()}};function oM(t,e,n,r={}){var i;t=Xh(t,Us);let o=Hr(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(mh(`https://${u}`),yh("Firestore",!0)),s.host!==iM&&s.host!==u&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Sn(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Ye.MOCK_USER;else{h=gA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new L(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ye(m)}t._authCredentials=new d_(new Yh(h,p))}}var po=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},bt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(mu(n,t._jsonSchema))return new t(e,r||null,new $(Ce.fromString(n.referencePath)))}};bt._jsonSchemaVersion="firestore/documentReference/1.0",bt._jsonSchema={type:$e("string",bt._jsonSchemaVersion),referencePath:$e("string")};var ei=class t extends po{constructor(e,n,r){super(e,n,vN(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new $(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function sM(t,e,...n){if(t=dt(t),$R("collection","path",e),t instanceof Us){let r=Ce.fromString(e,...n);return X0(r),new ei(t,null,r)}{if(!(t instanceof bt||t instanceof ei))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return X0(r),new ei(t.firestore,null,r)}}function mI(t,e,...n){if(t=dt(t),arguments.length===1&&(e=iu.newId()),$R("doc","path",e),t instanceof Us){let r=Ce.fromString(e,...n);return Z0(r),new bt(t,null,new $(r))}{if(!(t instanceof bt||t instanceof ei))throw new L(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ce.fromString(e,...n));return Z0(r),new bt(t.firestore,t instanceof ei?t.converter:null,new $(r))}}var LR="AsyncQueue",bf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new yf(this,"async_queue_retry"),this.oc=()=>{let r=c_();r&&F(LR,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=c_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=c_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new kn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Hs(e))throw e;F(LR,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ur("INTERNAL UNHANDLED ERROR: ",FR(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=AE.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&H(47125,{hc:FR(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function FR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var fu=class extends Us{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new bf,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new bf(e),this._firestoreClient=void 0,await e}}};function aM(t,e){let n=typeof t=="object"?t:Yi(),r=typeof t=="string"?t:e||nf,i=ps(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=pA("firestore");o&&oM(i,...o)}return i}function cM(t){if(t._terminated)throw new L(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||X4(t),t._firestoreClient}function X4(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new __(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,rM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new UE(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var ti=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ft.fromBase64String(e))}catch(n){throw new L(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};ti._jsonSchemaVersion="firestore/bytes/1.0",ti._jsonSchema={type:$e("string",ti._jsonSchemaVersion),bytes:$e("string")};var pu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Cf=class{constructor(e){this._methodName=e}};var ni=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(mu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};ni._jsonSchemaVersion="firestore/geoPoint/1.0",ni._jsonSchema={type:$e("string",ni._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};var ri=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ri._jsonSchemaVersion="firestore/vectorValue/1.0",ri._jsonSchema={type:$e("string",ri._jsonSchemaVersion),vectorValues:$e("object")};var ez=/^__.*__$/,BE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new pr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ho(e,this.data,n,this.fieldTransforms)}};function uM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H(40011,{Ec:t})}}var $E=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Sf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(uM(this.Ec)&&ez.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},HE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xf(e)}Dc(e,n,r,i=!1){return new $E({Ec:e,methodName:n,bc:r,path:Bt.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lM(t){let e=t._freezeSettings(),n=xf(t._databaseId);return new HE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tz(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);fM("Data must be an object, but it was:",s,r);let a=dM(r,s),u,l;if(o.merge)u=new Pn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=rz(e,p,n);if(!s.contains(m))throw new L(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);oz(h,m)||h.push(m)}u=new Pn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new BE(new fn(a),u,l)}function nz(t,e,n,r=!1){return yI(n,t.Dc(r?4:3,e))}function yI(t,e){if(hM(t=dt(t)))return fM("Unsupported field value:",e,t),dM(t,e);if(t instanceof Cf)return(function(r,i){if(!uM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=yI(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=dt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=He.fromDate(r);return{timestampValue:df(i.serializer,o)}}if(r instanceof He){let o=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:df(i.serializer,o)}}if(r instanceof ni)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ti)return{bytesValue:kN(i.serializer,r._byteString)};if(r instanceof bt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:sI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ri)return(function(s,a){return{mapValue:{fields:{[eI]:{stringValue:tI},[Ms]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return oI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Nf(r)}`)})(t,e)}function dM(t,e){let n={};return iN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(r,i)=>{let o=yI(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function hM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof ni||t instanceof ti||t instanceof bt||t instanceof Cf||t instanceof ri)}function fM(t,e,n){if(!hM(n)||!HR(n)){let r=Nf(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function rz(t,e,n){if((e=dt(e))instanceof pu)return e._internalPath;if(typeof e=="string")return pM(t,e);throw Sf("Field path arguments must be of type string or ",t,!1,void 0,n)}var iz=new RegExp("[~\\*/\\[\\]]");function pM(t,e,n){if(e.search(iz)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pu(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sf(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(N.INVALID_ARGUMENT,a+t+u)}function oz(t,e){return t.some(n=>n.isEqual(e))}var Af=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new zE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(vI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},zE=class extends Af{data(){return super.data()}};function vI(t,e){return typeof e=="string"?pM(t,e):e instanceof pu?e._internalPath:e._delegate._internalPath}function sz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gu=class{},Rf=class extends gu{};function gM(t,e,...n){let r=[];e instanceof gu&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof GE).length,a=o.filter(u=>u instanceof qE).length;if(s>1||s>0&&a>0)throw new L(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var qE=class t extends Rf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return yM(e._query,n),new po(e.firestore,e.converter,P_(e._query,n))}_parse(e){let n=lM(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){jR(p,h);let C=[];for(let R of p)C.push(VR(u,o,R));m={arrayValue:{values:C}}}else m=VR(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||jR(p,h),m=nz(a,s,p,h==="in"||h==="not-in");return Be.create(l,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var GE=class t extends gu{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)yM(s,u),s=P_(s,u)})(e._query,n),new po(e.firestore,e.converter,P_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var WE=class t extends Rf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new co(o,s)})(e._query,this._field,this._direction);return new po(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new si(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function mM(t,e="asc"){let n=e,r=vI("orderBy",t);return WE._create(r,n)}function VR(t,e,n){if(typeof(n=dt(n))=="string"){if(n==="")throw new L(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_N(e)&&n.indexOf("/")!==-1)throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ce.fromString(n));if(!$.isDocumentKey(r))throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sR(t,new $(r))}if(n instanceof bt)return sR(t,n._key);throw new L(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nf(n)}.`)}function jR(t,e){if(!Array.isArray(t)||t.length===0)throw new L(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yM(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var KE=class{convertValue(e,n="none"){switch(oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw H(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return go(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Ms].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>be(s.doubleValue));return new ri(o)}convertGeoPoint(e){return new ni(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Pf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(au(e));default:return null}}convertTimestamp(e){let n=lr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ce.fromString(e);me(jN(r),9688,{name:e});let i=new rf(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(n)||ur(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function az(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var bs=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ss=class t extends Af{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new As(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(vI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Ss._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ss._jsonSchema={type:$e("string",Ss._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};var As=class extends Ss{data(e={}){return super.data(e)}},Rs=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new As(this._firestore,this._userDataWriter,r.key,r,new bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new As(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new As(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:cz(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=iu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function cz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H(61501,{type:t})}}Rs._jsonSchemaVersion="firestore/querySnapshot/1.0",Rs._jsonSchema={type:$e("string",Rs._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};var QE=class extends KE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ti(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}};function vM(t){t=Xh(t,po);let e=Xh(t.firestore,fu),n=cM(e),r=new QE(e);return sz(t._query),Z4(n,t._query).then(i=>new Rs(e,r,t,i))}function _M(t,e){let n=Xh(t.firestore,fu),r=mI(t),i=az(t.converter,e);return uz(n,[tz(lM(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,oo.exists(!1))]).then(()=>r)}function uz(t,e){return(function(r,i){let o=new kn;return r.asyncQueue.enqueueAndForget(async()=>U4(await Y4(r),i,o)),o.promise})(cM(t),e)}(function(e,n=!0){(function(i){Bs=i})(qr),dn(new Tt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new fu(new h_(r.getProvider("auth-internal")),new g_(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rf(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ne(K0,Q0,e),Ne(K0,Q0,"esm2017")})();var _u=class{constructor(e){return e}},EM="firestore",_I=class{constructor(){return ms(EM)}};var EI=new j("angularfire2.firestore-instances");function lz(t,e){let n=Vc(EM,t,e);return n&&new _u(n)}function dz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new _u(r)}}var hz={provide:_I,deps:[[new Lt,EI]]},fz={provide:_u,useFactory:lz,deps:[[new Lt,EI],rr]};function voe(t,...e){return Ne("angularfire",Gr.full,"fst"),At([fz,hz,{provide:EI,useFactory:dz(t),multi:!0,deps:[De,Ge,Wr,Zi,[new Lt,Jc],[new Lt,ys],...e]}])}var _oe=Dt(_M,!0,2);var Eoe=Dt(sM,!0,2);var Ioe=Dt(mI,!0,2);var woe=Dt(vM,!0);var Toe=Dt(aM,!0);var Doe=Dt(mM,!0,2),boe=Dt(gM,!0,2);export{V as a,Ie as b,Xe as c,qe as d,CP as e,ye as f,xP as g,x as h,El as i,B as j,br as k,j as l,q as m,k as n,VT as o,jT as p,Et as q,pk as r,kr as s,Qt as t,Wo as u,Qa as v,Ja as w,hb as x,wO as y,fd as z,Fe as A,Lm as B,ji as C,Fr as D,Xb as E,nC as F,Qo as G,md as H,_1 as I,E1 as J,aC as K,zm as L,qm as M,yd as N,T1 as O,vd as P,A1 as Q,lC as R,q1 as S,dC as T,Gm as U,hC as V,Q1 as W,fC as X,X1 as Y,nL as Z,iL as _,aL as $,wd as aa,Td as ba,Yn as ca,zC as da,eF as ea,rF as fa,WC as ga,yF as ha,jr as ia,BF as ja,ky as ka,Mc as la,uA as ma,wj as na,bne as oa,Cne as pa,Yc as qa,$re as ra,Hre as sa,zre as ta,qre as ua,_u as va,voe as wa,_oe as xa,Eoe as ya,Ioe as za,woe as Aa,Toe as Ba,Doe as Ca,boe as Da};
